{"version":3,"sources":["Home/user.min.js"],"names":["$","document","ready","HideAll","items","j","length","parent","removeClass","css","setCookie","sName","sValue","expireHours","cookieString","encodeURI","date","Date","setTime","getTime","toGMTString","cookie","getCookie","allCookie","aCookie","trim","split","aCrumb","decodeURI","setActiveItem","all_a_obj","active_a_index","i","html","addClass","click","verifyimg","attr","indexOf","this","Math","random","replace","Accordion","el","multiple","links","find","on","dropdown","prototype","e","$el","data","$this","$next","next","slideToggle","toggleClass","url","first","console","log","not","slideUp","window","location","event","preventDefault","this_obj","mobile_number","val","undefined","alert","ajax","method","dataType","mobile","success","jsonData","flag","msg","error","cur_time","timer","setInterval","clearInterval","last_url","SELF","show_item","opt_cookie","onclick","o","hasClass","children"],"mappings":"AAGAA,EAAEC,UAAUC,MAAM,WAWd,QAASC,KAEL,IAAK,GADDC,GAAQJ,EAAE,YACLK,EAAE,EAAGA,EAAED,EAAME,OAAQD,IAE1BL,EAAEI,EAAMC,IAAIE,SAASC,YAAY,QACjCR,EAAEI,EAAMC,IAAII,IAAI,UAAU,QAKlC,QAASC,GAAUC,EAAMC,EAAOC,GAC5B,GAAIC,GAAeH,EAAQ,IAAMI,UAAUH,EAE3C,IAAIC,EAAY,EAAG,CACf,GAAIG,GAAO,GAAIC,KACfD,GAAKE,QAAQF,EAAKG,UAA0B,KAAdN,EAAqB,KACnDC,EAAeA,EAAe,WAAaE,EAAKI,cAEpDN,GAAgB,UAIhBb,SAASoB,OAASP,EAItB,QAASQ,GAAUX,GAEf,GAAIY,GAAYtB,SAASoB,OACrBG,EAAUxB,EAAEyB,KAAKF,EAErBC,GAAUA,EAAQE,MAAM,KAGxB,KAAK,GAAIrB,GAAE,EAAGA,EAAImB,EAAQlB,OAAQD,IAAI,CAClC,GAAIsB,GAASH,EAAQnB,GAAGqB,MAAM,IAC9B,IAAIf,GAASgB,EAAO,GAChB,MAAOC,WAAUD,EAAO,IAEhC,MAAO,MAwCX,QAASE,KAGL,IAAI,GAFAC,GAAY9B,EAAE,cACd+B,EAAiBT,EAAU,eACvBU,EAAI,EAAEA,EAAIF,EAAUxB,OAAQ0B,IAChC,GAAGhC,EAAE8B,EAAUC,IAAiBE,QAAUjC,EAAE8B,EAAUE,IAAIC,OAAO,CAC7DjC,EAAE8B,EAAUC,IAAiBG,SAAS,SACtC,QA/FZlC,EAAE,qBAAqBmC,MAAM,WACzB,GAAIC,GAAYpC,EAAE,qBAAqBqC,KAAK,MACxCD,GAAUE,QAAQ,KAAK,EACvBtC,EAAEuC,MAAMF,KAAK,MAAOD,EAAU,WAAWI,KAAKC,UAE9CzC,EAAEuC,MAAMF,KAAK,MAAOD,EAAUM,QAAQ,QAAQ,IAAI,IAAIF,KAAKC,WAwDnE,IAAIE,GAAY,SAASC,EAAIC,GACzBN,KAAKK,GAAKA,MACVL,KAAKM,SAAWA,IAAY,CAG5B,IAAIC,GAAQP,KAAKK,GAAGG,KAAK,QAEzBD,GAAME,GAAG,SAAUJ,GAAIL,KAAKK,GAAIC,SAAUN,KAAKM,UAAWN,KAAKU,UAGnEN,GAAUO,UAAUD,SAAW,SAASE,GACpC,GAAIC,GAAMD,EAAEE,KAAKT,EAOjB,IANAU,MAAQtD,EAAEuC,MACNgB,MAAQD,MAAME,OAElBD,MAAME,cACNH,MAAM/C,SAASmD,YAAY,QAEtBP,EAAEE,KAAKR,SAEP,CACD,GAAIc,GAAMP,EAAIL,KAAK,KAAKa,QAAQvB,KAAK,OACrCwB,SAAQC,IAAI,OAAOH,OAHnBP,GAAIL,KAAK,YAAYgB,IAAIR,OAAOS,UAAUzD,SAASC,YAAY,SAoBvER,EAAE,kBAAkBgD,GAAG,QAAQ,WAC3B,GAAIW,GAAM3D,EAAEuC,MAAMF,KAAK,YACvB4B,QAAOC,SAAWP,IAItB3D,EAAE,4CAA4CgD,GAAG,QAAQ,SAASmB,GAC9DA,EAAMC,gBAIN,KAAI,GAFAtC,GAAY9B,EAAE,cACd+B,EAAiB,EACbC,EAAI,EAAEA,EAAIF,EAAUxB,OAAQ0B,IAChC,GAAGhC,EAAE,oBAAoBiC,QAAUjC,EAAE8B,EAAUE,IAAIC,OAAO,CACtDF,EAAiBC,EAAE,CACnB,OAGR6B,QAAQC,IAAI,gBAAgB/B,GAC5BrB,EAAU,cAAcqB,EAAe,GAEvC,IAAI4B,GAAM3D,EAAEuC,MAAMF,KAAK,YACvB4B,QAAOC,SAAWP,IAItB3D,EAAE,mBAAmBgD,GAAG,QAAQ,SAASmB,GACrC,GAAIE,GAAW,iBACfF,GAAMC,gBACN,IAAIE,GAAgBtE,EAAE,IAAIA,EAAEuC,MAAMF,KAAK,SAASkC,KAChD,IAAoB,IAAjBD,GAAwCE,QAAjBF,EAEtB,WADAG,OAAM,UAGVzE,GAAE0E,MACEf,IAAI3D,EAAEuC,MAAMF,KAAK,aACjBsC,OAAO,OACPC,SAAS,OACTvB,MACIwB,OAAO7E,EAAE,IAAIA,EAAEuC,MAAMF,KAAK,SAASkC,OAEvCO,QAAQ,SAASC,GACO,GAAjBA,EAASC,KACRP,MAAMM,EAASE,KAEfR,MAAMM,EAASE,MAGvBC,MAAM,SAASH,GACXlB,QAAQC,IAAIiB,KAIpB,IAAII,GAAW,GAEfnF,GAAEqE,GAAUnC,SAAS,WACrB,IAAIkD,GAAQnB,OAAOoB,YAAY,WAC3B,GAAGF,GAAY,EAIX,MAHAnF,GAAEqE,GAAUpC,KAAK,WACjBjC,EAAEqE,GAAU7D,YAAY,gBACxB8E,eAAcF,EAGlBvB,SAAQC,IAAI,YAAYqB,GACxBA,GACA,IAAIlD,GAAOkD,EAAW,GACtBnF,GAAEqE,GAAUpC,KAAKA,IACnB,OAINjC,EAAE,cAAcgD,GAAG,QAAQ,WAGvB,IAAI,GAFAlB,GAAY9B,EAAE,cACd+B,EAAiB,EACbC,EAAI,EAAEA,EAAIF,EAAUxB,OAAQ0B,IAChC,GAAGhC,EAAEuC,MAAMN,QAAUjC,EAAE8B,EAAUE,IAAIC,OAAO,CACxCF,EAAiBC,CACjB,OAGR6B,QAAQC,IAAI,gBAAgB/B,GAC5BrB,EAAU,cAAcqB,EAAe,IAEvCrB,EAAU,WAAWV,EAAE8B,EAAUC,IAAiBM,KAAK,QAAQ,IAC/DrC,EAAEuC,MAAML,SAAS,WAGrB,IAAIqD,GAAWjE,EAAU,YACrBkE,EAAOxF,EAAE,cAAcqC,KAAK,YAChCwB,SAAQC,IAAI,YAAYyB,EAAS,SAASC,EAO1C,IAAIC,GAAY,QACZC,EAAapE,EAAU,YAC3BuC,SAAQC,IAAI,cAAc4B,GACR,MAAdA,GAAoClB,QAAdkB,IACtBD,EAAW,OAASC,GAGxB1F,EAAE,IAAIyF,GAAWlF,SAAS2B,SAAS,QACnClC,EAAE,IAAIyF,GAAWhF,IAAI,UAAU,SAE/BoB,GAIA,KAAK,GADDzB,GAAQJ,EAAE,SACLK,EAAE,EAAGA,EAAED,EAAME,OAAQD,IAC1BD,EAAMC,GAAGsF,QAAU,WACf,GAAIC,GAAI5F,EAAE,QAAQA,EAAEuC,MAAMF,KAAK,QAC/B,IAAIrC,EAAE4F,GAAGrF,SAASsF,SAAS,QAoBvB7F,EAAE4F,GAAGrF,SAASC,YAAY,QAC1BR,EAAE4F,GAAGnF,IAAI,UAAU,QACnBT,EAAE4F,GAAGE,SAAS,MAAMtF,YAAY,cAtBD,CAC/BL,IACAH,EAAE4F,GAAGrF,SAAS2B,SAAS,QACvBlC,EAAE4F,GAAGnF,IAAI,UAAU,SAEnBC,EAAU,YAAYV,EAAEuC,MAAMF,KAAK,QAAQ,IAC3CwB,QAAQC,IAAI,YAAY9D,EAAE4F,GAAGE,SAAS,MAAM7D,QAC5CjC,EAAE4F,GAAGE,SAAS,MAAMlC,QAAQ1B,SAAS,SAIrC,KAAI,GAHAyB,GAAM3D,EAAE4F,GAAG7C,KAAK,KAAKa,QAAQvB,KAAK,QAClCP,EAAY9B,EAAE,cACd+B,EAAiB,EACbC,EAAI,EAAEA,EAAIF,EAAUxB,OAAQ0B,IAChC,GAAGhC,EAAE4F,GAAG7C,KAAK,KAAKa,QAAQ3B,QAAUjC,EAAE8B,EAAUE,IAAIC,OAAO,CACvDF,EAAiBC,CACjB,OAGRtB,EAAU,cAAcqB,EAAe,IACvCkC,OAAOC,SAAWP","file":"../../js/Home/user.min.js","sourcesContent":["/**\n * Created by lixiongfeng on 16/8/10.\n */\n$(document).ready(function(){\n    $(\"#img-verify-email\").click(function(){\n        var verifyimg = $(\"#img-verify-email\").attr(\"src\");\n        if( verifyimg.indexOf('?')>0){\n            $(this).attr(\"src\", verifyimg+'&random='+Math.random());\n        }else{\n            $(this).attr(\"src\", verifyimg.replace(/\\?.*$/,'')+'?'+Math.random());\n        }\n    });\n\n    // --- 隐藏所有\n    function HideAll() {\n        var items = $(\".submenu\");\n        for (var j=0; j<items.length; j++) {\n            //items[j].style.display = \"none\";\n            $(items[j]).parent().removeClass(\"open\");\n            $(items[j]).css(\"display\",\"none\");\n        }\n    }\n\n    // --- 设置cookie\n    function setCookie(sName,sValue,expireHours) {\n        var cookieString = sName + \"=\" + encodeURI(sValue);\n        //;判断是否设置过期时间\n        if (expireHours>0) {\n            var date = new Date();\n            date.setTime(date.getTime() + expireHours * 3600 * 1000);\n            cookieString = cookieString + \";expire=\" + date.toGMTString();\n        }\n        cookieString += \";path=/\";\n        //console.log(\"cookie=\"+cookieString);\n        //var allCookie = document.cookie;\n        //console.log(\"before setCookie,all cookie=\"+allCookie);\n        document.cookie = cookieString;\n    }\n\n    //--- 获取cookie\n    function getCookie(sName) {\n        //var aCookie = document.cookie.split(\";\");\n        var allCookie = document.cookie;\n        var aCookie = $.trim(allCookie);\n        //为什么需要一个空格？\n        aCookie = aCookie.split(\"; \");\n        //console.log(\"getCookie all cookie=\"+allCookie+\",aCookie length=\"+ aCookie.length);\n        //console.log(\"getCookie=\"+aCookie);\n        for (var j=0; j < aCookie.length; j++){\n            var aCrumb = aCookie[j].split(\"=\");\n            if (sName == aCrumb[0])\n                return decodeURI(aCrumb[1]);\n        }\n        return null;\n    }\n\n    function delCookie(name) {\n        var exp = new Date();\n        exp.setTime(exp.getTime() - 1);\n        var cval=getCookie(name);\n        if(cval!=null)\n            document.cookie= name + \"=\"+cval+\";expires=\"+exp.toGMTString()+\";path=/\";\n    }\n\n\n    var Accordion = function(el, multiple) {\n        this.el = el || {};\n        this.multiple = multiple || false;\n\n        // Variables privadas\n        var links = this.el.find('.link');\n        // Evento\n        links.on('click', {el: this.el, multiple: this.multiple}, this.dropdown);\n   };\n\n    Accordion.prototype.dropdown = function(e) {\n        var $el = e.data.el;\n        $this = $(this),\n            $next = $this.next();\n\n        $next.slideToggle();\n        $this.parent().toggleClass('open');\n\n        if (!e.data.multiple) {\n            $el.find('.submenu').not($next).slideUp().parent().removeClass('open');\n        }else{\n            var url = $el.find(\"a\").first().attr(\"href\");\n            console.log(\"url=\"+url);\n        }\n    };\n\n    //var accordion = new Accordion($('#accordion'), false);\n\n    function setActiveItem(){\n        var all_a_obj = $(\".submenu a\");\n        var active_a_index = getCookie(\"active_item\");\n        for(var i = 0;i < all_a_obj.length; i++){\n            if($(all_a_obj[active_a_index]).html() == $(all_a_obj[i]).html()){\n                $(all_a_obj[active_a_index]).addClass(\"active\");\n                break;\n            }\n        }\n    }\n    //订单详情\n    $(\".order-details\").on(\"click\",function(){\n        var url = $(this).attr(\"data-jump\");\n        window.location = url;\n    });\n\n    //重新绑定手机或邮箱\n    $(\"#to-rebinding-mobile,#to-rebinding-email\").on(\"click\",function(event){\n        event.preventDefault();\n        //var active_obj = $(\".submenu a.active\");\n        var all_a_obj = $(\".submenu a\");\n        var active_a_index = 0;\n        for(var i = 0;i < all_a_obj.length; i++){\n            if($(\".submenu .active\").html() == $(all_a_obj[i]).html()){\n                active_a_index = i+1;\n                break;\n            }\n        }\n        console.log(\"active index=\"+active_a_index);\n        setCookie(\"active_item\",active_a_index,24);\n        //$(this).addClass(\"active\");\n        var url = $(this).attr(\"data-jump\");\n        window.location = url;\n    });\n\n    //获取手机验证码\n    $(\"#binding-mobile\").on(\"click\",function(event){\n        var this_obj = \"#binding-mobile\";\n        event.preventDefault();\n        var mobile_number = $(\"#\"+$(this).attr(\"name\")).val();\n        if(mobile_number == \"\" || mobile_number == undefined){\n            alert(\"手机号不能为空\");\n            return;\n        }\n        $.ajax({\n            url:$(this).attr(\"data-href\"),\n            method:\"post\",\n            dataType:\"json\",\n            data:{\n                mobile:$(\"#\"+$(this).attr(\"name\")).val()\n            },\n            success:function(jsonData){\n                if(jsonData.flag == 1){\n                    alert(jsonData.msg);\n                }else{\n                    alert(jsonData.msg);\n                }\n            },\n            error:function(jsonData){\n                console.log(jsonData);\n            }\n        });\n        //var max_time = 60 * 1000;\n        var cur_time = 180;\n\n        $(this_obj).addClass(\"disabled\");\n        var timer = window.setInterval(function(){\n            if(cur_time <= 1){\n                $(this_obj).html(\"获取手机验证码\");\n                $(this_obj).removeClass(\"disabled\");\n                clearInterval(timer);\n                return;\n            }\n            console.log(\"time now=\"+cur_time);\n            cur_time--;\n            var html = cur_time + \"秒\";\n            $(this_obj).html(html);\n        },1000);\n    });\n\n    //click event\n    $(\".submenu a\").on(\"click\",function(){\n        var all_a_obj = $(\".submenu a\");\n        var active_a_index = 0;\n        for(var i = 0;i < all_a_obj.length; i++){\n            if($(this).html() == $(all_a_obj[i]).html()){\n                active_a_index = i;\n                break;\n            }\n        }\n        console.log(\"active index=\"+active_a_index);\n        setCookie(\"active_item\",active_a_index,24);\n        //设置活动URL\n        setCookie(\"last_url\",$(all_a_obj[active_a_index]).attr(\"href\"),24);\n        $(this).addClass(\"active\");\n    });\n\n    var last_url = getCookie(\"last_url\");\n    var SELF = $(\"#accordion\").attr(\"data-self\");\n    console.log(\"last_url=\"+last_url+\",SELF=\"+SELF);\n    //if(last_url != SELF && last_url != undefined){\n    //    window.location = last_url;\n    //    //delCookie(\"last_url\");\n    //    return;\n    //}\n\n    var show_item = \"opt_1\";\n    var opt_cookie = getCookie(\"show_item\");\n    console.log(\"opt_cookie=\"+opt_cookie);\n    if (opt_cookie != null || opt_cookie != undefined) {\n        show_item= \"opt_\" + opt_cookie;\n    }\n    //console.log(\"show_item=\"+show_item);\n    $(\"#\"+show_item).parent().addClass(\"open\");\n    $(\"#\"+show_item).css(\"display\",\"block\");\n\n    setActiveItem();\n\n    //document.getElementById(show_item).style.display = \"block\";\n    var items = $(\".link\"); //document.getElementsByClassName(\"title\");\n    for (var j=0; j<items.length; j++) {\n        items[j].onclick = function() {\n            var o = $(\"#opt_\"+$(this).attr(\"name\")); //document.getElementById(\"opt_\" + this.name);\n            if(!$(o).parent().hasClass(\"open\")){\n                HideAll();\n                $(o).parent().addClass(\"open\");\n                $(o).css(\"display\",\"block\");\n                //delCookie(\"show_item\");\n                setCookie(\"show_item\",$(this).attr(\"name\"),24);\n                console.log(\"children=\"+$(o).children(\"li\").html());\n                $(o).children(\"li\").first().addClass(\"active\");\n                var url = $(o).find(\"a\").first().attr(\"href\");\n                var all_a_obj = $(\".submenu a\");\n                var active_a_index = 0;\n                for(var i = 0;i < all_a_obj.length; i++){\n                    if($(o).find(\"a\").first().html() == $(all_a_obj[i]).html()){\n                        active_a_index = i;\n                        break;\n                    }\n                }\n                setCookie(\"active_item\",active_a_index,24);\n                window.location = url;\n            }else{\n                $(o).parent().removeClass(\"open\");\n                $(o).css(\"display\",\"none\");\n                $(o).children(\"li\").removeClass(\"active\");\n            }\n            //if (o.style.display != \"block\") {\n            //    HideAll();\n            //    o.style.display = \"block\";\n            //    setCookie(\"show_item\",this.name);\n            //}\n            //else {\n            //    o.style.display = \"none\";\n            //}\n        }\n    }\n});"]}