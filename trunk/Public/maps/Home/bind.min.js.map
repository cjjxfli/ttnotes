{"version":3,"sources":["Home/bind.min.js"],"names":["$","document","ready","on","event","preventDefault","ajax","url","this","attr","method","dataType","data","email","val","success","jsonData","flag","alert","msg","error","console","log","jQuery","validator","addMethod","value","element","hasClass","reg0","reg1","reg2","reg3","my","test","optional","myreg","chrnum","length","validate","rules","user_email","isNeedEmail","verify_email_code","isNeedEmailCode","mobile","isNeedMobile","verify_mobile_code","isNeedMobileCode","messages","submitHandler","form","type","user_mobile","user_mobile_verify","window","location","reload","errorContainer","errorLabelContainer","wrapper","errorPlacement","appendTo","parent"],"mappings":"AAGAA,EAAEC,UAAUC,MAAM,WACdF,EAAE,kBAAkBG,GAAG,QAAQ,SAASC,GACpCA,EAAMC,iBACNL,EAAEM,MACEC,IAAIP,EAAEQ,MAAMC,KAAK,aACjBC,OAAO,OACPC,SAAS,OACTC,MACIC,MAAMb,EAAE,sBAAsBc,OAElCC,QAAQ,SAASC,GACO,GAAjBA,EAASC,KACRC,MAAMF,EAASG,KAEfD,MAAMF,EAASG,MAGvBC,MAAM,SAASJ,GACXK,QAAQC,IAAIN,QAKxBO,OAAOC,UAAUC,UAAU,eAAe,SAASC,EAAOC,GACtD,GAAI3B,EAAE,mCAAmC4B,SAAS,YAa9C,OAAO,CAZP,IAAIC,GAAO,cACPC,EAAO,cACPC,EAAO,eACPC,EAAO,eACPC,GAAK,CAKT,OAJIJ,GAAKK,KAAKR,KAAOO,GAAG,GACpBH,EAAKI,KAAKR,KAAOO,GAAG,GACpBF,EAAKG,KAAKR,KAAOO,GAAG,GACpBD,EAAKE,KAAKR,KAAOO,GAAG,KACd,IAAPP,IAAeO,KACXzB,KAAK2B,SAASR,KAAY,IAIvC,mBAEFJ,OAAOC,UAAUC,UAAU,cAAc,SAASC,EAAOC,GACrD,IAAI3B,EAAE,uCAAuC4B,SAAS,YAAY,CAC9D,GAAIQ,GAAQ,2EACZ,SAAW,IAARV,IAAgBU,EAAMF,KAAKR,MAIvBlB,KAAK2B,SAASR,KAAY,GAErC,OAAO,GACT,cAEFJ,OAAOC,UAAUC,UAAU,mBAAmB,SAASC,EAAOC,GAC1D,GAAI3B,EAAE,mCAAmC4B,SAAS,YAI9C,OAAO,CAHP,IAAIS,GAAS,kBACb,OAAO7B,MAAK2B,SAASR,IAAaU,EAAOH,KAAKR,IAA0B,GAAhBA,EAAMY,UAIpE,cAEFf,OAAOC,UAAUC,UAAU,kBAAkB,SAASC,EAAOC,GACzD,IAAI3B,EAAE,uCAAuC4B,SAAS,YAAY,CAC9D,GAAIS,GAAS,kBACb,OAAO7B,MAAK2B,SAASR,IAAaU,EAAOH,KAAKR,IAA0B,GAAhBA,EAAMY,SAElE,OAAO,GACT,cAGFtC,EAAE,cAAcuC,UACZC,OACIC,YACIC,aAAY,GAEhBC,mBACIC,iBAAgB,GAEpBC,QACIC,cAAa,GAEjBC,oBACIC,kBAAiB,IAGzBC,YAEAC,cAAc,SAASC,GACnBnD,EAAEM,MACEC,IAAIP,EAAE,cAAcS,KAAK,UACzB2C,KAAK,OACLzC,SAAS,OACTC,MACIyC,YAAYrD,EAAE,WAAWc,MACzBwC,mBAAmBtD,EAAE,uBAAuBc,MAC5C2B,WAAWzC,EAAE,sBAAsBc,MACnC6B,kBAAkB3C,EAAE,sBAAsBc,OAE9CC,QAAQ,SAASC,GACO,GAAjBA,EAASC,KACRsC,OAAOC,SAASC,SAEhBvC,MAAMF,EAASG,MAGvBC,MAAM,SAASJ,GACXE,MAAMF,OAIlB0C,eAAgB,YAChBC,oBAAqB3D,EAAE,wBACvB4D,QAAS,KACTC,eAAgB,SAASzC,EAAOO,GAC5BP,EAAM0C,SAASnC,EAAQoC","file":"../../js/Home/bind.min.js","sourcesContent":["/**\r\n * Created by xfli on 2017/3/25.\r\n */\r\n$(document).ready(function(){\r\n    $(\"#binding-email\").on(\"click\",function(event){\r\n        event.preventDefault();\r\n        $.ajax({\r\n            url:$(this).attr(\"data-href\"),\r\n            method:\"post\",\r\n            dataType:\"json\",\r\n            data:{\r\n                email:$(\"#binding-email-txt\").val()\r\n            },\r\n            success:function(jsonData){\r\n                if(jsonData.flag == 1){\r\n                    alert(jsonData.msg);\r\n                }else{\r\n                    alert(jsonData.msg);\r\n                }\r\n            },\r\n            error:function(jsonData){\r\n                console.log(jsonData);\r\n            }\r\n        });\r\n    });\r\n\r\n    jQuery.validator.addMethod(\"isNeedMobile\",function(value, element){\r\n        if(!$(\"input[type=text][name='mobile']\").hasClass(\"disabled\")){\r\n            var reg0 = /^13\\d{5,9}$/;\r\n            var reg1 = /^15\\d{5,9}$/;\r\n            var reg2 = /^189\\d{4,8}$/;\r\n            var reg3 = /^0\\d{10,11}$/;\r\n            var my = false;\r\n            if (reg0.test(value))my=true;\r\n            if (reg1.test(value))my=true;\r\n            if (reg2.test(value))my=true;\r\n            if (reg3.test(value))my=true;\r\n            if(value!=''){if(!my){return false;}};\r\n            return this.optional(element) || true;\r\n        }else{\r\n            return true;\r\n        }\r\n    },\"请输入合法的手机号和手机验证码\");\r\n\r\n    jQuery.validator.addMethod(\"isNeedEmail\",function(value, element){\r\n        if(!$(\"input[type=text][name='user_email']\").hasClass(\"disabled\")){\r\n            var myreg = /^[_a-zA-Z0-9\\-]+(\\.[_a-zA-Z0-9\\-]*)*@[a-zA-Z0-9\\-]+([\\.][a-zA-Z0-9\\-]+)+$/;\r\n            if(value !=''){if(!myreg.test(value)) {\r\n                return false;\r\n            }\r\n            };\r\n            return this.optional(element) || true;\r\n        }\r\n        return true;\r\n    },\"请输入合法的邮箱地址\");\r\n\r\n    jQuery.validator.addMethod(\"isNeedMobileCode\",function(value, element){\r\n        if(!$(\"input[type=text][name='mobile']\").hasClass(\"disabled\")){\r\n            var chrnum = /^([a-zA-Z0-9]+)$/;\r\n            return this.optional(element) || (chrnum.test(value) || value.length()!=4);\r\n        }else{\r\n            return true;\r\n        }\r\n    },\"请输入4位手机验证码\");\r\n\r\n    jQuery.validator.addMethod(\"isNeedEmailCode\",function(value, element){\r\n        if(!$(\"input[type=text][name='user_email']\").hasClass(\"disabled\")){\r\n            var chrnum = /^([a-zA-Z0-9]+)$/;\r\n            return this.optional(element) || (chrnum.test(value) || value.length()!=6);\r\n        }\r\n        return true;\r\n    },\"请输入6位邮箱验证码\");\r\n\r\n    //提交表单\r\n    $(\"#bind-form\").validate({\r\n        rules:{\r\n            user_email:{\r\n                isNeedEmail:true,\r\n            },\r\n            verify_email_code:{\r\n                isNeedEmailCode:true,\r\n            },\r\n            mobile:{\r\n                isNeedMobile:true,\r\n            },\r\n            verify_mobile_code:{\r\n                isNeedMobileCode:true,\r\n            },\r\n        },\r\n        messages:{\r\n        },\r\n        submitHandler:function(form){\r\n            $.ajax({\r\n                url:$(\"#bind-form\").attr(\"action\"),\r\n                type:\"post\",\r\n                dataType:\"json\",\r\n                data:{\r\n                    user_mobile:$(\"#mobile\").val(),\r\n                    user_mobile_verify:$(\"#verify-mobile-code\").val(),\r\n                    user_email:$(\"#binding-email-txt\").val(),\r\n                    verify_email_code:$(\"#verify-email-code\").val(),\r\n                },\r\n                success:function(jsonData){\r\n                    if(jsonData.flag == 1){\r\n                        window.location.reload();\r\n                    }else{\r\n                        alert(jsonData.msg);\r\n                    }\r\n                },\r\n                error:function(jsonData){\r\n                    alert(jsonData);\r\n                }\r\n            });\r\n        },\r\n        errorContainer: \"div.error\",\r\n        errorLabelContainer: $(\"#bind-form div.error\"),\r\n        wrapper: \"li\",\r\n        errorPlacement: function(error, element) {\r\n            error.appendTo(element.parent());\r\n        }\r\n    });\r\n});"]}