define("system-core:data/faceData.js",function(t,e,i){var n={},o={};n["interface"]=[],n.button={},n.fileIcon={},n.contextMenu={file:[],blank:[],share:[]},n.checkButtonType=function(t,e){if(void 0===n.button[t])throw new Error("[Plugin declare error] [Button Plugin]: The buttons/position of "+e+' is must be "aside-bottom" or "aside-middle" or "tools" or "listTools" or "list" !')},o.pushInterfacePosition=function(t,e){var i=e;i.pluginId=t,n["interface"].push(i)},o.pushButtonFuntion=function(t,e,i){var o=e;if(o.length)for(var s=0,a=o.length;a>s;s++){o[s].pluginId=t;var r=o[s].position;n.button[r]&&(i&&(o[s].filesType=i.replace(/\*\.|\./g,"")),n.button[r].push(o[s]),o[s].buttonPosition=o[s].position,delete o[s].position)}else if("object"==typeof o){var r=o.position;n.button[r]&&(i&&(o.filesType=i.replace(/\*\.|\./g,""),o.filesType=i.replace(/\*\.|\./g,"")),n.button[r].push(o),o.buttonPosition=o[s].position,delete o.position)}},o.pushFileHandle=function(t,e){if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&"undefined"==typeof n.fileIcon[i]&&(n.fileIcon[i]=e[i])},o.pushContextMenu=function(t,e){var i=function(e){e.pluginId=t,"object"==typeof e&&"undefined"==typeof e.length?"string"==typeof e.title&&("file"===e.type?(delete e.type,n.contextMenu.file.push(e)):(delete e.type,n.contextMenu.blank.push(e)),"share"===e.product&&(delete e.product,n.contextMenu.share.push(e))):e.length&&("undefined"!=typeof e[0].index&&(e.index=e[0].index),"file"===e[0].type?(delete e[0].type,n.contextMenu.file.push(e)):(delete e[0].type,n.contextMenu.blank.push(e)))};if("object"==typeof e&&"undefined"==typeof e.length)i(e);else if(e.length)if(1===e.length&&"string"==typeof e[0].title)i(e);else for(var o=0,s=e.length;s>o;o++)i(e[o])},o.setButtonContainer=function(t){if(t&&t.length){n.button={};for(var e=0,i=t.length;i>e;e++)n.button[t[e]]=[]}},o.getData=function(){return{"interface":n["interface"],button:n.button,getButton:function(t){return"string"==typeof t&&n.button[t]?n.button[t]:[]},buttonMap:n.buttonMap,fileIcon:n.fileIcon,contextMenu:n.contextMenu}},i.exports=o}),define("system-core:data/regedit.js",function(t,e,i){var n=function(t){var e=t.constructor===Array?[]:{};for(var i in t)t.hasOwnProperty(i)&&(e[i]="object"==typeof t[i]?n(t[i]):t[i]);return e},o={},s={};o.nameHash={},o.otherInfo={},o.fileHandle={},o.defaultFileHandle={},o.plugin={},o.preload=[],o.autoExecute=[],o.randomID=function(){var t=String.fromCharCode(o.prefix++);return o.prefix>90&&(o.prefix=65),t+=Math.random().toString(16).substring(3).toUpperCase()},o.prefix=65,o.handleFile=function(t,e,i){if("undefined"==typeof i)return void(o.fileHandle._?o.fileHandle._.push(t):o.fileHandle._=[t]);if("string"==typeof i){if("*"===i)return void(o.fileHandle["*"]?o.fileHandle["*"].push(t):o.fileHandle["*"]=[t]);i=i.replace(/\"|\.|\*/g,"").split(",")}if("object"==typeof i&&i.length)for(var n=0,s=i.length;s>n;n++)o.fileHandle[i[n]]?o.fileHandle[i[n]].push(t):o.fileHandle[i[n]]=[t],2!=e||o.defaultFileHandle[i[n]]||(o.defaultFileHandle[i[n]]=t)},o.getPluginIdsByExtension=function(t){if("object"==typeof t&&t.length&&"undefined"!=typeof o.fileHandle[t[0]]){for(var e=o.fileHandle[t[0]],i=e.length,s=1,a=t.length;a>s;s++){if("undefined"==typeof o.fileHandle[t[s]]){e=null;break}o.fileHandle[t[s]].length<i&&(e=o.fileHandle[t[s]],i=i.length)}if(e){e=n(e);for(var r=0,l=e.length;l>r;r++)for(var h=0,c=t.length;c>h;h++){var u=o.plugin;if(-1===u[e[r]].filesType.indexOf(t[h])||-1===u[e[r]].type.indexOf("2")){e.splice(r,1),--r,l=e.length;break}}}return e}return null},o.getPluginsByIds=function(t){var e=[];if("object"==typeof t&&t.length)for(var i=0,n=t.length;n>i;i++)e.push(o.plugin[t[i]]);return e},s.register=function(t,e){var i=o.randomID(),n=t.name,s=t.group;if("string"!=typeof s||"string"!=typeof n)throw"[PLUGIN REGISTER ERROR] `name` and `group` for plugin "+n+" is nessary!";return o.nameHash[s]=o.nameHash[s]||{},o.nameHash[s][n]=i,o.plugin[i]={pluginId:i,name:n,loaded:!1,type:t.type,filesType:t.filesType,entranceFile:t.entranceFile},o.otherInfo[i]={group:s,depsFiles:t.depsFiles,description:t.description,version:t.version,supportManage:t.supportManage!==!1&&"false"!==t.supportManage},e?void 0:(o.handleFile(i,t.type,t.filesType),t.preload===!0&&o.preload.push(t),t.autoExecute===!0&&o.autoExecute.push(t),i)},s.getAllPlugins=function(){var t=[];for(var e in o.plugin)o.plugin.hasOwnProperty(e)&&t.push(o.plugin[e]);return t},s.getPluginById=function(t){return void 0===o.plugin[t]?null:o.plugin[t]},s.getPluginByNameAndGroup=function(t,e){var i;if("string"!=typeof t)throw new Error("[regedit.js] The plugin name is must be a string !");var n=t.match(/^(.+)\@(([\w\-]+\.)+[\w\-]+)$/);return void 0===e&&n&&(t=n[1],e=n[2]),i=o.nameHash[e]&&o.nameHash[e][t],this.getPluginById(i)},s.getPluginsByExtension=function(t){var e=o.fileHandle["*"];"string"==typeof t&&(t=t.replace(/\"|\.|\*/g,"").split(","));for(var i=o.getPluginIdsByExtension(t),n=[],s=0,a=e.length;a>s;s++)-1!==o.plugin[e[s]].type.indexOf("2")&&n.push(e[s]);return null!==i&&(n=n.concat(i)),o.getPluginsByIds(n)},s.getDefaultPluginIdByExtension=function(t){return t=t.replace(/\"|\.|\*/g,""),o.defaultFileHandle[t]?o.defaultFileHandle[t]:o.fileHandle[t]&&o.fileHandle[t][0]},s.getOtherInfoById=function(t){return void 0===o.otherInfo[t]?null:o.otherInfo[t]},s.getAutoExecutePlugins=function(){return o.autoExecute},s.getPreloadPlugins=function(){return o.preload},i.exports=s}),define("system-core:pluginControl/loader/loader.js",function(t,e,i){var n=!1,o=t("system-core:context/context.js"),s=t("system-core:data/regedit.js"),a=t("base:widget/libs/underscore.js"),r=t("system-core:system/baseService/message/message.js"),l={},h={};l.pluginContextMap={},l.loadDepsFilesAndEntranceFile=function(e,i){var n,o=[],r=[],l=function(){t.async(e.entranceFile,function(t){e.loaded=!0,a.isFunction(i)===!0&&i(t)})};if(e.loaded===!0)l();else{if(n=s.getOtherInfoById(e.pluginId).depsFiles,""===n||void 0===n)return void l();if("string"==typeof n)/ ^ . + \.(css | less) $ /.test(n)===!0?o.push(n):/^.+\.js$/.test(n)===!0&&r.push(n);else if("object"==typeof n&&n.length)for(var h=0,c=n.length;c>h;h++)/ ^ . + \.(css | less) $ /.test(n[h])===!0?o.push(n[h]):/^.+\.js$/.test(n[h])===!0&&r.push(n[h]);0===o.length&&0===r.length?l():0!==o.length&&0===r.length?t.loadCss(o,function(){l()}):0===o.length&&0!==r.length?t.async(r,function(){l()}):0!==o.length&&0!==r.length&&t.loadCss(o,function(){t.async(r,function(){l()})})}},l.loadPlugin=function(t,e){l.loadDepsFilesAndEntranceFile(t,function(i){var n;if(l.pluginContextMap[t.pluginId]?n=l.pluginContextMap[t.pluginId]:(n=new o,l.pluginContextMap[t.pluginId]=n),e&&e.run&&i[e.run]){var s=e.run;delete e.run,i[s]&&i[s].call(void 0,n,e,t)}else i.start&&i.start.call(void 0,n,e,t)})},l.initAutoExcutePlugins=function(){for(var t=s.getAutoExecutePlugins(),e=0,i=t.length;i>e;e++)l.loadPlugin(t[e])},l.initPreloadPlugins=function(){for(var t=s.getPreloadPlugins(),e=0,i=t.length;i>e;e++)l.loadDepsFilesAndEntranceFile(t[e])},l.init=function(t){t&&t.canAutoExecute!==!1&&(l.initAutoExcutePlugins(),setTimeout(function(){l.initPreloadPlugins()},1e3))},r.manage(function(t,e){var i,o,a;"string"==typeof t&&t.match(/^plugin\:[A-Z0-9]+$/)?(i=t.match(/^plugin\:([A-Z0-9]+)$/),null!==i&&(i=i[1],o=s.getPluginById(i),n&&console.log("[PLUGIN LOADER ERROR] can not find plugin for the id `"+i+"`"))):"string"==typeof t&&t.match(/^plugin\:.+\@([\w\-]+\.)+[\w\-]+$/)&&(a=t.match(/^plugin\:(.+)$/),null!==a&&(a=a[1],o=s.getPluginByNameAndGroup(a),n&&console.log("[PLUGIN LOADER ERROR] can not find plugin for the name `"+a+"`"))),o&&l.loadPlugin(o,e)}),r.listen("manage-plugin",function(){t.async("system-core:pluginControl/manage/manage.js",function(t){t.show()})}),h.init=function(t){l.init(t||{})},i.exports=h}),define("system-core:pluginControl/register/register.js",function(t,e,i){var n=t("system-core:data/faceData.js"),o=t("system-core:data/regedit.js"),s=t("base:widget/storage/storage.js"),a=t("base:widget/tools/tools.js"),r=window.manifest,l={},h={};l.conf={},l.browser=function(){return a.client().browserString}(),l.initInterfacePosition=function(t){n.pushInterfacePosition(t.pluginId,t["interface"])},l.initButtonFuntion=function(t){var e=t.buttons;if(!e)throw new Error("[Plugin declare error] [Button Plugin]: The buttons of "+t.name+" is must !");if("object"!=typeof e&&$.isArray(e)===!1)throw new Error("[Plugin declare error] [Button Plugin]: The buttons of "+t.name+" must be an object or array !");n.pushButtonFuntion(t.pluginId,t.buttons,t.filesType,t)},l.initFileHandle=function(t){if(t.filesIcon){var e=t.filesIcon;if("object"!=typeof e)throw new Error("[Plugin declare error] [FileHandle Plugin]: The filesIcon of "+t.name+" must be an object !")}n.pushFileHandle(t.pluginId,t.filesIcon)},l.initContextMenu=function(t){n.pushContextMenu(t.pluginId,t.contextMenu)},l.initEmptyPlugin=function(){},l.checkUtil=function(){var t={};return t.checkName=function(t){if(!t)throw new Error("[Plugin declare error]: The name of plugin is must !");if("string"!=typeof t)throw new Error("[Plugin declare error]: The name of plugin must be a string !")},t.checkType=function(t){var e=t.type;if("undefined"==typeof e||null===e)throw new Error("[Plugin declare error]: The type of plugin is must !");if("string"!=typeof e&&"number"!=typeof e&&("object"!=typeof e||void 0===e.length))throw new Error("[Plugin declare error]: The type of ` "+t.name+" must be an string or array !")},t.checkEntanceFile=function(t){var e=t.entranceFile;if(!e)throw new Error("[Plugin declare error]: The entranceFile of "+t.name+" is must !");if("string"!=typeof e)throw new Error("[Plugin declare error]: The entranceFile of "+t.name+" must be a string !")},t.checkVersion=function(t){var e=/^\d{1,2}\.\d{1,2}$/,i=/^\d{1,2}\.\d{1,2}\.\d{1,2}$/,n=t.version;if(e.test(n)!==!0&&i.test(n)!==!0)throw new Error("[Plugin declare error]: The version of ` "+t.name+" must like 88.88 or 88.88.88 !")},t.checkBoolean=function(t,e){if("boolean"!=typeof t[e])throw new Error("[Plugin declare error]: The "+e+" of ` "+t.name+" must be a boolean !")},t}(),l.initPlugin=function(e){if(e){var i=l.checkUtil;if(s){var n=s.getItem("pan_plugin_cursor");if(n===e.cursor)return}for(var a=0,r=e.length;r>a;a++){var h=e[a];if(i.checkName(h.name),i.checkType(h),"string"==typeof h.notSupport){var c=l.browser.match(/[a-zA-Z]+/);if(c&&(c=new RegExp("(^|,)"+c[0]+"(,|$)")),-1!==h.notSupport.indexOf(l.browser)||c.test(h.notSupport))continue}h.version&&i.checkVersion(h),h.preload&&i.checkBoolean(h,"preload"),h.autoExecute&&i.checkBoolean(h,"autoExecute");var u=!1;if("false"===s.getItem("plugin-"+h.name+"-"+h.group)&&(u=!0),/^\-\d$/.test(h.type)===!1){var d=o.register(h,u);h.pluginId=d}if(!u){var g="string"==typeof h.type?h.type.split(","):h.type;if(g.length)for(var f=0,m=g.length;m>f;f++){var p=+g[f];switch(p){case 0:l.initInterfacePosition(h);break;case 1:l.initButtonFuntion(h);break;case-2:case 2:l.initFileHandle(h);break;case 3:l.initEmptyPlugin(h);break;default:throw new Error("[register] The manifest.json of plugin must has type!")}}"object"==typeof h.contextMenu&&l.initContextMenu(h)}}t.async("system-core:pluginControl/loader/loader.js",function(t){t.init(l.conf)})}},h={setButtonContainer:function(t){t&&t.length&&n.setButtonContainer(t)},getFaceData:function(){return n.getData()},getPluginData:function(){return o},init:function(t){l.conf=t||{},l.initPlugin(r)}},i.exports=h}),define("system-core:pluginControl/manage/manage.js",function(t,e,i){var n=(t("system-core:data/faceData.js"),t("system-core:data/regedit.js")),o=t("base:widget/libs/jquerypacket.js"),s=t("base:widget/storage/storage.js"),a=(t("base:widget/tools/tools.js"),t("system-core:context/context.js").instanceForSystem),r={config:{dialog:null},node:{},templ:{},uiEvent:function(){r.config.dialog.delegate(".operate","click",function(){var t=o(this).siblings(".title").data("name"),e=o(this).siblings(".title").data("group");o(this).hasClass("enable")?(s.setItem("plugin-"+t+"-"+e,"false"),o(this).closest(".one-plugin").addClass("enable-false"),o(this).removeClass("enable").addClass("disable").text("启用")):(s.removeItem("plugin-"+t+"-"+e),o(this).closest(".one-plugin").removeClass("enable-false"),o(this).removeClass("disable").addClass("enable").text("禁用"))})},util:{getPluginInfo:function(){var t=n.getAllPlugins();return t},storeStorage:function(){},getContent:function(){for(var t='<div class="attention">注意：设置后刷新浏览器起效</div><ul class="all-plugins">',e=r.util.getPluginInfo(),i=0,o=e.length;o>i;i++){var a=n.getOtherInfoById(e[i].pluginId);if(a.supportManage!==!1){var l=!0;"false"===s.getItem("plugin-"+e[i].name+"-"+a.group)&&(l=!1),t+='<li class="one-plugin enable-'+l+'">',t+='<div class="title" data-group="'+a.group+'" data-name="'+e[i].name+'">'+e[i].name+"</div>",t+='<div class="desc">'+a.description+"</div>",t+=l?'<a class="operate enable" href="javascript:;">禁用</a>':'<a class="operate disable" href="javascript:;">启用</a>',t+="</li>"}}return t+="</ul>"},initData:function(){r.config.dialog=a.ui.window({id:"plugin-manage",title:"插件管理器",width:600,height:"60%",body:r.util.getContent()})}},init:function(){this.util.initData(),this.uiEvent()}},l={show:function(){r.config.dialog.show()},hide:function(){r.config.dialog.hide()}};r.init(),i.exports=l}),define("system-core:system/baseService/message/message.js",function(t,e,i){var n=t("base:widget/libs/underscore.js"),o="quota-change",s=function(){this.events={}};s.prototype={constructor:s,_define:function(t){"string"==typeof t&&(this.exist(t)||(this.events[t]={handlers:[]}))},exist:function(t){return!!this.events[t]},listen:function(t,e){if("string"!=typeof t)throw new Error("[message] The eventName must be a string !");this.exist(t)||this._define(t),"function"==typeof e&&this.events[t].handlers.push(e)},remove:function(t){this.exist(t)&&(this.events[t].handlers=[])},trigger:function(){var t=/^plugin\:.+$/;return function(e){if(t.test(e)===!0)return void s.doPlugins(e);if(this.exist(e)===!1)return void s.doPlugins(arguments);for(var i=this.events[e].handlers,n=[].slice.call(arguments,1),o=0,a=i.length;a>o;o++)i[o].apply(void 0,n)}}(),callPlugin:function(t,e){if("string"!=typeof t)throw new Error("[message] The pluginName must be a string !");s.trigger("plugin:"+t,e)},callSystem:function(t,e){if("string"!=typeof t)throw new Error("[message] The systemServiceName must be a string !");s.trigger(t,e)},listenSystem:function(t,e){if("string"!=typeof t||-1===o.indexOf(t))throw new Error("[message] Permission denied or the event name is error!");s.listen(t,e)}},n.extend(s,s.prototype,{events:{},pluginHandlers:[],checkFormatKey:function(t){var e,i;if(/_/g.test(t)===!0)throw new Error('[message.define] the key should not use "_"');if(/-/g.test(t)===!1)throw new Error('[message.define] the key should use "moduleName-method[-method[-method]]"');if(e=t.split("-"),i=e.shift(),/^[a-zA-Z]+$/.test(i)===!1)throw new Error('[message.define] the key should use "moduleName-method[-method[-method]]"');for(var n=0,o=e.length;o>n;n++)if(/^[a-z]+$/.test(e[n])===!1)throw new Error('[message.define] the key should use "moduleName-method[-method[-method]]"');return!0},doPlugins:function(t){var e=this.pluginHandlers;if(0!==e.length)for(var i=0,n=e.length;n>i;i++)e[i].apply(void 0,t)},trigger:function(t){if(this.exist(t)===!1)return void this.doPlugins(arguments);for(var e=this.events[t].handlers,i=[].slice.call(arguments,1),n=0,o=e.length;o>n;n++)e[n].apply(void 0,i)},manage:function(t){"function"==typeof t&&this.pluginHandlers.push(t)}}),i.exports=s}),define("system-core:system/uiService/log/log.js",function(require,exports,module){function Log(t){var t=t||{};this.url=t.url||"/api/analytics",this.logObjectName=t.logObjectName||"fe_log_",this.sendBaseParamTag=!0,this.baseParam={clienttype:0,vmode:null,searchForm:null},this.UrlLength=900,this.data=null,this.eventData={},this.ajaxData={},this.mixData={},this.init()}var $=require("base:widget/libs/jquerypacket.js"),tools=require("base:widget/tools/tools.js");Log.mid=1,Log.globalInit=0,Log.prototype={init:function(){var t=this;$(document).ajaxComplete(function(e,i,n){t._ajaxCallback(e,n,i)})},getParameter:function(t){var e=RegExp("[?&]"+t+"=([^&]*)").exec(window.location.hash);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},hasParameter:function(t){return-1!==window.location.hash.indexOf(t)},_addMid:function(t,e){return"[object object]"===Object.prototype.toString.call(t).toLowerCase()?(t.mid=e||1,t):"[object string]"===Object.prototype.toString.call(t).toLowerCase()?{name:t,mid:e||1}:void 0},_checkLogExist:function(t){if(t&&"[object object]"!==Object.prototype.toString.call(t).toLowerCase())throw new Error("[Log declare error]: The data of log must be a object !");if(t.name){var e=t.name||"";return!!this.mixData[e]}throw new Error("[Log declare error]: The name of log must !")},_checkData:function(t){if(t&&"[object object]"!==Object.prototype.toString.call(t).toLowerCase())throw new Error("[Log declare error]: The data of log must be a object !")},_sendServerLog:function(t){var e,i=t.url||this.url,n=(new Date).getTime(),o={};if(this.sendBaseParamTag)for(e in this.baseParam)o[e]="function"==typeof this.baseParam[e]?this.baseParam[e]():this.baseParam[e];var s={version:"v5"};for(e in t)"type"===e&&(t[e]=t[e].replace(/\-/g,"_")),"url"!==e&&(s[e]="function"==typeof t?t[e]():t[e]);for(var a=this._getRequestUrl(n,i,o,s),r=0,l=a.length;l>r;r++)this._request(n,r,a[r])},_request:function(t,e,i){var n=this.logObjectName+"_"+t+"_"+e;window[n]=new Image;var o=window[n];o.onload=o.onerror=function(){window[n]=null},o.src=i,o=null},_getRequestUrl:function(t,e,i,n){var o,s=[],a=[];if(i){i.vmode=this.getParameter("vmode"),i.searchForm=this.hasParameter("search/key");for(o in i)a.push(o+"="+i[o])}a=a.join("&"),a=""===a?"":"&"+a;var r=e+"?_lsid="+t+"&_lsix=1"+a,l=1;for(o in n)if("[object Array]"===Object.prototype.toString.apply(n[o])){for(var h=n[o],c=[],u=r.length+o.length+2,d=0,g=h.length;g>d;d++)u+=h[d].length+1,u>this.UrlLength?(s.push(r+"&"+o+"="+c.join()),l++,c=[],u=r.length+o.length+2,r=e+"?_lsid="+t+"&_lsix="+l+a,d--):c.push(h[d]);c.length>0&&(r+="&"+o+"="+c.join())}else r.length+o.length>this.UrlLength&&(s.push(r),l++,r=e+"?_lsid="+t+"&_lsix="+l+a),r+="&"+o+"="+n[o];return s.push(r),s},_ajaxCallback:function(e,conf,data){var $self=this,conf=conf||{},data=data||{},httpStatus,responseData={},url=conf.url,result={},time=0,sendServerLog=!1,endTime=(new Date).getTime(),configItem,value;for(var i in $self.ajaxData)if(url.indexOf(i)>-1){url=i;break}configItem=$self.ajaxData[url],configItem&&(httpStatus=data.status,"[object string]"===Object.prototype.toString.call(data.responseText).toLowerCase()?responseData=$.parseJSON(data.responseText)?$.parseJSON(data.responseText):eval("("+data.responseText+")"):"[object object]"===Object.prototype.toString.call(data.responseText).toLowerCase()&&(responseData=data.responseText),e.timeStamp&&endTime>e.timeStamp&&(time=endTime-e.timeStamp),configItem.callback&&(result=configItem.callback(conf,{httpStatus:httpStatus,responseData:responseData,time:time}),$self._sendLogData(configItem.logType,result)))},sendDpTimeLog:function(t){var t=t||{},e=t.name||"default",i={},n=window.alog||function(){};i["z_"+e]=t.value||"",n&&"[object function]"===Object.prototype.toString.call(n).toLowerCase()&&n("cus.fire","time",i)},sendDpDisLog:function(t){var t=t||{};"[object array]"!==Object.prototype.toString.call(t).toLowerCase()&&(t=[t]);for(var e=window.alog||function(){},i=0,n=t.length;n>i;i++){var o=t[i],s=o.name||"default",a={};a["z_"+s]=o.value||"",e("cus.fire","dis",a)}},sendBaiduLog:function(t,e){var t=t||{},i=window._hmt||[];if("object"==typeof i)if("[object string]"===Object.prototype.toString.call(t).toLowerCase())i.push(["_trackEvent",t,e?t+e:""]);else if("[object object]"===Object.prototype.toString.call(t).toLowerCase()&&"pageView"===t.name)i.push(["_trackPageview",t.value]);else if("[object array]"===Object.prototype.toString.call(t.value).toLowerCase()){var n=["_trackEvent",t.name];n.push(t.value[0]?t.name+"-"+t.value[0]:""),n.push(t.value[1]?t.name+"-"+t.value[1]:""),n.push(t.mid),i.push(n)}else if("[object object]"===Object.prototype.toString.call(t.value).toLowerCase()){var n=["_trackEvent",t.name],o=0,s=[];for(var a in t.value)t.value.hasOwnProperty(a)&&("name"!==a||"mid"!==a)&&2>o&&(o++,s.push(t.value[a]));null!=s[0]&&n.push(t.name+"-"+s[0])&&null!=s[1]&&n.push(t.name+"-"+s[0]+"-"+s[1]),n.push(t.mid),i.push(n)}else{var n=["_trackEvent",t.name];n.push(t.value?t.name+"-"+t.value:""),n.push("default"),n.push(t.mid),i.push(n)}},sendUserReport:function(t){var e="/api/report/user";$.ajax(e,{type:"POST",data:{timestamp:Math.round(new Date/1e3),action:tools.getParam("from")||t||"web_home"}})},_sendCountTypeLog:function(t){var t=t||{};if(t.sendServerLog!==!1){var e={type:t.name,url:t.url};if("[object array]"===Object.prototype.toString.call(t.value).toLowerCase())e.value=t.value[0];else if("[object object]"===Object.prototype.toString.call(t.value).toLowerCase())for(var i in t.value)!t.value.hasOwnProperty(i)||"name"===i&&"mid"===i||(e[i]=t.value[i]);else e.value=t.value;this._sendServerLog(e)}this.sendBaiduLog(t)},_sendLogData:function(t,e){var e=e||{},t=t||"count";"count"===t?this._sendCountTypeLog(e):"time"===t?this.sendDpTimeLog(e):"dis"===t&&this.sendDpDisLog(e)},_eventHandle:function(t){var e,i,n=this;this._checkData(t);for(var o in t)t.hasOwnProperty(o)&&(e=t[o],t[o].mid=++Log.mid,n.eventData[o]=e,i=e.parentDom||$("body"),i instanceof $?i=i:"string"==typeof i&&(i=$(i)),e.eventType||(e.eventType="click"),function(t){"click"===t.eventType?i.delegate(o,"mousedown",function(e){t.posX=e.clientX,t.posY=e.clientY}).delegate(o,"mouseup",function(e){if(t.posX===e.clientX&&t.posY===e.clientY&&t.callback){var i=t.callback(e,$);i=n._addMid(i,t.mid),n._sendLogData(t.logType,i)}}):i.delegate(o,t.eventType,function(e){if(t.callback){var i=t.callback(e,$);i=n._addMid(i,t.mid),n._sendLogData(t.logType,i)}})}(e))},arrjaxHandle:function(t){var e,i=this;this._checkData(t);for(var n in t)t.hasOwnProperty(n)&&(e=t[n],t[n].mid=++Log.mid,i.ajaxData[n]=e)},_mixHandle:function(t){var e,i=this;this._checkData(t);for(var n in t)t.hasOwnProperty(n)&&(e=t[n],t[n].mid=++Log.mid,i.mixData[n]=e)},initDataHandle:function(t,e){var i=this,t=t;"[object array]"!==Object.prototype.toString.call(t).toLowerCase()&&(t=[t]);for(var n=0,o=t.length;o>n;n++){var s=t[n];"global"===e&&1===Log.globalInit?i._mixHandle(s.mix):(i._eventHandle(s.event),i.arrjaxHandle(s.ajax),i._mixHandle(s.mix))}"global"===e&&(Log.globalInit=1)},send:function(t){if(t.type)this._sendServerLog(t);else if(this._checkLogExist(t)){var e=this._addMid(t,this.mixData[t.name].mid);this._sendLogData(this.mixData[t.name].logType,e)}},add:function(t){this.initDataHandle(t)},define:function(t,e){this.data||(this.data=t,this.initDataHandle(this.data,e))}},Log.instanceForSystem=new Log,window.logConfigs=window.logConfigs||[],window.logConfigs.push({mix:{apilistCache:{logType:"count",description:"apilist接口命中缓存"},apilistRequest:{logType:"count",description:"apilist接口请求次数"}}},{event:{},ajax:{},mix:{buttonBoxCreate:{logType:"time",description:"buttonBox从创建到展现的时间"},buttonClick:{logType:"count",description:"所有的按钮统计"}}},{event:{},ajax:{},mix:{buttonCreate:{logType:"time",description:"button从创建到展现的时间"},buttonHover:{logType:"time",description:"button状态变化的时间"}}},{mix:{listAllSel:{logType:"time",description:"列表全选响应时间统计"},listInitTime:{logType:"time",description:"列表初始化时间统计"},listScrollTime:{logType:"time",description:"列表滚动响应时间统计"},listAllSelCount:{logType:"count",description:"列表全选次数"}}},{event:{},ajax:{},mix:{tipShow:{logType:"time",description:"tip展现时间"}}}),window.logConfigs&&Log.instanceForSystem.define(window.logConfigs,"global"),module.exports=Log}),define("system-core:system/uiService/button/button.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/libs/underscore.js"),s=t("base:widget/tools/tools.js"),a=t("system-core:system/uiService/log/log.js").instanceForSystem,r=(s.client().browserString,function(t){r._length++,this.startTime=(new Date).getTime(),this.dom=null,this.width=0,this.height=0,this.container=null,this.menu={},this.menuLength=0,this.id="b"+r._length++,this.type=t.type||"default",this.config=t,this.config.buttonDefaultConfig=t.buttonDefaultConfig||{},this._init()});r._map={},r._length=0,r._secondMenuCallbacks={},r.getButton=function(t){return r._map["b"+t]?r._map["b"+t]:null},r.TPL=o.template('<a class="g-button<%- tips ? \' g-button-hastips\' : ""%>" data-button-id="<%- id %>" data-button-index="<%- index %>" href="<%- link %>" ><span class="g-button-right"><% if (typeof icon !== "undefined") { %><em class="icon <%- icon %>" title="<%- tips ? "" : title %>"></em><% } %><span class="text"><%- title %></span></span><% if (tips !== "") { %><span class="g-button-tips"><%- tips%></span><% } %></a>'),r.prototype={constructor:r,_init:function(){this._initUserEvent(),this._renderButton(),r._map[this.id]=this},_renderButton:function(){var t="javascript:void(0);";/^(\/|(https?\:\/\/)?(([a-zA-Z0-9]|[\.\-])+){1,3}(cn|com|co|io|gov|org|tv|hk|tw|me))\/?/i.test(this.config.link)&&(t=this.config.link);var e={title:this.config.title||"",icon:this.config.icon,id:this.id,index:this.config.index,link:t,tips:this.config.tips||""},i=r.TPL(e);if("dropdown"===this.type){var o='<span class="g-dropdown-button"></span>';if(this.dom=n(o),this.dom.append(i),this.dom.menu=n('<span class="menu"></span>'),this.dom.append(this.dom.menu),this.dom.mainButton=this.dom.find(".g-button"),"object"==typeof this.config.menu&&this.config.menu.length){var s=this._renderMenuList(this.config.menu);this.dom.menu.append(s)}}else this.dom=n(i),this.dom.mainButton=this.dom;var l=this._caulateClassName();this.dom.mainButton.addClass(l),this._initSizeAndPosition(),this._initDomEvent(),this.isShow=!0,this.isEnable=!0,"none"===this.config.display&&(this.dom[0].style.display="none",this.isShow=!1);var h=(new Date).getTime()-this.startTime;a.send({name:"buttonCreate",value:h})},_initSizeAndPosition:function(){"left"===this.config.position?this.dom.css("float","left"):"right"===this.config.position&&this.dom.css("float","right");var t=0,e=0;this.dom.mainButton.find(".text").width("undefined"!=typeof this.config.textWidth?this.config.textWidth:"auto"),"undefined"!=typeof this.config.iconMarginRight&&this.dom.mainButton.find(".icon").css("margin-right",this.config.iconMarginRight);var i=this.dom.mainButton;this.config.padding instanceof Array&&2===this.config.padding.length&&(t=this.config.padding[0],e=this.config.padding[1],i.css("padding-left",t),i.find(".g-button-right").css("padding-right",e)),"string"==typeof this.config.margin&&i.css("margin",this.config.margin)},_renderMenuOne:function(t){var e="b-menu"+this.menuLength++;this.menu[e]=t;var i="",n="",o="";if("none"===t.display&&(n=' style="display:none;"'),"function"==typeof t.display&&(o=t.display()),t.symLink&&t.symLink.config&&"dropdown"===t.symLink.config.type&&t.symLink.config.multiMenu){t.symLink.config.menuLevel=2;var s=new r(t.symLink.config);s.dom.addClass("g-dropdown-button-second"),s.dom.attr("menuLevel",2);var a=s.dom[0].outerHTML;return s.id&&t.symLink.config.menu&&(r._secondMenuCallbacks[s.id]=t.symLink.config.menu),a="<span"+n+' data-menu-id="'+e+'" class="g-button-menu g-menu-hasIcon">'+a+"</span>"}return"string"==typeof t.icon?(i='<em class="icon '+t.icon+'"></em>',"<a"+n+' data-menu-id="'+e+'" class="g-button-menu g-menu-hasIcon" href="javascript:void(0);">'+i+t.title+"</a>"):t.symLink&&t.symLink.config.buttonClass&&t.symLink.config.filesType?"<a"+n+' data-menu-id="'+e+'" data-excludetype="'+t.symLink.config.filesType+'"  class="g-button-menu '+t.symLink.config.buttonClass+'" href="javascript:void(0);">'+t.title+"</a>":t.symLink&&t.symLink.config.buttonClass&&t.symLink.config.excludeDirType?"<a"+n+' data-menu-id="'+e+'" data-excludedir="'+t.symLink.config.excludeDirType+'"  class="g-button-menu '+t.symLink.config.buttonClass+'" href="javascript:void(0);">'+t.title+"</a>":"<a "+n+' data-menu-id="'+e+'" class="g-button-menu '+o+'" href="javascript:void(0);">'+t.title+"</a>"},_renderMenuList:function(t,e){var i="";if("object"==typeof t){if(t.length)for(var o=0,s=t.length;s>o;o++)i+=this._renderMenuOne(t[o])}else i=this._renderMenuOne(t);return e&&n(e).html(i),i},_initDomEvent:function(){this.dom.undelegate();var t=this,e=(n(this.dom),function(e){var i=(new Date).getTime();if(t.onMouseEnter(),"dropdown"===t.type){t.onBeforeOpen()!==!1&&t.dom.addClass("button-open"),"function"==typeof t.config.menu&&t.config.menu(t.dom.menu,function(e){t._renderMenuList(e,t.dom.menu),t.config.resize===!0&&t.resizeButtonWidth()});var o=n(e.currentTarget);if(o.length&&o.parent().hasClass("g-dropdown-button-second")){var s=o.attr("data-button-id"),l=r._secondMenuCallbacks[s],h=o.parent().find(".menu");o.parent().addClass("button-open"),"function"==typeof l&&l(h,function(e){t._renderMenuList(e,h),t.config.resize===!0&&t.resizeButtonWidth()})}n(this).hasClass("g-button-hastips")&&n(".g-button-tips").css({visibility:"visible"});var c=(new Date).getTime()-i;a.send({name:"buttonHover",value:c})}}),i=function(e){t.onMouseLeave(),n(this).hasClass("g-button-hastips")&&n(".g-button-tips").css({visibility:"hidden"});var i=e.currentTarget;t.menuHideTimeout=setTimeout(function(){var t=n(i),e=t.parent().attr("menuLevel");t.length&&t.parent().hasClass("g-dropdown-button-second")&&2===+e&&t.parent().removeClass("button-open")},100)},o=function(){t.isEnable&&t.onClick()};this.dom.bind("mouseleave",function(){"dropdown"===t.type&&t.onBeforeClose()!==!1&&t.dom.removeClass("button-open")}).bind("mouseenter",e).bind("mouseleave",i).bind("click",o).delegate(".g-button","mouseenter",e).delegate(".g-button","mouseleave",i).delegate(".g-button","click",o).delegate(".g-button-menu","click",function(e){if(e.stopPropagation(),!n(this).hasClass("g-disabled")){var i=n(this).data("menu-id"),o=t.menu[i];o&&"function"==typeof o.click&&o.click()}}).delegate("g-dropdown-button-second","mouseleave",function(){"dropdown"===t.type&&t.onBeforeClose()!==!1&&t.dom.removeClass("button-open")}).delegate(".menu","mouseenter",function(e){var i=n(e.currentTarget);i.length&&i.parent().hasClass("g-dropdown-button-second")&&t.menuHideTimeout&&clearTimeout(t.menuHideTimeout)}).delegate(".menu","mouseleave",function(t){var e=n(t.currentTarget);e.length&&e.parent().hasClass("g-dropdown-button-second")&&e.parent().removeClass("button-open")})},_initUserEvent:function(){"function"==typeof this.config.click&&(this.onClick=this.config.click),"function"==typeof this.config.mouseEnter&&(this.onMouseEnter=this.config.mouseEnter),"function"==typeof this.config.mouseLeave&&(this.onMouseLeave=this.config.mouseLeave),"function"==typeof this.config.beforeOpen&&(this.onBeforeOpen=this.config.beforeOpen),"function"==typeof this.config.beforeClose&&(this.onBeforeClose=this.config.beforeClose),"function"==typeof this.config.visibleChange&&(this.onVisibleChange=this.config.visibleChange),"dropdown"!==this.type?(this.onBeforeOpen=null,this.onBeforeClose=null):this.onBeforeOpen=this.onBeforeClose=function(){}},_caulateClassName:function(){var t="",e=this.config.color;return t="big"===this.type?e?"g-button-"+e+"-large":"g-button-large":e?"g-button-"+e:""},appendTo:function(t){return t=n(t),t.append(this.dom),this.resizeButtonWidth(),this.container=t,this},resizeButtonWidth:function(){if("dropdown"===this.type){for(var t,e=this.dom.menu[0].children,i=0,o=this.dom.outerWidth(),s=0,a=e.length;a>s;s++)t=r.caculateDropButtonWidth(n(e[s]),this.config),i<t.width&&(i=t.width),this.dom.menu.width(i-2),this.width=i,this.height=t.height;t=r.caculateDropButtonWidth(null,this.config),i<t.width&&(i=t.width),o>i&&(i=o),this.dom.menu.width(i-2),this.width=i,this.height=t.height}else{var t=r.caculataButtonWidth(this.config);this.width=t.width,this.height=t.height}},change:function(t,e){if(this.config=n.extend(this.config,t),t.type&&t.type!==this.type||e){
var i=this.dom;this.type=t.type,this._init(),i.after(this.dom).remove(),this.resizeButtonWidth(),i=null}else{this.dom.mainButton.attr("class","g-button "+this._caulateClassName());var o=this.dom.mainButton.find(".icon");o.length&&!this.config.icon?o.remove():0===o.length&&this.config.icon?this.dom.mainButton.prepend('<em class="icon '+this.config.icon+'"></em>'):o.length&&o.attr("class","icon "+this.config.icon),this.dom.mainButton.find(".text").text(this.config.title),this._initSizeAndPosition()}return this},addToMenu:function(t,e){if("dropdown"===this.type){"object"!=typeof t||t.length||(t=[t]);var i=this._renderMenuList(t)}return 0===e?this.dom.menu.prepend(i):this.dom.menu.append(i),this.config.resize===!0&&this.resizeButtonWidth(),this},triggerClick:function(t){this.isEnable&&this.onClick(t)},removeFromMenu:function(t){var e=n(this.dom.menu.find(".g-button-menu")[t]),i=e.data("menu-id");return e.remove(),delete this.menu[i],this.config.resize===!0&&this.resizeButtonWidth(),this},getMenuDom:function(t){return"dropdown"===this.type?n(this.dom.menu.find(".g-button-menu")[t]):null},menuShow:function(t,e){if("dropdown"===this.type){var i=n(this.dom.menu.find(".g-button-menu")[t]);return e===!1?i.hide():i.css("display","block"),this.config.resize===!0&&this.resizeButtonWidth(),i}return null},menuDisable:function(t,e){if("dropdown"===this.type){var i=n(this.dom.menu.find(".g-button-menu")[t]);return e===!1?i.removeClass("g-disabled"):i.addClass("g-disabled")}return null},hide:function(){return this.dom.hide(),this.isShow=!1,this},show:function(){return this.dom.css("display","inline-block"),this.isShow=!0,this},disable:function(t){return t===!1?(this.dom.removeClass("g-disabled"),this.isEnable=!0):(this.dom.addClass("g-disabled"),this.isEnable=!1),this},onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onBeforeOpen:function(){},onBeforeClose:function(){},onVisibleChange:function(){}},r.caculataButtonWidth=function(t){var e=2,i=t.title,n=t.icon,o=t.iconMarginRight,s=t.padding,a=t.textWidth;return e+=a?parseInt(a,10)+4:13*i.length+4,"string"==typeof n&&(e+="undefined"!=typeof o?20+parseInt(o,10):20),e+=s?parseInt(s[0],10)+parseInt(s[1],10):20,{width:e,height:33}},r.caculateDropButtonWidth=function(t,e){var i=2,n=e.title,o=e.icon,s=e.iconMarginRight,a=e.padding,r=e.textWidth,l=e.buttonDefaultConfig.paddingLeft,h=e.buttonDefaultConfig.paddingRight,c=e.buttonDefaultConfig.paddingHeight;return t?"none"!==t.css("display")?(i+=t.hasClass("g-button-menu")&&t.find(".g-dropdown-button-second").length>0?12*t.find("a.g-button").text().length:12*t.text().length,i+=a?parseInt(a[0],10)+parseInt(a[1],10):24):i=0:(i+=r?parseInt(r,10):12*n.length,"string"==typeof o&&(i+="undefined"!=typeof s?20+parseInt(s,10):24),i+=a?parseInt(a[0],10)+parseInt(a[1],10):l&&h?l+h:30),{width:i,height:c||34}},i.exports=r}),define("system-core:system/uiService/dialog/dialog.drag.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o={dialogs:{},getDialogById:function(t){return this.dialogs[t]},hasBind:!1,events:function(){var t,e,i,s,a,r=this,l=!1,h=!1,c=function(o){if(t){var r=n(window).scrollTop();n.browser.msie&&"6.0"===n.browser.version&&!n.support.style&&(r=0);var l=(t.dialogHeight+o.pageY-i,t.dialogWidth+o.pageX-e),c=o.pageY-i-r<0?0:o.pageY-i-r,u=o.pageX-e<0?0:o.pageX-e;l>a&&(u=a-t.dialogWidth),c>s-15&&(c=s-15),t.position({top:c,left:u}),h||(h=!0,e=o.pageX-t.$ele.find(".dialog-drag").offset().left,i=o.pageY-t.$ele.find(".dialog-drag").offset().top)}};n(document).on("mousedown",".dialog-drag",function(o){var l=n(o.target).attr("class");"select-text"!==l&&(s=n(window).height(),a=n(window).width(),t=r.getDialogById(n(this).parent().data("dialogId")),h=!0,n(document).on("mousemove",c),e=o.pageX-n(this).offset().left+3,i=o.pageY-n(this).offset().top+3)}),n(document).on("mouseup",function(){l||(t=null,n(document).off("mousemove",c)),l=!1,h=!1}),n(document).on("mousedown",".dialog",function(){n(this).data("dialogId")}),o.hasBind=!0}},s={enableDrag:function(t,e){o.dialogs[t]=e,e.$dialog.find(".dialog-header").addClass("dialog-drag"),o.hasBind===!1&&o.events()}};i.exports=s}),define("system-core:system/uiService/canvas/canvas.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o={$canvas:null,animateConfig:null,render:function(){var t=n('<div class="module-canvas"></div>');t.css({position:"fixed",_position:"absolute",left:0,top:0,zIndex:50,background:"#000",filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=50)","-moz-opacity":.5,"-khtml-opacity":.5,opacity:.5,width:"100%",height:"100%"}),this.$canvas=t,n("body").append(t),this.animateConfig&&(t.animate(o.animateConfig,"normal"),this.resetAnimateConfig())},bindCanvas:function(){var t=this;n(window).off("resize.canvas").on("resize.canvas",function(){var e=n(this),i=e.width(),o=e.height();t.$canvas.width(i),t.$canvas.height(o)})},unbindCanvas:function(){n(window).off("resize.canvas")},resetAnimateConfig:function(){this.animateConfig=null},referCount:0},s={show:function(){return o.$canvas?o.animateConfig?(o.$canvas.show(),o.$canvas.animate(o.animateConfig,"normal"),o.resetAnimateConfig()):o.$canvas.show():o.render(),o.referCount++,this},hide:function(t){return o.referCount--,o.referCount<=0&&"keepCanvas"!==t&&(o.referCount=0,o.$canvas&&o.$canvas.hide()),this},addAnimate:function(t){return o.animateConfig=t,this}};i.exports=s}),define("system-core:system/uiService/dialog/dialog.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/libs/underscore.js"),s=t("system-core:system/uiService/dialog/dialog.drag.js"),a=t("system-core:system/uiService/button/button.js"),r=t("system-core:system/uiService/canvas/canvas.js"),l=function(t){t||(t={}),this.buttonIns=[],this.buttonMap={},this.minimizeBottom=0,this.animateName=t.animateName||"",this.dialogId=t.id||o.uniqueId("dialog"),t.className=t.className||"",this.status=l.STATUS_NORMAL,this.$dialog=n('<div class="'+l.MODULE_NAME+" dialog-"+this.dialogId+" "+t.className+" "+this.animateName+'" id="'+this.dialogId+'" />'),this.$dialog.data("dialogId",this.dialogId),this.$header=null,this.zIndex=t.zIndex||0,this.$minHeader=null,this.setConfig(t),this.init()};l.THEME_DEFAULT="gray",l.THEME_BLUE="blue",l.MODULE_NAME="dialog",l.STATUS_NORMAL="normal",l.STATUS_MIN="min",l.STATUS_MAX="max",l.MIN_ZINDEX=51,l.MAX_ZINDEX=70,l.zIndexTop=l.MIN_ZINDEX,l.DEFAULT_CONFIG={title:"",titleIcon:"",theme:"",dialogClass:"",max:!1,back:!1,min:!1,close:!0,onClose:!1,width:"520px",minDialogWidth:"auto",draggable:!0,show:!1,lock:!0,body:"",noHeader:!1,noFooter:!0,position:{xy:"center",offset:null},beforeShow:null,beforeHide:null,afterShow:null,afterHide:null},l.TEMPLATE_HEAD='<div class="dialog-header"><% if (!titleIcon) { %><h3><span class="dialog-header-title"><em class="select-text"><%= title %></em></span></h3><% } else { %><h3 class="hasicon"><i class="<%- titleIcon %>"></i><span class="dialog-header-title"><em class="select-text"><%= title %></em></span></h3><% } %><div class="dialog-control"><% if (close) { %><span class="dialog-icon dialog-close icon icon-close"><span class="sicon">×</span></span><% } %><% if (max) { %><span class="dialog-icon dialog-max icon icon-maximizing"><span class="sicon">□</span></span><% } %><% if (min) { %><span class="dialog-icon dialog-min icon icon-minimize"><span class="sicon">-</span></span><% } %></div></div>',l.TEMPLATE_HEAD_FOR_MIN='<div class="dialog-min-header"><% if (!titleIcon) { %><h3><span class="dialog-header-title"><em class="select-text"><%= title %></em></span></h3><% } else { %><h3 class="hasicon"><i class="<%- titleIcon %>"></i><span class="dialog-header-title"><em class="select-text"><%= title %></em></span></h3><% } %><div class="dialog-control"><% if (close) { %><span class="dialog-icon dialog-close icon icon-close"><span class="sicon">×</span></span><% } %><% if (min || max) { %><span class="dialog-icon dialog-back icon icon-maximizing"><span class="sicon">□</span></span><% } %></div></div>',l.TEMPLATE_FOOT='<div class="dialog-footer g-clearfix"></div>',l.TEMPLATE_EXTRA='<div class="dialog-extra g-clearfix"></div>',l.QUERY={body:"body",dialogHeader:".dialog-header",dialogMinHeader:".dialog-min-header",dialogClose:".dialog-close",dialogTitle:".dialog-header-title .select-text",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogExtra:".dialog-extra"},l.dialogList=[],l.prototype={setConfig:function(t){this.config=n.extend(!0,{},l.DEFAULT_CONFIG,t)},init:function(){l.dialogList.push(this),this._render(),this.config.show===!0&&this.show(),this._events()},_render:function(){var t='<div class="dialog-body"><%= body %></div>';this.config.dialogClass&&this.$dialog.addClass(this.config.dialogClass),this.config.min&&(t=l.TEMPLATE_HEAD_FOR_MIN+t),this.config.noHeader||(t=l.TEMPLATE_HEAD+t),this.config.buttons&&(t+=l.TEMPLATE_FOOT),this.config.extra&&(t+=l.TEMPLATE_EXTRA);var e=null;"object"==typeof this.config.body&&(e=this.config.body,this.config.body="");var i=o.template(t)(this.config);this.$dialog.html(i),e&&this.$dialog.find(".dialog-body").append(e),this.createButtons(),this.setTheme(),this.setExtraContent(),this.config.width&&(/([\d\.]+)\%$/.test(this.config.width)&&(this.config.width=parseFloat(RegExp.$1)/100*n(window).width()),this.width(this.config.width)),this.config.height&&(/([\d\.]+)\%$/.test(this.config.height)&&(this.config.height=parseFloat(RegExp.$1)/100*n(window).height()),this.height(this.config.height)),this.$dialog.appendTo("body"),this.$header=this.$dialog.find(".dialog-header"),this.$minHeader=this.$dialog.find(".dialog-min-header")},setTheme:function(){this.$dialog.addClass(this.config.theme&&this.config.theme===l.THEME_BLUE?"dialog-"+l.THEME_BLUE:"dialog-"+l.THEME_DEFAULT)},createButtons:function(){var t=this.config.buttons,e=this,i=null;e.buttonIns.length=0,o.map(t,function(t){i=new a(t),e.buttonIns.push(i),t.name&&(e.buttonMap[t.name]=i);var n=i.dom;e.$dialog.find(l.QUERY.dialogFooter).append(n)})},setExtraContent:function(){var t=this.config.extra;this.$dialog.find(l.QUERY.dialogExtra).append(t)},setButtonDisable:function(t,e){var i=this.buttonIns.length;if(void 0===e)o.map(this.buttonIns,function(e){e.disable(t)});else for(var n=0;i>n;n++)n==e&&this.buttonIns[n].disable(t)},_events:function(){var t=this;this.config.draggable===!0&&this.enableDrag(),this.$dialog.on("click.dialog",l.QUERY.dialogClose,function(e){e.stopPropagation();var i=t.onClose.call(t,arguments);return o.isFunction(t.onClose)===!0?i!==!1&&("keepCanvas"===i&&t.hide("keepCanvas"),t.hide()):t.hide(),!1}),o.each(["min","back","max"],function(e){this.$dialog.on("click",".dialog-"+e,function(i){i.stopPropagation(),"min"===e?t.minimize():"back"===e&&t.restore()})},this),this.$dialog.on("mousedown.dialog",function(){t.zIndex?t._setIndex(t.zIndex):t._top()})},_top:function(){var t=function(){l.zIndexTop>l.MAX_ZINDEX&&e()},e=function(){var t=l.dialogList,e=l.MIN_ZINDEX;t.sort(function(t,e){return t.$dialog.css("zIndex")>e.$dialog.css("zIndex")}),o.map(t,function(t){t.$dialog.css("zIndex",e++)}),l.zIndexTop=e};return function(){this.zIndex!==l.zIndexTop&&(l.zIndexTop++,this.zIndex=l.zIndexTop,this.$dialog.css("zIndex",l.zIndexTop),t())}}(),_setIndex:function(t){this.$dialog.css("zIndex",t)},_unbindEvents:function(){this.$dialog.off()},delegate:function(t,e,i){this.$dialog.delegate(t,e,i)},topShow:function(){this._top(),this.show()},show:function(){return this.$dialog.is(":visible")?void 0:("function"==typeof this.config.beforeShow&&this.config.beforeShow.call(this),o.isString(this.config.position.xy)?this.position(this.config.position.xy,this.config.position.offset):o.isArray(this.config.position.xy)&&this.position({top:this.config.position.xy[0],left:this.config.position.xy[1]}),this.$dialog.show().css("visibility","visible"),this.config.lock===!0&&this.lock(),this.zIndex?this._setIndex(this.zIndex):this._top(),/IE\s[67]/.test(navigator.userAgent)&&n("body").css("zoom",0),"function"==typeof this.config.afterShow&&this.config.afterShow.call(this),this)},getMinDom:function(){return this.$dialog.find(l.QUERY.dialogMinHeader)},move:function(){},setMinimizeBottom:function(t){"number"==typeof t&&(this.minimizeBottom=t)},minimize:function(){var t=this;if(this.status===l.STATUS_MIN)return this;if("bottom-left"===this.config.position.xy||"bottom-right"===this.config.position.xy){var e=function(){t.$dialog.find(l.QUERY.dialogHeader).hide(),"bottom-left"===t.config.position.xy?t.$dialog.find(l.QUERY.dialogBody).css("height","0"):t.$dialog.find(l.QUERY.dialogBody).hide(),t.$dialog.find(l.QUERY.dialogHeader).hide(),t.$dialog.find(l.QUERY.dialogMinHeader).show(),"auto"!==t.config.minDialogWidth&&t.$dialog.width(t.config.minDialogWidth),t.dialogWidth=t.$dialog.outerWidth(),t.dialogHeight=t.$dialog.outerHeight();var e=0===t.minimizeBottom?0:t.minimizeBottom,i=function(){t.config.min&&"function"==typeof t.config.min&&t.config.min.call(this),t.status=l.STATUS_MIN,t.onSizeChange({status:"minimize"})};/IE\s[67]/.test(navigator.userAgent)?(t.$dialog.css({bottom:e}),i(),n("body").css("zoom",1)):t.$dialog.animate({bottom:e},"fast","linear",i)},i=this.dialogHeight;t.$dialog.is(":visible")&&!/IE\s[67]/.test(navigator.userAgent)?this.$dialog.stop().animate({bottom:-i},"fast","linear",e):(this.$dialog.css("bottom",-i),e(),n("body").css("zoom",1))}return this},restore:function(){var t=this;if(this.status===l.STATUS_NORMAL)return this;if("bottom-left"===this.config.position.xy||"bottom-right"===this.config.position.xy){var e=this.dialogHeight,i=function(){t.$dialog.find(l.QUERY.dialogMinHeader).hide(),"bottom-left"===t.config.position.xy?t.$dialog.find(l.QUERY.dialogBody).css("height","auto"):t.$dialog.find(l.QUERY.dialogBody).show(),t.$dialog.find(l.QUERY.dialogHeader).show(),t.$dialog.find(l.QUERY.dialogFooter).show(),"auto"!==t.config.minDialogWidth&&t.$dialog.width(t.config.width),t.dialogWidth=t.$dialog.outerWidth(),t.dialogHeight=t.$dialog.outerHeight();var e=function(){t.config.max&&"function"==typeof t.config.max&&t.config.max.call(this),t.status=l.STATUS_NORMAL,t.onSizeChange({status:"normal"})};/IE\s[67]/.test(navigator.userAgent)?(t.$dialog.css({bottom:0}),e(),n("body").css("zoom",0)):t.$dialog.animate({bottom:0},300,"linear",e)};/IE\s[67]/.test(navigator.userAgent)?(this.$dialog.css({bottom:-e}),i(),n("body").css("zoom",0)):this.$dialog.is(":animated")||this.$dialog.animate({bottom:-e},"fast","linear",i)}return this},maximize:function(){},isVisible:function(){return this.$dialog.is(":visible")},hide:function(t){return this.isVisible()?("function"==typeof this.config.beforeHide&&this.config.beforeHide.call(this),this.$dialog.hide(),r.hide(t),/IE\s[67]/.test(navigator.userAgent)&&n("body").css("zoom",1),"function"==typeof this.config.afterHide&&this.config.afterHide.call(this),this):void 0},destroy:function(){this.detachedElement=this.$dialog.detach()},title:function(t){return this.$dialog.find(l.QUERY.dialogTitle).text(t),this},icon:function(t){if(t){var e=this.$header.find("h3 i"),i=this.$minHeader.find("h3 i");0===e.length&&(e=n("<i></i>"),this.$header.find("h3").addClass("hasicon").prepend(e)),0===i.length&&(i=n("<i></i>"),this.$minHeader.find("h3").addClass("hasicon").prepend(i)),e.attr("class",t),i.attr("class",t)}else this.$header.find("h3").removeClass("hasicon"),this.$minHeader.find("h3").removeClass("hasicon");return this},width:function(t){return this.$dialog.width(t),this},height:function(t){return this.$dialog.height(t),this},content:function(t){this.$dialog.find(l.QUERY.dialogBody).html(t)},find:function(t){return this.$dialog.find(t)},enableDrag:function(){s.enableDrag(this.dialogId,this)},lock:function(){r.show()},reset:function(t){null===this.detachedElement&&this.hide(),this.detachedElement.appendTo("body"),t&&t(),this.hasInitialPosition&&this.position(this.hasInitialPosition)},position:function(t,e){var i={top:"auto",bottom:"auto",left:"auto",right:"auto"};if(this.dialogWidth=this.$dialog.outerWidth(),this.dialogHeight=this.$dialog.outerHeight(),"center"===t){var o=n(window).height(),s=n(window).width();i=n.extend(i,{top:(o-this.dialogHeight)/2,left:(s-this.dialogWidth)/2,bottom:"auto",right:"auto"}),i.top<0&&(i.top=0)}else"bottom-left"===t?(e||(e={}),i=n.extend(i,{bottom:0+(e.bottom||0),left:e.left||0,top:"auto",right:"auto"})):"bottom-right"===t?(e||(e={}),i=n.extend(i,{bottom:0+(e.bottom||0),right:e.right||0,top:"auto",left:"auto"})):i=n.extend(i,t);this.$dialog.css(i),this.$dialog.css("zIndex",l.DEFAULT_ZINDEX++),void 0===this.hasInitialPosition&&(this.hasInitialPosition=i)},onSizeChange:function(){},onClose:function(){var t,e=this;return"function"==typeof this.config.onClose&&(t=this.config.onClose.call(e)),t}},l._confirmDialog=null,l.confirm=function(t,e,i,n,s,a){var r;if(o.isObject(t)===!0){if(!t.title)throw new Error("[context] 确认对话框名称是必须的！");if(!t.body)throw new Error("[context] 对话框内容是必须的！");r=t}else if(o.isString(t)===!0){if(!e)throw new Error("[context] 对话框内容是必须的！");r={title:t,body:e,onSure:i,onCancel:n,extra:s}}r.dialogDefaultConfig=a||{};var h={id:"confirm",show:t.show||!0,title:r.title,width:t.width||l.DEFAULT_CONFIG.width,body:'<div style="text-align:center;padding:40px 22px 22px 22px;">'+r.body+"</div>",buttons:[{name:"confirm",title:r.sureText||"确定",type:r.dialogDefaultConfig.buttonType||"",color:"blue",padding:r.dialogDefaultConfig.buttonPadding||["36px","36px"],click:function(){o.isFunction(r.onSure)===!0?r.onSure.call(l._confirmDialog,arguments)!==!1&&l._confirmDialog.hide():l._confirmDialog.hide()}},{name:"cancel",title:r.cancelText||"取消",type:r.dialogDefaultConfig.buttonType||"",padding:r.dialogDefaultConfig.buttonPadding||["36px","36px"],click:function(){o.isFunction(r.onCancel)===!0?r.onCancel.call(l._confirmDialog,arguments)!==!1&&l._confirmDialog.hide():l._confirmDialog.hide()}}],onClose:function(){o.isFunction(r.onClose)===!0?r.onClose.call(l._confirmDialog,arguments)!==!1&&l._confirmDialog.hide():l._confirmDialog.hide()},className:t.className||""};return(r.extra||o.isString(r.extra))&&(h.extra=r.extra),null===l._confirmDialog?l._confirmDialog=new l(h):(l._confirmDialog.setConfig(h),l._confirmDialog.createButtons(),l._confirmDialog.init()),l._confirmDialog.onCancel=r.onCancel,l._confirmDialog},l._alertDialog=null,l.alert=function(t,e,i){var n;if(o.isObject(t)===!0){if(!t.body)throw new Error("[context] 警告内容是必须的！");n=t}else o.isString(t)===!0&&(n={body:t,onSure:e});n.dialogDefaultConfig=i||{};var s={title:n.title||"提示",body:'<div style="text-align:center;padding:22px;">'+n.body+"</div>",width:n.width||"540px",buttons:[{name:"confirm",title:n.sureText||"确定",type:n.dialogDefaultConfig.buttonType||"",color:n.dialogDefaultConfig.buttonColor||"",click:function(){o.isFunction(n.onSure)===!0?n.onSure.call(l._alertDialog,arguments)!==!1&&l._alertDialog.hide():l._alertDialog.hide()}}],onClose:function(){o.isFunction(n.onClose)===!0?n.onClose.call(l._alertDialog,arguments)!==!1&&l._alertDialog.hide():l._alertDialog.hide()},className:t.className||""};return s.noFooter=!1,null===l._alertDialog?l._alertDialog=new l(s):(l._alertDialog.setConfig(s),l._alertDialog.createButtons(),l._alertDialog.init()),l._alertDialog.show(),l._alertDialog},l._verifyDialog=null,l.verify=function(t,e,i,s,a,r){var h,c,u="/api/getvcode?prod=pan",d=function(t){n.get(u+"&t="+Math.random(),function(e){0===e.errno?(c=e.vcode,t(e.img)):t(!1)},"json")};o.isObject(t)===!0?(h=t,c=h.vcode):o.isString(t)===!0&&(c=e.vcode,h={title:t,img:e.img,onSure:i,onCancel:s,hasError:a}),h.dialogDefaultConfig=r||{},h.title=h.title||"提示",h.body=['<div class="download-verify" style="margin-top: 10px;padding: 0 28px;text-align: left;font-size: 12px;" id="downloadVerify">','<div class="verify-body">','请输入验证码：<input type="text" style="padding: 3px;width: 85px;height: 23px;border: 1px solid #C6C6C6;background-color: white;vertical-align: middle;" class="input-code" maxlength="4">','<img class="img-code" style="margin-left: 10px;vertical-align: middle;" alt="验证码获取中" src="" width="100" height="30" />','<a href="javascript:void(0);" style="text-decoration: underline;" class="underline">换一张</a>',"</div>",'<div style="padding-left: 84px;height: 18px;color: #d80000;" class="verify-error">',h.hasError?"验证码输入错误，请重新输入":"","</div>","</div>"].join("");var g={title:h.title,body:'<div style="text-align:center;padding:22px;">'+h.body+"</div>",width:t.width||l.DEFAULT_CONFIG.width,buttons:[{name:"confirm",title:h.sureText||"确定",type:h.dialogDefaultConfig.buttonType||"",color:"blue",padding:h.dialogDefaultConfig.buttonPadding||["36px","36px"],click:function(){var t=n("#downloadVerify .input-code"),e=n("#downloadVerify .verify-error"),i=n.trim(t.val());return""==i?(e.text("请输入验证码"),void t.focus()):4!=i.length?(e.text("验证码输入错误，请重新输入"),void t.focus()):(e.text(""),void(o.isFunction(h.onSure)===!0?h.onSure(c,i,!0)!==!1&&l._verifyDialog.hide():l._verifyDialog.hide()))}},{name:"cancel",title:h.cancelText||"取消",type:h.dialogDefaultConfig.buttonType||"",padding:h.dialogDefaultConfig.buttonPadding||["36px","36px"],click:function(){o.isFunction(h.onCancel)===!0?h.onCancel(arguments)!==!1&&l._verifyDialog.hide():l._verifyDialog.hide()}}],onClose:function(){o.isFunction(h.onClose)===!0?h.onClose(arguments)!==!1&&l._verifyDialog.hide():l._verifyDialog.hide()},className:t.className||""};null===l._verifyDialog?l._verifyDialog=new l(g):(l._verifyDialog.setConfig(g),l._verifyDialog.createButtons(),l._verifyDialog.init());var f=n("#downloadVerify"),m=f.find(".input-code"),p=f.find(".img-code"),y=f.find(".verify-error");return f.find(".underline").click(function(){h.img&&(d(function(t){p.attr("src",t)}),m.focus())}),m.blur(function(){m.val()&&y.text("")}).keydown(function(t){if(13==t.keyCode){try{l._verifyDialog.buttonIns[0].triggerClick()}catch(t){}return!1}}).focus(),l._verifyDialog.onCancel=h.onCancel,h.img&&h.vcode?p.attr("src",h.img):d(function(t){t===!1?p.attr("alt","验证码获取失败"):(h.img=t,p.attr("alt","点击换一张"),p.attr("src",h.img))}),l._verifyDialog},i.exports=l}),define("system-core:system/uiService/tip/tip.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/libs/underscore.js"),s=t("system-core:system/uiService/log/log.js").instanceForSystem,a="module-tip",r="loading",l="success",h="caution",c="failure",u="none",d=65,g=3e3,f={mode:h,hasClose:!1,autoClose:!0,isVip:!1},m={$ele:n('<div class="'+a+'"></div>'),timeoutId:null,checkOption:function(t){var e=!0;return!(!t.msg&&!t.body)&&((!t.mode||this.checkMode(t.mode)!==!1)&&e)},checkMode:function(t){var e=!0;switch(t){case r:e=!0;break;case l:e=!0;break;case h:e=!0;break;case c:e=!0;break;case u:e=!0;break;default:e=!1}return e},destroy:function(){this.$ele.remove()},getRenderObj:function(t){var e={};return e.icon="tip-icon-"+(t.mode||f),e.mode=t.mode||f.mode,e.hasClose=t.hasClose||f.hasClose,e.autoClose=t.autoClose||f.autoClose,e.msg=t.msg,e.body=t.body,e.position=t.position||f.position,e.vipType=t.vipType,e},getRenderHtml:function(){var t=o.template('<div class="tip-inner"><% if (body != null) {%><div class="tip-body"><%= body %></div><%}else {%><% if (vipType == "svip" && (mode == "loading" || mode == "success")) {%><i class="sprite-svip-ic"></i><%}else if (vipType == "vip" && (mode == "loading" || mode == "success")) {%><i class="sprite-vip-ic"></i><%}else {%><i class="tip-icon <%- icon %>"></i><%}%><span class="tip-msg"><%= msg %></span><% if (hasClose) { %><i class="tip-close tip-icon tip-icon-close"></i><% } %><% } %></div>');return function(e){return t(e)}}(),setMsg:function(t){this.$ele.find(".tip-msg").html(t);var e=this.$ele.width(),i={marginLeft:-e/2};this.$ele.css(i)},hide:function(){m.$ele.hide()},render:function(t){t?this.renderByPosition(t):this.renderByDefault(),this.$ele.is(":visible")===!1&&this.$ele.show()},renderByDefault:function(){var t,e,i=n("body");this.$ele.appendTo(i),t=this.$ele.width(),e={top:d,left:"50%",marginLeft:-t/2},this.$ele.css(e)},renderByPosition:function(t){var e,i,s={};if(!o.isObject(t))throw new Error("[TIP] The position of config is not a object !");if(t.of){if(t.of instanceof n)i=t.of;else{if("string"!=typeof t.of)throw new Error("[tip] The position.of of tip is a string or jquery object !");i=n(t.of)}null==i.css("position")&&i.css("position","relative")}else i=n("body");if(this.$ele.appendTo(i),e=this.$ele.width(),t.top||t.left||t.right||t.bottom)o.each(["top","left","bottom","right"],function(e){void 0!==t[e]&&(s[e]=t[e])});else if(t.center){var a=this.$ele.height();s={top:"50%",left:"50%",marginLeft:-e/2,marginTop:-a/2}}else s={top:65,left:"50%",marginLeft:-e/2};this.$ele.css(s)},doAutoClose:function(t){var e=this;return this.timeoutId&&clearTimeout(this.timeoutId),void 0===t?void(this.timeoutId=setTimeout(function(){e.$ele.hide()},g)):"boolean"==typeof t?void(t===!0&&(this.timeoutId=setTimeout(function(){e.$ele.hide()},g))):"number"==typeof t?void(this.timeoutId=setTimeout(function(){e.$ele.hide()},t)):void 0},buildTip:function(t){var e=this.getRenderObj(t),i=this.getRenderHtml(e);return this.$ele.attr("class",a),this.$ele.removeAttr("style"),"string"==typeof t.className&&this.$ele.addClass(t.className),"success"===e.mode||"loading"===e.mode?("vip"===e.vipType||"svip"===e.vipType)&&this.$ele.addClass("sprite-vip-tips"):this.$ele.hasClass("sprite-vip-tips")&&this.$ele.removeClass("sprite-vip-tips"),this.$ele.html(i),this.render(t.position),this.doAutoClose(t.autoClose),this.event(),this},event:function(){var t=!1;return function(){t===!1&&(this.$ele.delegate(".tip-close","click",function(){p.hide()}),t=!0)}}()},p={show:function(t){var e=(new Date).getTime();if(m.checkOption(t)===!0){var i=m.buildTip(t),n=(new Date).getTime()-e;return s.send({name:"tipShow",value:n}),i}},hide:m.hide};i.exports=p}),define("system-core:system/cache/listCache/listCache.js",function(t,e,i){var n=!1,o=t("base:widget/libs/jquerypacket.js"),s=t("system-core:system/uiService/log/log.js").instanceForSystem,a={},r={};"object"==typeof window.cache?a=window.cache:window.cache=a;var l=function(){};r.DEBUG=!0,l.cache=a,r.addCache=function(t,e,i){var n=!1;if(a[t]){if(!a[t].writeable)return void(r.DEBUG&&console.warn("cache key:",t," already exists"));n=!0}a[t]=n?{config:i,data:a[t].data}:{config:i,data:{}}},r.removeCache=function(t){if(a[t]){var e=a[t].config;"object"==typeof e.fileSystem&&e.fileSystem.invalidCache()}a[t]={}},l.addCache=r.addCache,r.getCacheByName=function(t){return a[t]},r.getCacheConfig=function(t){var e=r.getCacheByName(t);return e?e.config:null},l.getCacheConfig=r.getCacheConfig,r.updateCacheConfig=function(t,e,i){var n=r.getCacheByName(t);return n&&(n.config=i),null},l.updateCacheConfig=r.updateCacheConfig,r.getCache=function(t){var e=r.getCacheByName(t);return e?e.data:null},r.getDataByKey=function(t,e){var i=r.getCacheByName(t);return i&&i.data?i.data[e]:null},l.getDataByKey=r.getDataByKey,l.getCache=r.getCache,r.getCacheData=function(t,e,i,n,o){var s,a,h,c=r.getCacheByName(t),u=r.getCacheConfig(t)||{},d=u.parentPath||"",g=c.data[e];if(g||(g=c.data[e]={list:[],hasMore:!0}),-1===i?g.list.length<=0&&g.hasMore===!0?i=-1:s=g.list:-2===i?(i=u.currentPage,g.hasMore===!1&&(s=[])):(a=i*u.limit,g.hasMore===!1&&(s=[])),h={cacheName:t,key:d+e,page:i,params:o||{},config:u,callback:n},l.onBeforeGetCacheData(h),s)n.call(null,s,g.hasMore,h);else if(window.prefetchEnable){var f=arguments;window.prefetchCallback=function(){r.getCacheData.apply(null,f)}}else h.page=h.page+1,r.getData(h)},l.getCacheData=r.getCacheData,r.onBeforeGetCacheData=function(){},l.onBeforeGetCacheData=r.onBeforeGetCacheData,r.clearCacheDataByKey=function(t,e){var i=r.getCacheByName(t);"undefined"!=typeof e&&delete i.data[e]},l.clearCacheDataByKey=r.clearCacheDataByKey,r.clearCacheData=function(t){var e=r.getCacheByName(t);e.data={}},l.clearCacheData=r.clearCacheData,r.hasMoreData=function(t,e){var i,n=r.getCache(t);return n&&(i=n[e]),i&&i.hasMore},l.hasMoreData=r.hasMoreData,r.removeByIndexs=function(t,e,i){var n,o,s=r.getCache(t),a=s[e];if(i.sort(function(t,e){return t-e}),a&&(n=a.list))for(var l=i.length-1;l>=0;l--)o=i[l],o<n.length&&n.splice(o,1)},r.removeByIndex=function(t,e,i){r.removeByIndexs(t,e,[i])},r.removeByFileList=function(){},l.removeByIndexs=r.removeByIndexs,l.removeByIndex=r.removeByIndex,r.getIndexsByFiles=function(t,e,i){var n,o=r.getCache(t),s=o[e],a=[];if(i=i.slice(),s&&(n=s.list))for(var l=0,h=i.length;h>l;l++)for(var c=0,u=n.length;u>c;c++)if(i[l]===n[c]){a.push(c);break}return a},r.getIndexByFile=function(t,e,i){return r.getIndexsByFiles(t,e,[i])},l.getIndexByFile=r.getIndexByFile,l.getIndexsByFiles=r.getIndexsByFiles,r.updateData=function(t,e,i){var n,o,s,a=r.getCache(t),l=a[e];if(l&&(n=l.list))for(var h=0,c=i.length;c>h&&(o=i[h],s=n[o.index]);h++)for(var u in o.obj)o.obj.hasOwnProperty(u)&&(s[u]=o.obj[u])},l.updateData=r.updateData,r.addDatasByIndex=function(t,e,i){var n,o,s,a=r.getCache(t),l=a[e];if(i.sort(function(t,e){return parseInt(t.index,10)-parseInt(e.index,10)}),l&&(s=l.list))for(var h=0,c=i.length;c>h;h++)n=i[h],o=n.index,0>o&&(o=s.length),o=Math.min(o,s.length),s.splice(o,0,n.obj)},r.addDataBefore=function(t,e,i){var n=[{index:0,obj:i}];r.addDatasByIndex(t,e,n)},r.addDataAfter=function(t,e,i){var n=[{index:-1,obj:i}];r.addDatasByIndex(t,e,n)},r.addDatasBefore=function(t,e,i){for(var n=[],o=0,s=i.length;s>o;o++)n.push({index:0,obj:i[j]});r.addDatasByIndex(t,e,n)},r.addDatasAfter=function(t,e,i){for(var n=[],o=0,s=i.length;s>o;o++)n.push({index:-1,obj:i[j]});r.addDatasByIndex(t,e,n)},l.addDatasByIndex=r.addDatasByIndex,l.addDataBefore=r.addDataBefore,l.addDataAfter=r.addDataAfter,l.addDatasBefore=r.addDatasBefore,l.addDatasAfter=r.addDatasAfter,r.getData=function(t){var e,i,n={},o=t.config;e="function"==typeof o.getPageParams?o.getPageParams(t.page,o.limit):{page:t.page,num:o.limit},i=o.getParamsBykey(t.key);for(var s in o.params)o.params.hasOwnProperty(s)&&(n[s]=o.params[s]);for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);r.fetchData(o.api,n,r.afterFetchData,t)},r.addDataToCache=function(t,e,i,n,o){var s=r.getCacheByName(t),a=r.getCacheConfig(t),l=s.data[e];l||(l=s.data[e]={list:[],hasMore:!0}),l&&l.list instanceof Array&&Array.prototype.push.apply(l.list,i),l.hasMore=n,a.currentPage=o},l.addDataToCache=r.addDataToCache,r.replaceFirstCache=function(t,e,i){var n={},s=r.getCacheByName(t);n.server_filename=i.path.substring(i.path.lastIndexOf("/")+1),n.local_mtime=n.server_mtime=i.mtime||"-",n.size=0,n.path=i.path||"/",n.fs_id=i.fs_id,n.dir_empty=1,n.empty=0,n.category=6,s||(s={list:[],hasMore:!0}),s.data[e]&&s.data[e].list[0]&&(o.extend(s.data[e].list[0],n),n=null);var a=s.config;"object"==typeof a.fileSystem&&a.fileSystem.invalidCache()},l.replaceFirstCache=r.replaceFirstCache,r.afterFetchSuccess=function(t,e){var i=e.config,n=t[e.config.listKey||"list"],o=e.cacheName,s=e.key,a=i.limit,l=!1,h=null;n&&n.length>=a&&(l=!0),t.parent_oper&&(h={parent_oper:t.parent_oper}),"undefined"==typeof t.has_more||t.has_more||(l=!1),"searchGlobal"===o&&n&&"undefined"==typeof t.has_more&&(l=t.list.length>0),r.addDataToCache(o,s,n,l,e.page),"function"==typeof e.callback&&e.callback.call(null,n,l,e,h)},r.afterFetchData=function(t,e,i,n){var o=n.config;1===t?r.afterFetchSuccess(e,n):("function"==typeof o.failCallBack&&o.failCallBack(e,i,n),r.DEBUG&&console.warn("fetch error"))},r._fetchStrs="",r.fetchData=function(t,e,i,a){e=e||{};var l=t+o.stringify(e);if(r._fetchStrs===l)return void(n&&console.log("fetch too much!"));r._fetchStrs=l,e.t=Math.random();var h=a.config;return e.page<2&&"object"==typeof h.fileSystem&&h.fileSystem.hasApi(t)?void h.fileSystem.getApi(t,e).then(function(t){r._fetchStrs="",i.call(null,1,t,e,a),s.send({name:"apilistCache",sendServerLog:!1})},function(){r._fetchStrs="",h.fileSystem=void 0,r.fetchData(t,e,i,a)}):(o.getJSON(t,e,function(t){var n;n=t&&0===t.errno?1:0,r._fetchStrs="",i.call(null,n,t,e,a)}).error(function(t){var n;try{n=o.parseJSON(t.responseText)}catch(s){}r._fetchStrs="",i.call(null,0,n,e,a)}),void s.send({name:"apilistRequest",sendServerLog:!1}))},r.delayFetch=function(){
return""!==r._fetchStrs},l.delayFetch=r.delayFetch,i.exports=l}),define("system-core:system/cache/listCache/cacheManage.js",function(t,e,i){var n=t("system-core:system/cache/listCache/listCache.js"),o={},s=function(t){if("prototype"===t||"apply"===t||"call"===t||"name"===t)return!0;for(var e in a)if(e===t)return!0;return!1},a=function(t,e,i){if(s(t))throw new Error('instance "'+t+'" is already exists!');this.cacheName=t,this.config=e,this.key=i,n.addCache(this.cacheName,this.key,this.config)},r=function(){for(var t in n)n.hasOwnProperty(t)&&(a.prototype[t]=function(t){return function(){var e,i=Array.prototype.slice.apply(arguments);return i.unshift(this.key),i.unshift(this.cacheName),e=n[t].apply(null,i),"undefined"==typeof e?this:e}}(t))};r(),a.prototype.onBeforeGetCacheData=function(t){n.onBeforeGetCacheData=t},a.prototype.updateKey=function(t){this.key=t},a.replaceSingleCache=function(t,e,i){return n.replaceFirstCache(t,e,i)},a.prototype.getKey=function(){return this.key},a.prototype.getCache=a.getCache=function(){return n.cache},a.removeCache=function(t){if(o[t]){var e=o[t].config;o[t]=null,"object"==typeof e.fileSystem&&e.fileSystem.invalidCache()}var i=a.getCache();if(i[t]){var e=i[t].config;"object"==typeof e.fileSystem&&e.fileSystem.invalidCache()}i[t]=null},a.obtainCache=function(t,e,i){return o[t]||(o[t]=new a(t,e,i)),o[t]},a.prototype.selfAddDataToCache=function(){n.addDataToCache.apply(void 0,arguments)},i.exports=a}),define("system-core:system/uiService/log/updateLog.js",function(t,e,i){"use strict";var n=t("base:widget/libs/jquerypacket.js"),o=t("system-core:system/uiService/log/log.js"),s=t("base:widget/storage/storage.js"),a={logCounter:{},logTimeout:2592e5,sendLogInterval:18e4,writeLogInterval:3e4,isEmptyObject:function(t){for(var e in t)return!1;return!0},processLog:function(t){if(null==t||null==t.op||null==t.from||null==t.type||null==t.detailKey||String(t.op).indexOf("@")>-1||String(t.from).indexOf("@")>-1||String(t.type).indexOf("@")>-1||String(t.detailKey).indexOf("@")>-1)return!1;var e=a.logCounter,i=t.op,n=t.from,o=t.type,s=t.detailKey,r=[i,n,o,s].join("@");return e[r]=e[r]||{},e[r].times=++e[r].times||1,e[r].timestamp=+new Date,!0},processLogForSend:function(t){var e=[];if(null!=t&&!a.isEmptyObject(t))for(var i in t)if(t.hasOwnProperty(i)){var n={},o=i.split("@");n.op=o[0],n.from=o[1],n.type=o[2],n.detailKey=o[3],n.times=t[i].times,n.timestamp=t[i].timestamp,e.push(n)}return e},writeLocalStorage:function(){if("undefined"!=typeof s){var t=s.getItem("logReport");if(t=t?n.parseJSON(t):{},!a.isEmptyObject(a.logCounter)){for(var e in a.logCounter)a.logCounter.hasOwnProperty(e)&&(null!=t[e]?t[e].times+=a.logCounter[e].times:t[e]=a.logCounter[e]);a.logCounter={},a.isEmptyObject(t)||(s.setItem("logReport",n.stringify(t)),s.setItem("logTimestamp",+new Date))}clearInterval(a.setLogTimer),a.setLogTimer=null}},setLocalLog:function(t){a.processLog(t)&&(a.setLogTimer||(a.setLogTimer=setInterval(function(){a.writeLocalStorage()},a.writeLogInterval)),a.sendLogTimer||(a.sendLogTimer=setInterval(function(){a.sendLocalLog()},a.sendLogInterval)))},sendLocalLog:function(){if("undefined"!=typeof s&&s.getItem("logReport")){var t=n.parseJSON(s.getItem("logReport")),e=+s.getItem("logTimestamp");if(+new Date-e<a.logTimeout&&!a.isEmptyObject(t))for(var i=a.processLogForSend(t),o=0;o<i.length;o++)a.sendLog(i[o]);s.removeItem("logReport"),s.setItem("logTimestamp",+new Date),clearInterval(a.sendLogTimer),a.sendLogTimer=null}},sendLog:function(t){var e=n.extend({url:"//update.pan.baidu.com/statistics",clienttype:"0",uk:yunData.MYUK},t);a.logInstance.send(e)},init:function(){a.logInstance=new o,setTimeout(function(){a.sendLocalLog(),n(window).bind("beforeunload",function(){a.writeLocalStorage()})},1e3)}},r={init:function(){return a.init(),{sendLog:a.sendLog,setLocalLog:a.setLocalLog}}};i.exports=r.init()}),define("system-core:system/uiService/page/page.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=function(t){if("object"!=typeof t)throw"error: the param CONF is not a object";this._listLength=t.allNu||0,this._everyPageNu=t.everyPageNu||100,this._im_active=t.im_active||!1,this._pageContainer=t.pageContainer||null,this._pageType=t.pageType||!1,this._pageNuShow=t.pageNuShow||7,this._pageBorder=t.pageBorder||!1,this._currentPageNu=1,this._html=void 0,this._display=!1,this._visible=!0,this._activeTimeout=null,this._maxPageNu=1,this._renderPage(1)};o.prototype={init:function(){var t=this._pageType?"pagese "+(this._pageBorder?"page-border":""):"paging",e=['<div class="'+t+'">'],i=this;e.push('<a href="javascript:void(0)" class="page-home mou-evt">首页</a>'),e.push('<a href="javascript:void(0)" class="page-prev">上一页</a>'),i._pageType?e.push('<span class="page-content"></span>'):(e.push('<span class="txt">第</span>'),e.push('<span class="page-input-wrap"><input type="text" class="page-input"/></span>'),e.push('<span class="txt">/<b class="page-all"></b>页</span>')),e.push('<a href="javascript:void(0)" class="page-next mou-evt">下一页</a>'),e.push('<a href="javascript:void(0)" class="page-end mou-evt" >末页</a>'),e.push("</div>"),this._html=e.join("\n"),null!==this._pageContainer&&(!this._pageContainer instanceof n&&(this._pageContainer=n(this._pageContainer)),this._initContainerDelegate.call(this))},_initContainerDelegate:function(){var t=this;this._pageContainer.delegate(".page-home","click",function(){n(this).hasClass("g-disabled")||1===t._currentPageNu||(t._currentPageNu=1,t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu))}),this._pageContainer.delegate(".page-end","click",function(){n(this).hasClass("g-disabled")||t._currentPageNu===t._maxPageNu||(t._currentPageNu=t._maxPageNu,t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu))}),this._pageContainer.delegate(".page-prev","click",function(){n(this).hasClass("g-disabled")||1===t._currentPageNu||(t._currentPageNu--,t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu))}),this._pageContainer.delegate(".page-next","click",function(){n(this).hasClass("g-disabled")||t._currentPageNu===t._maxPageNu||(t._currentPageNu++,t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu))}),this._pageContainer.delegate(".page-number","click",function(){if(!n(this).hasClass("g-disabled")){var e=n(this).text(),i=parseInt(e);t._currentPageNu=i,t._renderPage(i),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu)}}),this._pageContainer.delegate(".page-input","keyup",function(){if(t._im_active){var e=n(this).val(),i=parseInt(e);i!=e||0>=i||i>t._maxPageNu||(t._currentPageNu=i,clearTimeout(t._activeTimeout),t._activeTimeout=setTimeout(function(){t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu)},1500))}}),this._pageContainer.delegate(".page-input","change",function(){var e=n(this).val(),i=parseInt(e);i!=e||0>=i||i>t._maxPageNu||(t._im_active&&(clearTimeout(t._activeTimeout),t._im_active=!1,t._activeTimeout=setTimeout(function(){t._im_active=!0},2e3)),t._currentPageNu=i,t._renderPage(t._currentPageNu),t.onActive.call(t,t._currentPageNu,(t._currentPageNu-1)*t._everyPageNu,t._everyPageNu))})},_countMaxPageNu:function(){if(0===this._listLength)return this._maxPageNu=0,this._maxPageNu;var t=this._listLength/this._everyPageNu+(this._listLength%this._everyPageNu==0?0:1)||1;return this._maxPageNu=Math.floor(t),this._maxPageNu},setPageContainer:function(t){return this._pageContainer=!t instanceof n?n(t):t,this._initContainerDelegate.call(this),this},_insertPage:function(t){var e="";if(this._maxPageNu<=this._pageNuShow)for(var i=0;i<this._maxPageNu;i++)e+='<span class="page-number '+(t==i+1?"g-disabled":"")+'">'+(i+1)+"</span>";else{e='<span class="pe-ellipsis">...</span>';for(var i=0;i<this._pageNuShow;i++)e+='<span class="page-number">'+(i+1)+"</span>";e+='<span class="ne-ellipsis">...</span>'}n(".page-content",this._pageContainer).html(e),this._maxPageNu>this._pageNuShow?this._countPage(t):(n(".page-prev",this._pageContainer).addClass("none"),n(".page-next",this._pageContainer).addClass("none"))},_countPage:function(t){var e=(this._pageNuShow-1)/2,i="";if(n(".page-prev",this._pageContainer).removeClass("none"),n(".pe-ellipsis",this._pageContainer).removeClass("none"),n(".page-next",this._pageContainer).removeClass("none"),n(".ne-ellipsis",this._pageContainer).removeClass("none"),t>e+1&&this._maxPageNu-t>e)for(var o=0;o<this._pageNuShow;o++)i=t+o-e==t?"g-disabled":"",n(".page-number",this._pageContainer).eq(o).text(t+o-e).addClass(i);else if(e+1>=t)n(".page-number",this._pageContainer).eq(t-1).addClass("g-disabled"),n(".pe-ellipsis",this._pageContainer).addClass("none"),n(".page-prev",this._pageContainer).addClass("none");else if(this._maxPageNu-t<=e){for(var o=0;o<this._pageNuShow;o++)i=this._maxPageNu-this._pageNuShow+o+1==t?"g-disabled":"",n(".page-number",this._pageContainer).eq(o).text(this._maxPageNu-this._pageNuShow+o+1).addClass(i);n(".ne-ellipsis",this._pageContainer).addClass("none"),n(".page-next",this._pageContainer).addClass("none")}},_renderPage:function(t){return this._countMaxPageNu.call(this),t>this._maxPageNu?void this._renderPage(this._maxPageNu):0===this._listLength?void this.setDisplay(!1):this._maxPageNu<=1&&this._display?void this.setDisplay(!1):(this._maxPageNu>1&&!this._display?this.setDisplay(!0):this._maxPageNu>1&&this._display&&(this._pageType?this._insertPage(t):(n(".page-all",this._pageContainer).text(this._maxPageNu),n(".page-input",this._pageContainer).val(t))),n(".page-prev",this._pageContainer).removeClass("g-disabled"),n(".page-home",this._pageContainer).removeClass("g-disabled"),n(".page-next",this._pageContainer).removeClass("g-disabled"),n(".page-end",this._pageContainer).removeClass("g-disabled"),1==t&&(n(".page-prev",this._pageContainer).addClass("g-disabled"),n(".page-home",this._pageContainer).addClass("g-disabled")),this._maxPageNu==t&&(n(".page-next",this._pageContainer).addClass("g-disabled"),n(".page-end",this._pageContainer).addClass("g-disabled")),void(this._currentPageNu=t))},setDisplay:function(t){if(t){if(1==this._maxPageNu)return void this.setDisplay(!1);if("undefined"==typeof this._html&&this.init.call(this),null===this._pageContainer)return;this._pageContainer.html(this._html),this._pageType?this._insertPage(1):(n(".page-input",this._pageContainer).val(1),n(".page-all",this._pageContainer).text(this._maxPageNu))}else this._pageContainer.html("");this._display=t},setVisible:function(t){t?this._pageContainer.show():this._pageContainer.hide(),this._visible=t},chageAllNu:function(t,e){if(this._listLength==t)return!1;this._listLength=t;var i=this;this._countMaxPageNu(),this._currentPageNu>this._maxPageNu&&(this._currentPageNu=this._maxPageNu),this._renderPage(this._currentPageNu),e||i.onActive.call(i,i._currentPageNu,(i._currentPageNu-1)*i._everyPageNu,i._everyPageNu)},chageEveryPageNu:function(t){if(1>t||this._everyPageNu==t)return!1;var e=this;this._everyPageNu=t,this._countMaxPageNu(),this._currentPageNu>this._maxPageNu&&(this._currentPageNu=this._maxPageNu),this._renderPage(this._currentPageNu),e.onActive.call(e,e._currentPageNu,(e._currentPageNu-1)*e._everyPageNu,e._everyPageNu)},goNext:function(){this._pageContainer.find(".page-next").trigger("click")},goPrev:function(){this._pageContainer.find(".page-prev").trigger("click")},goTo:function(t,e){return"number"==typeof t&&t>=0&&t<=this._maxPageNu&&(this._currentPageNu=t,this._renderPage(t),void(e&&_this.onActive.call(_this,_this._currentPageNu,(_this._currentPageNu-1)*_this._everyPageNu,_this._everyPageNu)))},refreshCurrentPage:function(t,e){t&&(this._listLength=t),e&&(this._everyPageNu=e),this._renderPage(this._currentPageNu),this.onActive(this._currentPageNu,(this._currentPageNu-1)*this._everyPageNu,this._everyPageNu)},onActive:function(){}},o.prototype.constructor=o,i.exports=o}),define("system-core:system/uiService/motionSensor/motionSensor.js",function(t,e,i){var n=!1,o=function(t,e){this._mPrivateFlags=0,this._mCanvasView=t,this._mOrientation=e,this._mMotionPoint=[-1,-1],this._mLastMotionPoint=[-1,-1],this._mNativeSensors=[]};o.MOTION_LISTENING=1,o.INSTALLED=2,o.MOTION_ACCEPT=4,o.HORIZONTAL=0,o.VERTICAL=1,o.TOUCH_THRESHOLD=5,o.hasMotionCampatibility=function(){return"ontouchstart"in document},o.prototype={onMotionStart:function(){},onMotionEnd:function(){},onMotion:function(){},dispatchMotionStart:function(t,e){this._mMotionPoint[0]=t,this._mMotionPoint[1]=e,n&&console.log("Motion Start "+t+":"+e),this._mPrivateFlags|=o.MOTION_LISTENING,this.onMotionStart(this._mCanvasView,this._mMotionPoint)},dispatchMotionMove:function(t,e){var i=o.MOTION_LISTENING,s=o.MOTION_ACCEPT;if((this._mPrivateFlags&i)==i){var a=this._mMotionPoint[0],r=this._mMotionPoint[1],l=-1==this._mLastMotionPoint[0]?a:this._mLastMotionPoint[0],h=-1==this._mLastMotionPoint[1]?r:this._mLastMotionPoint[1];this._mLastMotionPoint[0]=t,this._mLastMotionPoint[1]=e;var c=t-l,u=e-h;return n&&console.log("Motion Delta: "+c+"-"+u),(this._mPrivateFlags&s)==s?void this.onMotion(this._mCanvasView,this._mLastMotionPoint,c,u,this._mOrientation):void(this._motionAccept(a,r,t,e)&&(n&&console.log("touch accept"),this._mPrivateFlags|=o.MOTION_ACCEPT,this.onMotion(this._mCanvasView,this._mLastMotionPoint,c,u,this._mOrientation)))}},dispatchMotionEnd:function(){n&&console.log("Touch End");var t=o.MOTION_LISTENING;(this._mPrivateFlags&t)==t&&(this._mPrivateFlags&=~(o.MOTION_LISTENING|o.MOTION_ACCEPT),this._mMotionPoint[0]=-1,this._mMotionPoint[1]=-1,this._mLastMotionPoint[0]=-1,this._mLastMotionPoint[1]=-1)},getOrientation:function(){return this._mOrientation},setOrientation:function(t){this._mOrientation=t},getInitialMotionPoint:function(){return this._mInitialPoint},_motionAccept:function(t,e,i,n){var s=i-t,a=n-e,r=Math.abs(s),l=Math.abs(a);return this._mOrientation==o.HORIZONTAL?!(l>r)&&!(r<o.TOUCH_THRESHOLD):!(r>l)&&!(l<o.TOUCH_THRESHOLD)},uninstall:function(){var t=o.INSTALLED;(this._mPrivateFlags&t)==t&&(this._mPrivateFlags&=~(o.MOTION_LISTENING|o.MOTION_ACCEPT|o.INSTALLED),this._mCanvasView.removeEventListener("touchstart",this._mNativeSensors[0],!1),this._mCanvasView.removeEventListener("touchmove",this._mNativeSensors[1],!1),document.removeEventListener("touchend",this._mNativeSensors[2],!1),document.removeEventListener("touchcancel",this._mNativeSensors[2],!1))},install:function(){var t=o.INSTALLED,e=this;if((this._mPrivateFlags&t)!=t){this._mPrivateFlags|=t;var i=function(t){var i=t.touches[0];return e.dispatchMotionStart(i.clientX,i.clientY),!1};this._mCanvasView.addEventListener("touchstart",i,!1),this._mNativeSensors[0]=i;var n=function(t){var i=t.touches[0];return e.dispatchMotionMove(i.clientX,i.clientY),t.preventDefault(),t.stopPropagation(),!1};this._mCanvasView.addEventListener("touchmove",n,!1),this._mNativeSensors[1]=n;var s=function(){e.dispatchMotionEnd()};document.addEventListener("touchend",s,!1),document.addEventListener("touchcancel",s,!1),this._mNativeSensors[2]=s}}},i.exports=o}),define("system-core:system/uiService/keyGuard/keyGuard.js",function(t,e,i){var n=!1,o=t("base:widget/libs/jquerypacket.js"),s=function(){this._mPrivateFlags=0};s.prototype={onMount:function(){},onConnectivity:function(){},onKeyAction:function(){},onKeyEvent:function(){}};var a=function(){this._mPrivateFlags=0,this._mListeners=[],this._mHijacker=null,this._mHijackContext=null};a.EVENT_ARROW_UP=38,a.EVENT_ARROW_DOWN=40,a.EVENT_ARROW_LEFT=37,a.EVENT_ARROW_RIGHT=39,a.EVENT_PAGE_UP=33,a.EVENT_PAGE_DOWN=34,a.EVENT_ENTER=13,a.EVENT_ESCAPE=27,a.INSTALL=1,a.EXCLUSIVE_LOCK=2,a.prototype={acquire:function(t,e){if((this._mPrivateFlags&a.EXCLUSIVE_LOCK)==a.EXCLUSIVE_LOCK)throw new Error("exclusive lock must be relase before anybody else try to acqiure keyguard service");if(n&&console.log("execusive acquire ",e),this._install(),e){this._mPrivateFlags|=a.EXCLUSIVE_LOCK;for(var i=0,o=this._mListeners.length;o>i;i++)this._mListeners[i].onConnectivity(!1)}this._mListeners.push(t),t.onMount(!0)},release:function(t){for(var e=(this._mPrivateFlags&a.EXCLUSIVE_LOCK)==a.EXCLUSIVE_LOCK,i=!1,o=0,s=this._mListeners.length;s>o;o++)if(t==this._mListeners[o]){if(this._mListeners[o].onMount(!1),this._mListeners.splice(o,1),!e)break}else i&&this._mListners[o].onConnectivity(!0);e&&(this._mPrivateFlags&=~a.EXCLUSIVE_LOCK),this._mHijacker=null,this._mHijackContext=null,n&&console.log("relase keyguard and hijacker"),0==this._mListeners.length&&this._uninstall()},hijackKeyEvent:function(t,e){var i=(this._mPrivateFlags&a.EXCLUSIVE_LOCK)==a.EXCLUSIVE_LOCK;return!!i&&(this._mHijacker=t,this._mHijackContext=e,n&&console.log("hijack keyevent now"),!0)},dispatchKeyEvent:function(t){for(var e=(this._mPrivateFlags&a.EXCLUSIVE_LOCK)==a.EXCLUSIVE_LOCK,i=null,n=this._mListeners.length,o=n-1;o>=0;o--){i=this._mListeners[o];var s=!0;s&=t.shiftKey,s&=t.ctrlKey,s&=t.altKey;var r=!1;if(!s)switch(t.keyCode){case a.EVENT_ARROW_UP:case a.EVENT_ARROW_DOWN:case a.EVENT_ARROW_LEFT:case a.EVENT_ARROW_RIGHT:case a.EVENT_PAGE_UP:case a.EVENT_PAGE_DOWN:case a.EVENT_ENTER:case a.EVENT_ESCAPE:r=i.onKeyAction(t.keyCode)}if(r||(this._mHijacker?this._mHijacker.call(this._mHijackContext?this._mHijackContext:this,t.keyCode,{shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey}):i.onKeyEvent(t.keyCode,{shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey})),o==n-1&&e)break}},_install:function(){if((this._mPrivateFlags&a.INSTALL)!=a.INSTALL){var t=this;o(document).bind("keyup",function(e){t.dispatchKeyEvent(e)}),n&&console.log("Keyguard service installed"),this._mPrivateFlags|=a.INSTALL}},_uninstall:function(){(this._mPrivateFlags&a.INSTALL)==a.INSTALL&&(o(document).unbind("keyup"),n&&console.log("Keyguard service uninstalled"),this._mPrivateFlags&=~a.INSTALL)}},i.exports=a}),define("system-core:system/uiService/mouseWheelSensor/mouseWheelSensor.js",function(t,e,i){var n=function(t){this._mPrivateFlags=0,this._mView=t,this.onWheelChanged=null};n.FORWARD=1,n.BACKWARD=2,n.FLAG_PREVENT_DEFAULT=!1,n.BUILD=4,n.prototype={_init:function(){if((this._mPrivateFlags&n.BUILD)!=n.BUILD){var t=this,e=function(){var e=window.event?window.event:arguments[0],i=0;e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i&&t._sendWheelChangedMessage(i>0?n.BACKWARD:n.FORWARD,Math.abs(i)),n.FLAG_PREVENT_DEFAULT&&(e.preventDefault?e.preventDefault():e.returnValue=!1)};"undefined"!=typeof window.attachEvent?this._mView.attachEvent("onmousewheel",e):"onmousewheel"in window?this._mView.addEventListener("mousewheel",e,!1):"undefined"!=typeof window.addEventListener&&this._mView.addEventListener("DOMMouseScroll",e,!1),this._mPrivateFlags|=n.BUILD}},sense:function(){this._init()},setPreventDefault:function(t){n.FLAG_PREVENT_DEFAULT=t},_sendWheelChangedMessage:function(t,e){"function"==typeof this.onWheelChanged&&this.onWheelChanged.call(this,t,e)}},i.exports=n}),define("system-core:system/uiService/historyListManage/historyListManage.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/tools/tools.js"),s=t("base:widget/historyManager/historyManager.js"),a=t("system-core:system/baseService/message/message.js"),r=function(t){this.historyList=[],this.historyListTips=[],this.historyListParents=[],t||(t={}),t.container?(t.$container=n(t.container),t.renderDefaultDom=!0):t.renderDefaultDom=!1,this.config=t,this.init()};r.prototype.init=function(){if(this.config.renderDefaultDom){var t=this.config.$container;if(this.config&&this.config.needSwitch&&this.config.needSwitch===!0){t.find(".history-list-tips").before(l.historySwitchHTML()),this.$swicthButton=t.find(".historylistmanager-switch");var e=s.getCurrentParams();"grid"===e.vmode&&this.$swicthButton.addClass("current")}t.append(l.historyHTML()),this.$historyList=t.find('ul[node-type="historylistmanager-history"]'),this.$historySubList=t.find('li[node-type="historylistmanager-history-list"]'),this.bindEvent()}},r.prototype.bindEvent=function(){if(this.config.renderDefaultDom){var t=this;t.$historyList.delegate("a","click",function(){var e=n(this),i=parseInt(e.attr("data-deep"),10);t._goHistoryByDeep(i)}),this.config&&this.config.needSwitch&&this.config.needSwitch===!0&&t.config.$container.delegate(".historylistmanager-switch","click",function(){n(this).toggleClass("current");var t=n(this).hasClass("current"),e=s.getCurrentParams(),i=s.getCurrentModule();e.vmode=t?"grid":"list",a.trigger("system-change-view-mode-loadingtip"),s.getDefault().addHistory(s.buildHistory(i,e))})}},r.prototype._goHistoryByDeep=function(t){-1===t?this.goPrev():this.goToHistory(t+1)},r.prototype.addHistory=function(t,e){this.historyList.push(t),this.historyListTips.push(e),this.historyChange()},r.prototype.getPath=function(){var t=this.historyList.join("/");return t=("/"+t+"/").replace(/^\/+/,"/")},r.prototype.changeHistory=function(t,e,i){t.length!==e.length||t.length<=0||(this.historyList=t,this.historyListTips=e,this.historyListParents=i||[],this.historyChange())},r.prototype.goToHistory=function(t){t>=this.historyList.length||0>t||(this.historyList.splice(t,this.historyList.length),this.historyListTips.splice(t,this.historyListTips.length),this.historyChange())},r.prototype.goPrev=function(){this.goToHistory(this.historyList.length-1,"isPrev")},r.prototype.clear=function(){this.historyList.length=0,this.historyListTips.length=0,this.historyChange()},r.prototype.historyChange=function(){this.renderHistoryDOM(),this.onHistoryChange(this.historyList,this.historyListTips,this.historyListParents)},r.prototype.getFullPathStr=function(t,e){return e=Math.min(t.length,e),t.slice(0,e+1).join("/")},r.prototype.renderHistoryDOM=function(){var t=0;if(this.config.renderDefaultDom){for(var e=[],i=0;i<this.historyListTips.length;i++)n.inArray(this.historyListTips[i],this.historyListParents)<0?e.push(this.historyListTips[i]):t+=1;if(this.historyListParents.length>0&&(this.historyListTips=e),!(this.historyListTips.length>1))return void this.$historyList.hide();this.$historyList.show();var s,a,r=[],l=8,h=4,c=this.historyListTips.slice();""===c[c.length-1]&&(c.length=c.length-1),c.length<=2?l=30:c.length<=3&&(l=15);var u=(this.$historyList.width()-138,Math.max(c.length-h,0)),d=c;if(c.length>h){d=c.slice(u);var g=o.encodeHTML(this.getFullPathStr(c,c.length-h));r[r.length]='<span title="'+g+'">...</span><span class="historylistmanager-separator-gt">&gt;</span>'}for(var f=0,m=d.length;m>f;f++){s=d[f],a=s.length>l?s.substring(0,l)+"...":s,a=o.encodeHTML(a);var p=o.encodeHTML(this.getFullPathStr(c,f+u));r[r.length]=f!==m-1?'<a href="javascript:;" title="'+p+'" data-deep="'+(f+u)+'">'+a+'</a><span class="historylistmanager-separator-gt">&gt;</span>':'<span title="'+p+'">'+a+"</span>"}this.$historySubList.html(r.join("")),this.changeHistoryList()}},r.prototype.onHistoryChange=function(){},r.prototype.changeHistoryList=function(){this.$historyList.find(".listTitle").html(this.historyListTips[0]),this.onChangeHistoryList()},r.prototype.onChangeHistoryList=function(){};var l={indexArray:function(t,e){return n.inArray(t,e)},historySwitchHTML:function(){return'<a class="historylistmanager-switch"></a>'},historyHTML:function(){return'<ul class="historylistmanager-history" node-type="historylistmanager-history"><li><a data-deep="-1" href="javascript:;">返回上一级</a><span class="historylistmanager-separator">|</span></li><li node-type="historylistmanager-history-list"></li></ul>'}};i.exports=r}),define("system-core:system/uiService/list/listHeader.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=(t("system-core:system/baseService/message/message.js"),t("system-core:system/uiService/log/log.js").instanceForSystem),s=function(t){if(t===!1)this.hasInit=!1;else{if(!t||!t.container)throw new Error("config.container is empty!");this.config=t,this.$container=n(t.container),this.canTriggerOrder=t.canTriggerOrder,this.init()}};s.prototype.init=function(){if(this.hasInit!==!1){var t=this.$container;t.append(this.getHeaderDom()),this.config.columns&&this.buildHeader(this.config),this.bindEvent()}},s.prototype.buildHeader=function(t){if(this.hasInit!==!1){this.config=t;var e=this.$container.find(r.listCols),i=this.getHeaderColumnsDom();e.html(i),t.order&&this.updateOrder(t.order,t.desc,!0)}},s.prototype.bindEvent=function(){if(this.hasInit!==!1){var t=this.$container,e=this;t.delegate(r.col,"click",function(){var t=n(this),i=t.index();return e.operateClick(i,t),!1}).delegate(r.check,"click",function(){var t=(new Date).getTime(),i=n(this),s=i.closest(r.col),a=s.index();e.operateChecked(a,s);var l=(new Date).getTime();return o.send({name:"listAllSel",value:l-t}),o.send({name:"listAllSelCount",value:1}),!1})}},s.prototype.getHeaderDom=function(){if(this.hasInit!==!1){var t=[];return t.push(a.buildBefore()),t.push(a.buildAfter()),t.join("")}},s.prototype.getHeaderColumnsDom=function(){if(this.hasInit!==!1){for(var t,e=this.config.columns,i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push(a.buildItem(t,0===n,n===o-1));return i.join("")}},s.prototype.operateClick=function(t,e){if(this.hasInit!==!1){var i,n=this.config,o=n.order,s=n.desc;i=e.attr(r.dataKey),i===o&&(s=0===s?1:0),this.updateOrder(i,s,!1)}},s.prototype.operateChecked=function(t,e){if(this.hasInit!==!1){var i=e.hasClass(r.checked);this.onCheckChanged(!i)}},s.prototype.onCheckChanged=function(){},s.prototype.updateOrder=function(t,e,i){if(this.hasInit!==!1&&("function"!=typeof this.canTriggerOrder||this.canTriggerOrder()!==!1)){var n,o=this.$container,s=o.find('li[data-key~="'+t+'"]'),a=s.index();if(s.length<1)return!1;if(n=this.config.columns[a],n.order===!1)return!1;s.removeClass(r.ascend).removeClass(r.descend),s.siblings().removeClass(r.ascend).removeClass(r.descend),s.addClass(1===e?r.descend:r.ascend),this.config.order=t,this.config.desc=e,i||this.onOrderChange(t,e)}},s.prototype.changeChecked=function(t,e){if(this.hasInit!==!1){var i=this.$container,n=i.find(r.checkbox).parent(),o=i.find(r.checkCountTips),s=t>0&&e>0,a=t>0&&t===e;s?i.addClass(r.visibleOperate):i.removeClass(r.visibleOperate),a?n.addClass(r.checked):n.removeClass(r.checked),o.text(this.getCheckMsg(t,e))}},s.prototype.getCheckMsg=function(t){return this.hasInit!==!1?"已选中"+t+"个文件/文件夹":void 0},s.prototype.onOrderChange=function(){},s.prototype.getOperateContainer=function(){if(this.hasInit!==!1){var t=this.$container,e=t.find(r.operate);return e}},s.prototype.changeVmode=function(t){if(this.hasInit!==!1){var e=this.$container,i=e.find(r.gridCols),n=e.find(r.listCols);"list"===t.type?(i.hide(),n.show()):"grid"===t.type&&(i.show(),n.hide())}};var a={buildItem:function(t,e,i){var n="",o="col ",s="";return t.visible===!1&&(n+="display:none;"),e&&(o+="first-col "),t.order===!1&&(o+="order-disabled "),i&&(o+="last-col "),n+="width:"+t.width+"%;",t.checkbox&&(s=a.buildCheckbox()),'<li data-key="'+t.key+'" class="'+o+'" style="'+n+'">'+s+'<span class="text">'+t.name+'</span><span class="order-icon"></span><span class="icon up-icon icon-up"></span><span class="icon downtitle-icon icon-downtitle"></span></li>'},buildBefore:function(){return'<div class="list-header"><ul class="list-cols" node-type="cols">'},buildAfter:function(){return"</ul>"+a.buildGridCols()+a.buildOperateArea()+"</div>"},buildCheckbox:function(){return'<div node-type="check" class="col-item check"><span class="check-icon"></span><span class="check-all-text">全选</span><span class="icon checksmall icon-checksmall"></span></div>'},buildOperateArea:function(){return'<div class="list-header-operatearea global-clearfix"><span class="count-tips"></span><div class="list-header-operate"></div></div>'},buildGridCols:function(){return'<ul class="grid-cols" node-type="cols" style="display: none;"><li class="col first-col">'+a.buildCheckbox()+"</li></ul>"}},r={col:".col",check:".check",operate:".list-header-operate",visibleOperate:"list-header-visible-operate",checked:"checked",checkCountTips:".count-tips",dataKey:"data-key",ascend:"ascend",descend:"descend",checkbox:'div[node-type~="check"]',gridCols:".grid-cols",listCols:".list-cols"};i.exports=s}),define("system-core:system/uiService/loading/loading.tpl.js",function(t,e,i){var n={supportCss3:function(t){var e,i=["webkit","Moz","ms","o"],n=[],o=document.documentElement.style,s=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};for(e in i)n.push(s(i[e]+"-"+t));n.push(s(t));for(e in n)if(n[e]in o)return!0;return!1}};i.exports={container:function(t){return['<div class="loading-container">'+t+"</div>"].join("")},tpl:function(t,e,i,o){var t=t||"spinner",e=e||65,o=o||"#4288ed",s="",a="";switch(a="undefined"==typeof i?'<p class="loading-text">'+i+"</p>":i===!1?"":'<p class="loading-text">'+i+"</p>",s=n.supportCss3("stroke-dashoffset")?['<svg class="spinner" width="'+e+'px" height="'+e+'px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">','<circle class="path" fill="none" stroke-width="6"','stroke-linecap="round" cx="33" cy="33" r="30" style="stroke:'+o+'"></circle>',"</svg>"].join(""):'<img src="/box-static/system-core/system/uiService/loading/img/_nomd5/loading.gif" width="'+e+'" height="'+e+'"/>',t){case"spinner":return s+a;default:return""}}}}),define("system-core:system/uiService/loading/loading.js",function(t,e,i){var n=(t("base:widget/libs/jquerypacket.js"),t("system-core:system/uiService/loading/loading.tpl.js")),o=function(t){this.config(t),this.init()};o.prototype.config=function(t){var t=t||{};this.config=t,this.config.loadingType=t.loadingType||"spinner",this.config.size=t.size,this.config.text=t.text,this.config.color=t.color,this.config.$container=t.container||!1},o.prototype.doLoading=function(){var t=this.config.loadingType||"spinner",e=n.tpl(t,this.config.size,this.config.text,this.config.color);return this.config.$container?(this.config.$container.find("loading-container").length>0?this.config.$container.find("loading-container").replaceWith(n.container(e)):this.config.$container.append(n.container(e)),e):void 0},o.prototype.tpl=function(){var t=this.config.loadingType,e=n.tpl(t,this.config.size,this.config.text,this.config.color);return e},o.prototype.show=function(){this.config.$container.find(".loading-container").show()},o.prototype.hide=function(){this.config.$container.find(".loading-container").hide()},o.prototype.init=function(){return this.doLoading()},i.exports=o}),define("system-core:system/uiService/list/listView/listView.js",function(t,e,i){"use strict";var n=(t("base:widget/libs/jquerypacket.js"),function(){this.listsData=null,this.dataCount=0,this.itemHeight=null,this.mPrivateFlags=0,this.mCheckedChildren=[],this.CLONE_VIEW_BUILD=1,this.DATA_CHANGED=2,this.CHECKED_ALL=128,this.PRESERVE_CHECKED_STATE=256,this.LOCKED=512,this.FLAG_PREVENT_DEFAULT=!1});n.prototype={init:function(t){t=t||{},"function"==typeof t.buildView&&(this.buildView=t.buildView),"function"==typeof t.getView&&(this.getView=t.getView),"function"==typeof t.needOrNotLoadMore&&(this.needOrNotLoadMore=t.needOrNotLoadMore),"function"==typeof t.onComputeScrollbarChange&&(this.onComputeScrollbarChange=t.onComputeScrollbarChange),"function"==typeof t.onCheckeChanged&&(this.onCheckeChanged=t.onCheckeChanged),null!=t.$listViewOuter&&(this.$listViewOuter=t.$listViewOuter),this.bindEvent()},bindEvent:function(){},setBackedData:function(){},appendBackedData:function(){},updateBackedData:function(){},getBackedData:function(){return this.listsData},getElementsData:function(){return this.listsData},getElementDataByPosition:function(t){return this.listsData&&t<this.dataCount?this.listsData[t]:null},handleDataChanged:function(){(this.mPrivateFlags&this.PRESERVE_CHECKED_STATE)!==this.PRESERVE_CHECKED_STATE&&(this.mCheckedChildren.length=0,this.mPrivateFlags&=~this.CHECKED_ALL)},dispatchDataChanged:function(){this.mPrivateFlags|=this.DATA_CHANGED},getCount:function(){return this.dataCount},getViewCount:function(){return this.viewCount?this.viewCount:(this.viewCount=parseInt(this.$listViewOuter.height()/this.itemHeight,10),
this.viewCount)},setItemChecked:function(t,e){this.mCheckedChildren[t]=e;var i=(this.mPrivateFlags&this.CHECKED_ALL)===this.CHECKED_ALL;if(!e&&i){this.mPrivateFlags&=~this.CHECKED_ALL;for(var n=0,o=this.listsData.length;o>n;n++)n!==t&&(this.mCheckedChildren[n]=!0)}this.onCheckeChanged()},setItemsChecked:function(t){if(t){var e=this.getElementsData(),i=!0;if(null!=e)for(var n=0,o=e.length;o>n;n++)e[n].disableCheck?(i=!1,this.mCheckedChildren[n]=!1):this.mCheckedChildren[n]=!0;i?this.mPrivateFlags|=this.CHECKED_ALL:this.mPrivateFlags&=~this.CHECKED_ALL}else this.mPrivateFlags&=~this.CHECKED_ALL,this.mCheckedChildren.length=0;this.onCheckeChanged()},isItemChecked:function(t){var e=(this.mPrivateFlags&this.CHECKED_ALL)===this.CHECKED_ALL;return!!e||this.mCheckedChildren[t]===!0},isAllItemChecked:function(){return(this.mPrivateFlags&this.CHECKED_ALL)===this.CHECKED_ALL},getCheckedItems:function(){if(this.isAllItemChecked()){if(null==this.listsData)return[];for(var t=[],e=0,i=this.listsData.length;i>e;e++)t.push(this.listsData[e]);return t}var t=[];if(!this.listsData)return t;for(var e=0,i=this.mCheckedChildren.length;i>e;e++)this.mCheckedChildren[e]===!0&&t.push(this.listsData[e]);return t},getCheckedIndexs:function(){var t=[],e=this.isAllItemChecked();if(!this.listsData)return t;for(var i=0,n=this.mCheckedChildren.length;n>i;i++)(e||this.mCheckedChildren[i]===!0)&&t.push(i);return t},getFirstCheckedIndex:function(){if(this.isAllItemChecked())return 0;for(var t=0,e=this.mCheckedChildren.length;e>t;t++)if(this.mCheckedChildren[t]===!0)return t},onCheckeChanged:function(){},importCheckedState:function(){},resetList:function(){},getFirstPosition:function(){},addItemToFirst:function(){},layout:function(){},requestLayout:function(){},locked:function(){return(this.mPrivateFlags&this.LOCKED)===this.LOCKED},onScroll:function(){},lock:function(){},onSystemNotify:function(){},fixTargetPositionVisible:function(){},scrollToPosition:function(){},setPreventDefault:function(t){this.FLAG_PREVENT_DEFAULT=t}},i.exports=n}),define("system-core:system/uiService/list/listView/nativeListView.js",function(t,e,i){"use strict";var n=t("base:widget/libs/jquerypacket.js"),o=(t("system-core:system/baseService/message/message.js"),t("system-core:system/uiService/list/listView/listView.js")),s={getScrollTop:function(t){return t.scrollTop()},getScrollBottom:function(t){var e=t.height(),i=Math.max(t[0].scrollHeight,e),n=t.scrollTop(),o=Math.max(i-n-e,0);return o},getScrollPercent:function(t){var e=t.height(),i=Math.max(t[0].scrollHeight,e),n=t.scrollTop(),o=n/(i-e);return o},resolveHasScroll:function(t){return s.getScrollTop(t)>0||s.getScrollBottom(t)>0},getScrollBarWidth:function(){var t,e=document.createElement("div");return e.style.cssText="display:block;width:40px;height:40px;overflow-x:hidden;overflow-y:scroll;position:absolute;left:-20px;top:0px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,e.parentNode.removeChild(e),t}},a=function(t){o.call(this,t),this.startIndex=0,null!=t&&(this.init(t),this.initNativeList(t))};a.prototype=new o,a.prototype.constructor=a,n.extend(a.prototype,{initNativeList:function(t){null!=t.listContainer&&(this.listContainer=t.listContainer),"string"==typeof t.childrenClass&&(this.childrenClass=t.childrenClass),"string"==typeof t.listItemDomName&&(this.listItemDomName=t.listItemDomName),"function"==typeof t.onScroll&&(this.onScroll=t.onScroll),this.bindSubListEvent()},bindSubListEvent:function(){var t=this,e=80,i=-1,n=t.$listViewOuter,o=function(){if("complete"===document.readyState){clearTimeout(i),t.onScroll(),i=setTimeout(function(){s.getScrollPercent(n)>=.7&&t.needOrNotLoadMore()},e);var o=window.event?window.event:arguments[0];t.FLAG_PREVENT_DEFAULT&&o.wheelDelta<0&&s.getScrollBottom(n)<=0&&(o.preventDefault?o.preventDefault():o.returnValue=!1)}};"undefined"!=typeof window.attachEvent?n[0].attachEvent("onscroll",o):"undefined"!=typeof window.addEventListener&&n[0].addEventListener("scroll",o,!1),window.sidebar&&setTimeout(function(){n[0].scrollTo(1,1)},1e3),"undefined"!=typeof window.attachEvent?n[0].attachEvent("onmousewheel",o):"mousewheel"in window?n[0].addEventListener("mousewheel",o,!1):"undefined"!=typeof window.addEventListener&&n[0].addEventListener("DOMMouseScroll",o,!1)},setBackedData:function(t){this.locked()||(this.resetList(),this.listsData=[].concat(t),this.dataCount=null==t?0:t.length,this.startIndex=0,this.layout(t))},appendBackedData:function(t){return null==this.listsData||0===this.dataCount?void this.setBackedData(t):void(this.locked()||(this.startIndex=this.dataCount,this.listsData=this.listsData.concat(t),this.dataCount=this.listsData.length,this.layout(t)))},updateBackedData:function(t){this.locked()||(this.resetList(),this.listsData=[].concat(t),this.dataCount=null==t?0:t.length,this.startIndex=0,this.mPrivateFlags|=this.DATA_CHANGED,this.layout(t))},importCheckedState:function(t){if(t instanceof a){this.mCheckedChildren.length=0;for(var e=0,i=t.mCheckedChildren,n=i.length;n>e;e++)this.mCheckedChildren[e]=i[e];this.isAllItemChecked()===!0&&t.isAllItemChecked()===!1?this.mPrivateFlags&=~this.CHECKED_ALL:this.isAllItemChecked()===!1&&t.isAllItemChecked()===!0&&(this.mPrivateFlags|=this.CHECKED_ALL)}},onScroll:function(){},handleLockScroll:function(t){return t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),!1},lock:function(t,e){var i=this;t?(this.mPrivateFlags|=this.LOCKED,this.$listViewOuter.on("mousewheel DOMMouseScroll scroll",i.handleLockScroll)):(this.mPrivateFlags&=~this.LOCKED,this.$listViewOuter.off("mousewheel DOMMouseScroll scroll",i.handleLockScroll)),e!==!0&&this.onSystemNotify(this.NOTIFY_SYSTEM_LOCK,t)},resetList:function(){this.listsData=null,this.dataCount=0,this.mPrivateFlags&=~this.CLONE_VIEW_BUILD,this.mPrivateFlags&=~this.DATA_CHANGED,this.listContainer.innerHTML=""},onLayoutChange:function(){this.onScroll()},handleDataChanged:function(){(this.mPrivateFlags&this.PRESERVE_CHECKED_STATE)!==this.PRESERVE_CHECKED_STATE&&(this.mCheckedChildren.length=0,this.mPrivateFlags&=~this.CHECKED_ALL)},layout:function(t){(this.mPrivateFlags&this.DATA_CHANGED)===this.DATA_CHANGED&&this.handleDataChanged();var e=t.length||0;if(e>0){for(var i=this.startIndex||0,o=n("<div>"),s=this.buildView(),a=0;e>a;a++){var r=this.getView(null,s.cloneNode(!0),a+i,t[a]);o.append(r)}n(this.listContainer).append(o.children()),!this.itemHeight&&(this.itemHeight=n(this.listContainer).find(this.listItemDomName).eq(0).outerHeight()),this.onLayoutChange()}},getFirstPosition:function(){var t=this.$listViewOuter,e=n(this.listContainer),i=e.find(this.listItemDomName);if(i.length>0){var o=t.scrollTop(),s=Math.floor(o/this.itemHeight);return s}return-1},getRenderingChildByPosition:function(t){var e=this.getFirstPosition();return t>=0&&t<=e+this.getViewCount()?n(this.listContainer).find(this.childrenClass).eq(t).get(0):null},fixTargetPositionVisible:function(t){t+=1;var e=this.getFirstPosition(),i=this.getViewCount(),n=-1;return e+1>=t?n=t:t>e+i&&(n=t-i+1),n>=0&&(this.scrollToPosition(Math.min(n,this.dataCount)),!0)},scrollToPosition:function(t){return this.locked()?void 0:!(0>t||t>this.dataCount)&&(this.mPrivateFlags|=this.DATA_CHANGED,this.mPrivateFlags|=this.PRESERVE_CHECKED_STATE,this.$listViewOuter.scrollTop((t-1)*this.itemHeight),this.mPrivateFlags&=~this.PRESERVE_CHECKED_STATE,!0)}}),i.exports=a}),define("system-core:system/uiService/list/viewRecycler/viewRecycler.js",function(t,e,i){var n=function(){this._mRecycledViews=[],this._mActiveViews=[],this._mFirstPosition=0};n.prototype={add:function(t){this._mRecycledViews.push(t),t.parentNode.removeChild(t)},get:function(){if(0==this._mRecycledViews.length)return null;var t=this._mRecycledViews.pop();return t},scrapActiveViews:function(){var t=this._mActiveViews,e=t.length;if(0!=e){for(var i=0,n=t.length;n>i;i++)this._mRecycledViews.push(t[i]);for(;this._mRecycledViews.length>=e;){var o=this._mRecycledViews.pop();o&&(o.parentNode.removeChild(o),o=null)}}},getActiveView:function(t){var e=t-this._mFirstPosition,i=this._mActiveViews;if(0>e||e>i.length-1)return null;var n=i[e];return i[e]=null,n},preseveActiveViews:function(t,e){var i=this._mActiveViews;i.length=t.length;for(var n=0,o=t.length;o>n;n++)i[n]=t[n];this._mFirstPosition=e},clear:function(){this._mRecycledViews.length=0}},i.exports=n}),define("system-core:system/baseService/timerService/timerService.js",function(t,e,i){var n=function(t,e){this._timer=null,this._interval=t,this._actionListener=e,this._isAlive=!1,this._startTime=0};n.prototype={isAlive:function(){return this._isAlive},interrupt:function(){this._timer&&clearTimeout(this._timer),this._timer=null,this._isAlive=!1,this._startTime=0},setActionListener:function(t){"function"==typeof t&&(this._actionListener=t)},getActionListener:function(){return this._actionListener},start:function(){var t=this;this._timer=setTimeout(function(){t.interrupt(),t._actionListener.call(t)},this._interval),this._startTime=(new Date).getTime(),this._isAlive=!0},getElapsed:function(){return(new Date).getTime()-this._startTime},setInterval:function(t){"number"==typeof t&&(this._interval=t)},getInterval:function(){return this._interval}},i.exports=n}),define("system-core:system/uiService/iScrollbar/iScrollbar.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("system-core:system/baseService/timerService/timerService.js"),s=t("system-core:system/uiService/mouseWheelSensor/mouseWheelSensor.js"),a=function(t,e){this._mUI=t,this._mConfig=e||{},this._mThumbTop=0,this._mClickTimer=null,this._mPrivateFlags=0,this._mCoorX=-1,this._mCoorY=-1,this._mCoorWidth=0,this._mCoorHeight=0,this._mArrowScrollDir=-1,this._mDX=-1,this._mDY=-1,this._mConfig.defaultScroll&&this._initDefaultScroll(),this._init()};a.FORWARD=1,a.BACKWARD=2,a.AWAKE=4,a.THUMB_AWAKE=8,a.COUNTING=16,a.USING_SIMULATE_DRAG=32,a.START_DRAGGING=64,a.LOCKED=128,a.HAS_BORDER=256,a.CLICK_TIMEOUT=300,a.prototype={_initDefaultScroll:function(){var t=n(this._mUI.listContainer.parentNode);t.append('<div class="scrollbar" style="display:none" unselectable="on"><div id="scrollbarArrowUp" class="scrollbar-arrow scrollbar-arrow-up sprite" unselectable="on"></div><div class="scrollbar-tracker" unselectable="on"><div class="scrollbar-thumb" unselectable="on"></div></div><div id="scrollbarArrowDown" class="scrollbar-arrow scrollbar-arrow-down sprite" unselectable="on"></div></div>'),this._mUI.tracker=t.find(".scrollbar-tracker")[0],this._mUI.thumb=t.find(".scrollbar-thumb")[0],this._mUI.upArrow=t.find(".scrollbar-arrow-up")[0],this._mUI.downArrow=t.find(".scrollbar-arrow-down")[0],this._mUI.scrollbar=t.find(".scrollbar")[0]},_init:function(){this._mPrivateFlags|=a.AWAKE,this._mPrivateFlags|=a.THUMB_AWAKE,this._mPrivateFlags|=a.HAS_BORDER;var t=this;this._mUI.tracker&&(this._mUI.tracker.onclick=function(e){if(!t.locked()){var i=e?e:window.event,n=i.target||i.srcElement;if(n!=t._mUI.thumb){var o=parseInt(i.offsetY||i.layerY);(o<t._mThumbTop||o>t._mThumbTop+t._mUI.thumb.offsetHeight)&&(o>t._mThumbTop?t.onPageScroll(s.FORWARD):o<t._mThumbTop&&t.onPageScroll(s.BACKWARD))}}});var e=function(n){if((t._mPrivateFlags&a.COUNTING)==a.COUNTING){var o=n?n:window.event,s=o.clientX,r=o.clientY;(s<t._mCoorX||s>t._mCoorX+t._mCoorWidth||r<t._mCoorY||r>t._mCoorY+t._mCoorHeight)&&(t.abruptPersistArrowScroll(),t.onPersistArrowScrollEnd(),t._unlisten(document,"mousemove",e),t._unlisten(document,"mouseup",i))}},i=function(){if((t._mPrivateFlags&a.COUNTING)==a.COUNTING){var n=t._mArrowScrollDir;null!=t._mClickTimer&&t._mClickTimer.isAlive()?(t._mClickTimer.interrupt(),t.onArrowScroll(n)):t.onPersistArrowScrollEnd(n),t._mPrivateFlags&=~a.COUNTING,t._unlisten(document,"mousemove",e),t._unlisten(document,"mouseup",i)}},n=function(n){if(!t.locked()&&(t._mPrivateFlags&a.COUNTING)!=a.COUNTING){var s="up"==this.getAttribute("dir")?a.BACKWARD:a.FORWARD;t._mArrowScrollDir=s;var r=n?n:window.event;t._mCoorX=r.clientX-parseInt(r.offsetX||r.layerX),t._mCoorY=r.clientY-parseInt(r.offsetY||r.layerY),t._mCoorWidth=this.offsetWidth,t._mCoorHeight=this.offsetHeight,null==t._mClickTimer?t._mClickTimer=new o(a.CLICK_TIMEOUT,null):t._mClickTimer.interrupt(),t._mClickTimer.setActionListener(function(){t.onPersistArrowScrollStart(s)}),t._mClickTimer.start(),t._mPrivateFlags|=a.COUNTING,t._listen(document,"mousemove",e),t._listen(document,"mouseup",i)}};if(this._mUI.upArrow&&(this._mUI.upArrow.setAttribute("dir","up"),this._mUI.upArrow.onmousedown=n),this._mUI.downArrow&&(this._mUI.downArrow.setAttribute("dir","down"),this._mUI.downArrow.onmousedown=n),this._mUI.thumb&&this._mUI.tracker){var r=function(e){if((t._mPrivateFlags&a.START_DRAGGING)==a.START_DRAGGING){var i=e?e:window.event,n=i.clientX,o=i.clientY;t._onDragging(n,o)}i.preventDefault&&i.preventDefault()},l=function(){(t._mPrivateFlags&a.COUNTING)==a.COUNTING&&((t._mPrivateFlags&a.START_DRAGGING)==a.START_DRAGGING&&t._endDrag(),t._mPrivateFlags&=~a.COUNTING,t._unlisten(document,"mousemove",r),t._unlisten(document,"mouseup",l))};this._mUI.thumb.onmousedown=function(e){if(!t.locked()&&(t._mPrivateFlags&a.COUNTING)!=a.COUNTING){var i=e?e:window.event;t._mDX=i.clientX,t._mDY=i.clientY,t._startDrag(),t._listen(document,"mouseup",l),t._listen(document,"mousemove",r),t._mPrivateFlags|=a.COUNTING,i.preventDefault&&i.preventDefault()}}}},lock:function(t){t?(this._mPrivateFlags|=a.LOCKED,-1==this._mUI.scrollbar.className.indexOf("locked")&&(this._mUI.scrollbar.className+=" locked")):(this._mPrivateFlags&=~a.LOCKED,this._mUI.scrollbar.className=this._mUI.scrollbar.className.replace(" locked",""))},locked:function(){return(this._mPrivateFlags&a.LOCKED)==a.LOCKED},_startDrag:function(){this._mPrivateFlags|=a.START_DRAGGING},_endDrag:function(){this._mPrivateFlags&=~a.START_DRAGGING},onPageScroll:function(){},inSimulateDragging:function(){return(this._mPrivateFlags&a.USING_SIMULATE_DRAG)==a.USING_SIMULATE_DRAG},_onDragging:function(t,e){if(-1!=this._mDX&&-1!=this._mDY){var i=e-this._mDY,n=this._mThumbTop+i;n=Math.max(0,n),n=Math.min(n,this._mUI.tracker.offsetHeight-this._mUI.thumb.offsetHeight),this.inSimulateDragging()?this.onThumbStateChange(n,this._mThumbTop):this.setThumbState(n,null,!1)}this._mDX=t,this._mDY=e},_listen:function(t,e,i){"undefined"!=typeof t.addEventListener?t.addEventListener(e,i,!1):"undefined"!=typeof t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},_unlisten:function(t,e,i){"undefined"!=typeof t.removeEventListener?t.removeEventListener(e,i,!1):"undefined"!=typeof t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},abruptPersistArrowScroll:function(){return this._mPrivateFlags&=~a.COUNTING,!(null==this._mClickTimer||!this._mClickTimer.isAlive())&&(this._mClickTimer.interrupt(),!0)},onPersistArrowScrollStart:function(){},onPersistArrowScrollEnd:function(){},onArrowScroll:function(){},onScroll:function(){},awakeThumb:function(t){t?(this._mPrivateFlags|=a.THUMB_AWAKE,this._mUI.thumb.style.display="block"):(this._mPrivateFlags&=~a.THUMB_AWAKE,this._mUI.thumb.style.display="none")},isThumbAwake:function(){return(this._mPrivateFlags&a.THUMB_AWAKE)==a.THUMB_AWAKE},setThumbState:function(t,e,i){if(!this.locked()&&this.isThumbAwake()){var n=this._mThumbTop;if(null!=e){(this._mPrivateFlags&a.HAS_BORDER)==a.HAS_BORDER&&(e-=2,e=Math.max(0,e));try{this._mUI.thumb.style.height=e+"px"}catch(o){}}try{this._mUI.thumb.style.top=t+"px"}catch(o){}this._mThumbTop=t,i!==!0&&this.onThumbStateChange(t,n)}},onThumbStateChange:function(){},getTrackerHeight:function(){return this._mUI.tracker.offsetHeight},isAwake:function(){return(this._mPrivateFlags&a.AWAKE)==a.AWAKE},awake:function(t){t?(this._mPrivateFlags|=a.AWAKE,this._mUI.scrollbar.style.display="block"):(this._mPrivateFlags&=~a.AWAKE,this._mUI.scrollbar.style.display="none"),this.onAwake(t)},onAwake:function(){},reset:function(){this.setThumbState(0,0,!1)},setUsingSimulateDraging:function(t){t?this._mPrivateFlags|=a.USING_SIMULATE_DRAG:this._mPrivateFlags&=~a.USING_SIMULATE_DRAG},setBooleanFlags:function(t,e){e?this._mPrivateFlags|=t:this._mPrivateFlags&=~t},isInTheBottom:function(){if(0===this._mUI.tracker.offsetHeight||0===this._mUI.thumb.offsetHeight)return!1;var t=this._mUI.tracker.offsetHeight-this._mUI.thumb.offsetHeight-this._mThumbTop;return 0===Math.floor(Math.abs(t))},isInTheTop:function(){return this._mThumbTop<5}},i.exports=a}),define("system-core:system/uiService/list/listView/recycleListView.js",function(t,e,i){var n=!1,o=t("base:widget/libs/jquerypacket.js"),s=t("system-core:system/uiService/list/listView/listView.js"),a=t("system-core:system/uiService/list/viewRecycler/viewRecycler.js"),r=(t("system-core:system/uiService/keyGuard/keyGuard.js"),t("system-core:system/baseService/timerService/timerService.js")),l=t("system-core:system/uiService/mouseWheelSensor/mouseWheelSensor.js"),h=t("system-core:system/uiService/motionSensor/motionSensor.js"),c=t("system-core:system/uiService/iScrollbar/iScrollbar.js"),u=t("system-core:system/uiService/log/log.js").instanceForSystem,d=function(t){this._mFirstPosition=0,this._mChildrenCount=0,this._mWheelSensor=null,this._mViewRecycler=null,this._mMotionSensor=null,this._mChildren=[],this._mSmoothScroller=null,this._mSmoothScrollDelta=0,this._mSmoothScrollRemaining=0,this._mScrollDir=-1,this.LAYOUT_MODE_NORMAL=0,this.LAYOUT_MODE_FORCE_TOP=1,this.LAYOUT_MODE_FORCE_BOTTOM=2,this.LAYOUT_MODE_SPECIFIC=3,this.LAYOUT_MODE_FROM_SPECIFIC=4,this._mLayoutMode=this.LAYOUT_MODE_NORMAL,this._mSpecificPosition=-1,this.childrenMarginTop=null,this._mIScrollbar=null,this._mPersistScrollDir=-1,this._mSyncTop=0,this._mSyncPosition=-1,this._mSyncId=null,this._mDebugAlias=null,this.TOP=0,this.BOTTOM=1,this.NOTIFY_LIST_EMPTY=0,this.NOTIFY_LIST_REPAINT=1,this.NOTIFY_SYSTEM_LOCK=2,this.WHEEL_TO_PIXEL_RATIO=60,this.WHEEL_TO_PIXEL_RATIO_LOW=60,this.SMOOTH_SCROLL_DURATION=150,this.SMOOTH_SCROLL_INTERVAL=5,this.PIXEL_RATIO_ON_DRAGGING_SCALE=1,this._mScrollDir=-1,this._mWheelSensor=null,this.CLONE_VIEW_BUILD=1,this.DATA_CHANGED=2,this.BUILD=4,this.SMOOTH_SCROLLING=8,this.USING_SCROLLBAR=16,this.USING_KEYBOARD_DISPATCHER=32,this.USING_MOUSE_WHEEL_SENSOR=64,this.CHECKED_ALL=128,this.PRESERVE_CHECKED_STATE=256,this.LOCKED=512,this.USING_LOW_PIXEL_RATIO=1024,this.USING_TOUCH_SENSOR=2048,null!=t&&(s.call(this,t),this._mUI={defaultScroll:t.defaultScroll,listContainer:t.listContainer},this.init(t),this.initRecycleList(t))};d.prototype=new s,d.prototype.constructor=d,o.extend(d.prototype,{initRecycleList:function(t){"function"==typeof t.onComputeScrollbarState&&(this.onComputeScrollbarState=t.onComputeScrollbarState),t.booleanFlagParams instanceof Array&&this.setBooleanFlag(this[t.booleanFlagParams[0]],t.booleanFlagParams[1]),t.flagParams instanceof Array&&this.setFlags(t.flagParams)},setFlags:function(t){var e=t.length;this.flags=0;for(var i=0;e>i;i++)this.flags|=this[t[i]]},getView:function(){return null},deactivate:function(t){t?(this._mUI.listContainer.style.display="none",this.onSystemNotify(this.NOTIFY_LIST_EMPTY,!0,!0)):(this._mUI.listContainer.style.display="block",this.onSystemNotify(this.NOTIFY_LIST_EMPTY,!1,!0))},setBackedData:function(t){this.locked()||((this.mPrivateFlags&this.BUILD)!=this.BUILD&&(this._build(),this.mPrivateFlags|=this.BUILD),this.resetList(),this.listsData=t,this.dataCount=null==t?0:t.length,this.layout())},setBooleanFlag:function(t,e){e?this.mPrivateFlags|=t:this.mPrivateFlags&=~t},setUsingScrollbar:function(t){t?this.mPrivateFlags|=this.USING_SCROLLBAR:this.mPrivateFlags&=~this.USING_SCROLLBAR},isUsingScrollbar:function(){return(this.mPrivateFlags&this.USING_SCROLLBAR)==this.USING_SCROLLBAR},requestLayout:function(){this.locked()||(this.mPrivateFlags|=this.DATA_CHANGED,this._mLayoutMode=this.LAYOUT_MODE_SPECIFIC,this.mPrivateFlags|=this.PRESERVE_CHECKED_STATE,this.layout(),this.mPrivateFlags&=~this.PRESERVE_CHECKED_STATE)},kedData:function(t){if(null==this.listsData||0==this.dataCount)return void this.setBackedData(t);if(!this.locked()){for(var e=0,i=t.length;i>e;e++)this.listsData.push(t[e]);this.dataCount=this.listsData.length,this.requestLayout()}},updateBackedData:function(t,e){if(!this.locked()){if(this.listsData=t,this.dataCount=null==t?0:t.length,this.mPrivateFlags|=this.DATA_CHANGED,this._mLayoutMode=this.LAYOUT_MODE_SPECIFIC,null!=this._mSyncId){var i=this.lookupPositionForId(this._mSyncId);-1!=i&&(n&&console.log("recover a position at ",i),this._mSyncPosition=i)}e===!0?this.mPrivateFlags|=this.PRESERVE_CHECKED_STATE:(this.mCheckedChildren.length=0,this.onCheckeChanged()),this.layout(),e===!0&&(this.mPrivateFlags&=~this.PRESERVE_CHECKED_STATE)}},getIdForPosition:function(){return null},lookupPositionForId:function(){return-1},changeBackedData:function(t,e){this.locked()||(e===!0&&this.resetList(),this.listsData=t,this.dataCount=null==t?0:t.length,this.mPrivateFlags|=this.DATA_CHANGED,this._mLayoutMode=this.LAYOUT_MODE_FORCE_TOP,this.layout())},dispatchDataChanged:function(){this.mPrivateFlags|=this.DATA_CHANGED},getScrollTop:function(){return this._mFirstPosition*this.itemHeight+Math.abs(this.childrenMarginTop)},getFirstPosition:function(){return this._mFirstPosition},getFirstCheckedChild:function(){if(this.isAllItemChecked())return this._mChildren[this._mFirstPosition-this._mFirstPosition];for(var t=0,e=this.mCheckedChildren.length;e>t;t++)if(this.mCheckedChildren[t]===!0)return this._mChildren[t-this._mFirstPosition];return null},getRenderingChildAt:function(t){return 0==this._mChildren.length?null:0>t||t>this._mChildren.length-1?null:this._mChildren[t]},getRenderingChildByPosition:function(t){var e=t-this._mFirstPosition;return this.getRenderingChildAt(e)},getScrollbar:function(t){var e=this,i=this._mIScrollbar;return null==i&&t===!0&&(i=new c(this._mUI,{defaultScroll:this._mUI.defaultScroll}),i.onArrowScroll=function(t){e.arrowScroll(t),e._mPersistScrollDir=-1},i.onPersistArrowScrollStart=function(t){e._mPersistScrollDir=t,e.arrowScroll(t)},i.onPersistArrowScrollEnd=function(){e._mPersistScrollDir=-1},i.onPageScroll=function(t){e._mPersistScrollDir=-1,e.pageScroll(t)},i.setUsingSimulateDraging(!0),i.onThumbStateChange=function(t,n){var o=e.PIXEL_RATIO_ON_DRAGGING_SCALE*Math.abs(t-n),s=o*e.itemHeight*e.dataCount/i.getTrackerHeight(),a=t-n>0?l.FORWARD:l.BACKWARD;e.scrollBy(a,s)},this._mIScrollbar=i),i},onComputeScrollbarState:function(t,e,i){var n=this._mUI.listContainer.parentNode.offsetHeight,o=this.itemHeight,s=t.getTrackerHeight(),a=0==this.dataCount?0:s*n/(o*this.dataCount);a=Math.max(a,20);var r=0==this.dataCount?0:s*this.getScrollTop()/(o*this.dataCount);r=Math.min(r,s-a),r=Math.max(r,0),t.setThumbState(r,a,!0),this.onComputeScrollbarChange(t,e,i)},onComputeScrollbarChange:function(){},awakeScrollbar:function(t){if(t){var e=this.getScrollbar(!0);e.isAwake()||e.awake(!0)}else{var e=this.getScrollbar();null!=e&&e.isAwake()&&e.awake(!1)}},scrollToPosition:function(t){if(!this.locked()){if(0>t||t>this.dataCount)return!1;var e=t>=this._mFirstPosition;return this.mPrivateFlags|=this.DATA_CHANGED,this._mLayoutMode=this.LAYOUT_MODE_FROM_SPECIFIC,this._mSpecificPosition=t,this.childrenMarginTop=0,this._mUI.listContainer.style.marginTop="0",this.mPrivateFlags|=this.PRESERVE_CHECKED_STATE,this.layout(),this.mPrivateFlags&=~this.PRESERVE_CHECKED_STATE,e?this._fixTooHigh():this._fixTooLow(),!0}},pageScroll:function(t){if(!this.locked()){var e=this._mFirstPosition,i=-1;t==l.FORWARD?(i=e+this._mChildren.length,i=Math.min(i,this.dataCount-1)):(i=e-this._mChildren.length,i=Math.max(i,1)),this.scrollToPosition(i)}},arrowScroll:function(t){if(!this.locked()){var e=this.WHEEL_TO_PIXEL_RATIO;(this.mPrivateFlags&this.USING_LOW_PIXEL_RATIO)==this.USING_LOW_PIXEL_RATIO&&(e=this.WHEEL_TO_PIXEL_RATIO_LOW),this.smoothScroll(t,1*e)}},resetList:function(){if(this._mChildren.length=0,this.childrenMarginTop=0,this._mUI.listContainer.style.marginTop="0",this._mFirstPosition=0,this.listsData=null,this.dataCount=0,this._mSyncTop=0,this._mSyncPosition=-1,this._mSyncId=null,this.mPrivateFlags&=~this.CLONE_VIEW_BUILD,this.mPrivateFlags&=~this.DATA_CHANGED,this._mViewRecycler&&this._mViewRecycler.clear(),"TABLE"==this._mUI.listContainer.nodeName.toUpperCase())for(var t=this._mUI.listContainer.rows,e=t.length,i=e-1;i>=0;i--)this._mUI.listContainer.deleteRow(i);else this._mUI.listContainer.innerHTML=""},getBackedData:function(){return this.listsData},handleDataChanged:function(){(this.mPrivateFlags&this.PRESERVE_CHECKED_STATE)!=this.PRESERVE_CHECKED_STATE&&(this.mCheckedChildren.length=0,this.mPrivateFlags&=~this.CHECKED_ALL)},addItemToFirst:function(t){this.mCheckedChildren.unshift(t)},lock:function(t,e){var i=this.getScrollbar();t?(this.mPrivateFlags|=this.LOCKED,null!=i&&i.lock(!0)):(this.mPrivateFlags&=~this.LOCKED,null!=i&&i.lock(!1)),e!==!0&&this.onSystemNotify(this.NOTIFY_SYSTEM_LOCK,t)},onSystemNotify:function(){},locked:function(){return(this.mPrivateFlags&this.LOCKED)==this.LOCKED},fixTargetPositionVisible:function(t){t+=1;var e=this._mFirstPosition,i=this.getViewCount(),n=-1;return e+1>=t?n=t:t>e+i&&(n=t-i+1),n>=0&&(this.scrollToPosition(Math.min(n,this.dataCount)),!0)},hitInVisibleRegion:function(t){return t>=this._mFirstPosition&&t<this._mFirstPosition+this._mChildren.length},_correctSyncPosition:function(){this.listsData.length>0&&this._mSyncPosition>this.listsData.length-1&&(this._mSyncPosition=-1)},layout:function(){if(0==this.dataCount)return this.resetList(),this.onPositionChanged(this._mFirstPosition,this._mChildren.length),this._turnPluginDriverOnOrOff(),this.onSystemNotify(this.NOTIFY_LIST_EMPTY,!0),void this.onSystemNotify(this.NOTIFY_LIST_REPAINT,!0);if(this.onSystemNotify(this.NOTIFY_LIST_EMPTY,!1),this.onSystemNotify(this.NOTIFY_LIST_REPAINT,!0),(this.mPrivateFlags&this.DATA_CHANGED)==this.DATA_CHANGED&&this.handleDataChanged(),(this.mPrivateFlags&this.DATA_CHANGED)==this.DATA_CHANGED)for(var t=this._mChildren.length-1;t>=0;t--)this._mViewRecycler.add(this._mChildren.pop());else for(var t=this._mChildren.length-1;t>=0;t--)this._mViewRecycler.addActiveView(this._mChildren.pop());switch(this._mUI.listContainer.style.marginTop="0",this.childrenMarginTop=0,this._mLayoutMode){case this.LAYOUT_MODE_FROM_SPECIFIC:var e=this._mSpecificPosition-1;this._mFirstPosition=e,this._fillFromTop(e),this._mSyncTop=0,this._mSyncPosition=e,this._mSyncId=null;break;case this.LAYOUT_MODE_SPECIFIC:this._correctSyncPosition(),this._mFirstPosition=-1==this._mSyncPosition?0:this._mSyncPosition,this._mChildrenMarginTop=-Math.abs(this._mSyncTop),this._mUI.listContainer.style.marginTop=this.childrenMarginTop+"px",this._fillFromTop(this._mFirstPosition),this._fixTooHigh(),this._computeSyncState(),this._mSyncId=null;break;default:this._mFirstPosition=0,this._fillFromTop(0),this._mSyncTop=0,this._mSyncPosition=-1,this._mSyncId=null}this._mViewRecycler.scrapActiveViews(),this._mLayoutMode=this.LAYOUT_MODE_NORMAL,this._mSpecificPosition=-1,this.mPrivateFlags&=~this.DATA_CHANGED,this.onPositionChanged(this._mFirstPosition,this._mChildren.length),this._turnPluginDriverOnOrOff()},_turnPluginDriverOnOrOff:function(){var t=this.getScrollbar();if(t){var e=!1,i=this._mFirstPosition+this._mChildren.length;if(this._mFirstPosition>0||i<this.dataCount)e=!0;else if(i==this.dataCount){var n=this.childrenMarginTop,o=this._mChildren.length*this.itemHeight+n,s=this._mUI.listContainer.parentNode.offsetHeight;o>s?e=!0:0!==o&&"undefined"!=typeof this.needOrNotLoadMore&&this.needOrNotLoadMore()}t.awake(e)}},_makeAndAddView:function(t){var e=this._mViewRecycler.getActiveView(t);if(null==e){var i=this._mViewRecycler.get(t),e=null;e=null!=i?this.getView(this._mUI.listContainer,i,t):this.getView(this._mUI.listContainer,null,t)}if(null==e)throw new Error("can not obtain a view to build list item");return this.insertView(e,t),e},insertView:function(t,e){var i=e-this._mFirstPosition,n=0+this._mChildren.length-1>>1;i>n?this._mUI.listContainer.appendChild(t):this._mUI.listContainer.insertBefore(t,this._mChildren[0])},removeView:function(t){return this._mUI.listContainer.removeChild(t)},_fillFromTop:function(t){if(this._mUI){var e=this._mUI.listContainer.parentNode.offsetHeight,i=this.childrenMarginTop,n=t-this._mFirstPosition,o=this.itemHeight,s=0;if((this.mPrivateFlags&this.CLONE_VIEW_BUILD)!=this.CLONE_VIEW_BUILD){var a=this.getView(this._mUI.listContainer,null,0);this.insertView(a,0),this._mChildren[0]=a,o=this.itemHeight=this.itemHeight||a.offsetHeight,s=o,t++,n++,this.mPrivateFlags|=this.CLONE_VIEW_BUILD}else s=n*o+i;for(var r=null;e>s&&t<this.dataCount;)r=this._makeAndAddView(t),this._mChildren[n]=r,s+=o,t++,n++}},importCheckedState:function(t){if(t instanceof d){this.mCheckedChildren.length=0;for(var e=0,i=t.mCheckedChildren,n=i.length;n>e;e++)this.mCheckedChildren[e]=i[e];1==this.isAllItemChecked()&&0==t.isAllItemChecked()?this.mPrivateFlags&=~this.CHECKED_ALL:0==this.isAllItemChecked()&&1==t.isAllItemChecked()&&(this.mPrivateFlags|=this.CHECKED_ALL)}},_fillFromBottom:function(t){if(this._mUI){for(var e=(this._mUI.listContainer.parentNode.offsetHeight,this.childrenMarginTop),i=this.itemHeight,n=e,o=null;t>=0&&n>=0;)o=this._makeAndAddView(t),e-=i,this._mUI.listContainer.style.marginTop=e+"px",this._mChildren.unshift(o),n-=i,t--;this.childrenMarginTop=e,this._mFirstPosition=t+1}},fillGap:function(t){var e=this._mChildren.length;t==l.FORWARD?(this._fillFromTop(this._mFirstPosition+e),this._fixTooHigh()):(this._fillFromBottom(this._mFirstPosition-1),this._fixTooLow())},_fixTooLow:function(){var t=this._mChildren.length;if(!(0>=t)){var e=this.childrenMarginTop,i=this._mChildren.length*this.itemHeight+e,n=this._mUI.listOuterHeight=this._mUI.listOuterHeight||this._mUI.listContainer.parentNode.offsetHeight,o=e,s=o,a=this._mFirstPosition;0==a&&s>0&&(a+t==this.dataCount||i>n)&&(a+t==this.dataCount&&(s=Math.min(s,i-n)),e-=s,this._mUI.listContainer.style.marginTop=e+"px",this.childrenMarginTop=e,a+t<this.dataCount&&this._fillFromTop(a+t),this.onScrollToEdge(this.TOP))}},_fixTooHigh:function(){var t=this._mChildren.length;if(!(0>=t)){var e=this.childrenMarginTop,i=this._mChildren.length*this.itemHeight+e,n=this._mUI.listOuterHeight=this._mUI.listOuterHeight||this._mUI.listContainer.parentNode.offsetHeight,o=e,s=n-i,a=this._mFirstPosition;(a>0||0>o)&&s>0?(0==a&&(s=Math.min(s,Math.abs(o))),e+=s,this.childrenMarginTop=e,this._mUI.listContainer.style.marginTop=e+"px",a>0&&(this._fillFromBottom(a-1),this._adjustViewUpOrDown()),this.onScrollToEdge(this.BOTTOM)):this._mFirstPosition+t==this.dataCount&&i==n&&this.onScrollToEdge(this.BOTTOM)}},_adjustViewUpOrDown:function(){var t=this._mChildren.length;t>0&&this.childrenMarginTop>0&&(this.childrenMarginTop=0,this._mUI.listContainer.style.marginTop=this.childrenMarginTop+"px")},buildView:function(){return null},onScrollToEdge:function(){},onPositionChanged:function(t,e){(this.mPrivateFlags&this.USING_SCROLLBAR)==this.USING_SCROLLBAR&&(this.awakeScrollbar(!0),this.onComputeScrollbarState(this.getScrollbar(!0),t,e))},onKeyboardArrowDown:function(){this.arrowScroll(l.FORWARD)},onKeyboardArrowUp:function(){this.arrowScroll(l.BACKWARD)},onKeyboardPageUp:function(){this.pageScroll(l.BACKWARD)},onKeyboardPageDown:function(){this.pageScroll(l.FORWARD)},onScroll:function(t,e){var i=(new Date).getTime(),n=this._mFirstPosition,o=this._mChildren.length,s=this.childrenMarginTop,a=s,r=this._mChildren.length*this.itemHeight+s,h=this._mUI.listContainer.parentNode.offsetHeight;if(e=Math.min(e,h-1),t==l.FORWARD&&n+o==this.dataCount&&h>=r&&e>=0)return 0!=e;if(t==l.BACKWARD&&0==n&&a>=0&&e>=0)return 0!=e;var c=0;if(t==l.FORWARD)for(var d=0,g=this._mChildren.length;g>d&&(d+1)*this.itemHeight-Math.abs(s)<0;d++)s+=this.itemHeight,this._mUI.listContainer.style.marginTop=s+"px",this._mViewRecycler.add(this._mChildren.shift()),c++;else for(var d=this._mChildren.length-1;d>=0&&this.itemHeight*d+s>h;d--)this._mViewRecycler.add(this._mChildren.pop()),c++;t==l.FORWARD?s-=e:s+=e,this._mUI.listContainer.style.marginTop=s+"px",this.childrenMarginTop=s,t==l.FORWARD&&(this._mFirstPosition+=c),
r=this._mChildren.length*this.itemHeight+s,(s>0||h>r)&&this.fillGap(t),this.FLAG_PREVENT_DEFAULT&&this._mWheelSensor.setPreventDefault(this.FLAG_PREVENT_DEFAULT),this._computeSyncState(),this.onPositionChanged(this._mFirstPosition,this._mChildren.length);var f=(new Date).getTime();u.send({name:"listScrollTime",value:f-i})},_computeSyncState:function(){this._mSyncTop=this.childrenMarginTop,this._mSyncPosition=this._mFirstPosition;var t=this.getIdForPosition(this._mFirstPosition);null!=t&&(this._mSyncId=t)},_computeSmoothScrollArgs:function(t){var e=this.SMOOTH_SCROLL_DURATION;if(this._mSmoothScrollDelta=Math.ceil(t/(e/this.SMOOTH_SCROLL_INTERVAL)),this._mSmoothScrollDelta>=this.itemHeight)for(var i=10,n=0;this._mSmoothScrollDelta>=this.itemHeight;){if(n>=i)throw new Error("pixelDelta arg is not considered as legal");e*=2,this._mSmoothScrollDelta=Math.ceil(t/(e/this.SMOOTH_SCROLL_INTERVAL)),n++}},_clearSmoothScrollArgs:function(){this.mPrivateFlags&=~this.SMOOTH_SCROLLING,this._mSmoothScrollRemaining=this._mSmoothScrollDelta=0,this._mScrollDir=-1},stopSmoothScroll:function(){null!=this._mSmoothScroller&&(this._mSmoothScroller.interrupt(),this._clearSmoothScrollArgs())},_setupSmoothScrollArgs:function(t){var e=this;null==e._mSmoothScroller&&(e._mSmoothScroller=new r(e.SMOOTH_SCROLL_INTERVAL,function(){var t=!1;Math.abs(e._mSmoothScrollRemaining)<=Math.abs(e._mSmoothScrollDelta)?(t=e.onScroll(e._mScrollDir,e._mSmoothScrollRemaining),e._clearSmoothScrollArgs(),t||-1==e._mPersistScrollDir?-1==e._mPersistScrollDir:e.arrowScroll(e._mPersistScrollDir)):(e._mSmoothScrollRemaining-=e._mSmoothScrollDelta,t=e.onScroll(e._mScrollDir,e._mSmoothScrollDelta),this.start())})),e._computeSmoothScrollArgs(t),e._mSmoothScrollRemaining=t-e._mSmoothScrollDelta,e._mSmoothScroller.start(),e.onScroll(e._mScrollDir,e._mSmoothScrollDelta),e.mPrivateFlags|=e.SMOOTH_SCROLLING},smoothScroll:function(t,e){this.locked()||(this._mScrollDir=t,this._setupSmoothScrollArgs(e))},scrollBy:function(t,e){this.locked()||this.onScroll(t,e)},setUsingKeyboardDispatcher:function(t){t?this.mPrivateFlags|=this.USING_KEYBOARD_DISPATCHER:this.mPrivateFlags&=~this.USING_KEYBOARD_DISPATCHER},activateKeyguard:function(t,e){},isUsingKeyboardDispatcher:function(){return(this.mPrivateFlags&this.USING_KEYBOARD_DISPATCHER)==this.USING_KEYBOARD_DISPATCHER},setUsingMouseWheelSensor:function(t){if(t){this.mPrivateFlags|=this.USING_MOUSE_WHEEL_SENSOR;var e=this,i=new l(this._mUI.listContainer.parentNode);i.onWheelChanged=function(t,i){if(!e.locked()){var n=e.WHEEL_TO_PIXEL_RATIO;(e.mPrivateFlags&e.USING_LOW_PIXEL_RATIO)==e.USING_LOW_PIXEL_RATIO&&(n=e.WHEEL_TO_PIXEL_RATIO_LOW);var o=i*n;(e.mPrivateFlags&e.SMOOTH_SCROLLING)==e.SMOOTH_SCROLLING&&e.stopSmoothScroll(),e._mScrollDir=t,0!=e.itemHeight&&e.onScroll(e._mScrollDir,o)}},i.sense(),this._mWheelSensor=i}else this.mPrivateFlags&=~this.USING_MOUSE_WHEEL_SENSOR},_build:function(){this._mViewRecycler=new a;var t=this.flags;"undefined"!=typeof t&&((t&this.USING_MOUSE_WHEEL_SENSOR)==this.USING_MOUSE_WHEEL_SENSOR&&this.setUsingMouseWheelSensor(!0),(t&this.USING_SCROLLBAR)==this.USING_SCROLLBAR&&this.setUsingScrollbar(!0),(t&this.USING_KEYBOARD_DISPATCHER)==this.USING_KEYBOARD_DISPATCHER&&this.setUsingKeyboardDispatcher(!0),(t&this.USING_TOUCH_SENSOR)==this.USING_TOUCH_SENSOR&&h.hasMotionCampatibility()&&(n&&console.log("Motion Tracker Installed"),this.setUsingMotionSensor(!0)))},setUsingMotionSensor:function(t){if(t){this.mPrivateFlags|=this.USING_TOUCH_SENSOR;var e=new h(this._mUI.listContainer,h.VERTICAL),i=this;e.onMotion=function(t,e,n,o){i.locked()||((i.mPrivateFlags&i.SMOOTH_SCROLLING)==i.SMOOTH_SCROLLING&&i.stopSmoothScroll(),i._mScrollDir=o>0?l.BACKWARD:l.FORWARD,0==i.itemHeight)||i.onScroll(i._mScrollDir,Math.abs(o))},e.install(),this._mMotionSensor=e}else this.mPrivateFlags&=~this.USING_TOUCH_SENSOR},setDebugAlias:function(t){this._mDebugAlias=t},toString:function(){return this._mDebugAlias}}),i.exports=d}),define("system-core:system/uiService/list/listView/nativeGridView.js",function(t,e,i){"use strict";var n=t("base:widget/libs/jquerypacket.js"),o=t("system-core:system/uiService/list/listView/nativeListView.js"),s=function(t){o.call(this,t),null!=t&&this.initNativeGridView(t)};s.prototype=new o,s.prototype.constructor=s,n.extend(s.prototype,{initNativeGridView:function(t){this.mGridStep=0,"number"==typeof t.columnWidth&&(this.columnWidth=t.columnWidth)},setColumnsCount:function(){var t=n(this.listContainer).width();this.mGridStep=Math.max(parseInt(parseInt(t,10)/this.columnWidth,10),1)},getColumnsCount:function(){return this.mGridStep},fixTargetPositionVisible:function(t){var e=Math.floor(t/this.mGridStep);return e>=this.listsData.length&&(e=this.listsData.length-1),o.prototype.fixTargetPositionVisible.call(this,e)},getCountEx:function(){var t=0;if(null===this.listsData)return t;for(var e=0,i=this.listsData.length;i>e;e++)t+=this.listsData[e].length;return t},getElementsData:function(){var t=[];if(!this.listsData)return t;for(var e=0,i=this.listsData.length;i>e;e++)for(var n=0,o=this.listsData[e].length;o>n;n++)t.push(this.listsData[e][n]);return t},getGroupElementsData:function(){return this.listsData},setItemChecked:function(t,e){this.mCheckedChildren[t]=e;var i=(this.mPrivateFlags&this.CHECKED_ALL)===this.CHECKED_ALL;if(!e&&i){this.mPrivateFlags&=~this.CHECKED_ALL;for(var n=0,o=this.getElementsData().length;o>n;n++)n!==t&&(this.mCheckedChildren[n]=!0)}this.onCheckeChanged()},getCheckedItems:function(){var t=[];if(!this.listsData)return t;if(this.isAllItemChecked()){for(var e=0,i=this.listsData.length;i>e;e++)for(var n=0,o=this.listsData[e].length;o>n;n++)t.push(this.listsData[e][n]);return t}for(var s=this.listsData.length,e=0,i=this.mCheckedChildren.length;i>e;e++)if(this.mCheckedChildren[e]===!0){var a=Math.floor(e/this.mGridStep);if(a>=s)break;t.push(this.listsData[a][e%this.mGridStep])}return t},operateGroupdData:function(t){var e=null==t?0:t.length;if(0===e)return[];for(var i=[],n=0,o=this.mGridStep;e>o;){i[n]=[];for(var s=0;o>s;s++)i[n].push(t[n*o+s]);n++,e-=o}e>0&&(i[n]=[]);for(var a=0;e>0;)i[n].push(t[n*o+a]),e--,a++;return i},setBackedData:function(t){t=this.operateGroupdData(t),o.prototype.setBackedData.call(this,t)},appendBackedData:function(t){if(null==this.listsData||0===this.dataCount)return void this.setBackedData(t);var e=this.listsData[this.dataCount-1];e.length%this.mGridStep!==0&&(this.listsData.splice(-1),t=e.concat(t),this.fixLayoutByPosition(--this.dataCount)),t=this.operateGroupdData(t),o.prototype.appendBackedData.call(this,t)},updateBackedData:function(t,e){t=this.operateGroupdData(t),o.prototype.updateBackedData.call(this,t,e)},changeBackedData:function(t,e){t=this.operateGroupdData(t),o.prototype.changeBackedData.call(this,t,e)},fixLayoutByPosition:function(t){n(this.listContainer).find("dd").eq(t).remove()},getRenderingChildAt:function(t,e){if(0>t||t>this.dataCount)return null;var i=n(this.listContainer).find("dd").eq(t),o=i.children();return 0>e||e>o.length-1?null:o[e]},getRenderingChildByPosition:function(t){var e=Math.floor(t/this.mGridStep),i=t%this.mGridStep;return this.getRenderingChildAt(e,i)},getElementDataByPosition:function(t){var e=this.getElementsData();return e&&t<e.length?e[t]:null},getGridPosition:function(t,e){return e+t*this.mGridStep}}),i.exports=s}),define("system-core:system/uiService/list/listView/recycleGridView.js",function(t,e,i){var n=t("system-core:system/uiService/list/listView/recycleListView.js"),o=t("base:widget/libs/jquerypacket.js"),s=function(t){n.call(this,t),null!=t&&this.initRecycleGridView(t)};s.prototype=new n,s.prototype.constructor=s,o.extend(s.prototype,{initRecycleGridView:function(t){this._mGridStep=0,this.itemHeight=122,"number"==typeof t.columnWidth&&(this.columnWidth=t.columnWidth)},setConfig:function(t){n.prototype.setConfig.call(this,t),this.setColumnsCount()},setColumnsCount:function(){this._mGridStep=Math.max(parseInt(parseInt(this._mUI.listContainer.offsetWidth,10)/this.columnWidth,10),1)},getColumnsCount:function(){return this._mGridStep},scrollToPositionEx:function(t){var e=Math.floor(t/this._mGridStep)+1;return e>=this.listsData.length&&(e=this.listsData.length-1),e=Math.max(1,e),this.scrollToPosition(e)},fixTargetPositionVisible:function(t){var e=Math.floor(t/this._mGridStep);return e>=this.listsData.length&&(e=this.listsData.length-1),n.prototype.fixTargetPositionVisible.call(this,e)},getCountEx:function(){var t=0;if(null==this.listsData)return t;for(var e=0,i=this.listsData.length;i>e;e++)t+=this.listsData[e].length;return t},isFirstCheckedChildVisible:function(){for(var t=0,e=this.mCheckedChildren.length;e>t;t++)if(this.isItemChecked(t))return t/this._mGridStep>=this._mFirstPosition&&t/this._mGridStep<this._mFirstPosition+this._mChildren.length;return!1},getFirstCheckedChild:function(){for(var t=0,e=this.mCheckedChildren.length;e>t;t++)if(this.mCheckedChildren[t]===!0)return Math.floor(t/this._mGridStep)>=this._mFirstPosition&&Math.abs(Math.floor(t/this._mGridStep)-this._mFirstPosition)<this._mChildren.length?this._mChildren[Math.floor(t/this._mGridStep)-this._mFirstPosition].childNodes[t%this._mGridStep]:null;return null},getElementsData:function(){var t=[];if(!this.listsData)return t;for(var e=0,i=this.listsData.length;i>e;e++)for(var n=0,o=this.listsData[e].length;o>n;n++)t.push(this.listsData[e][n]);return t},getGroupElementsData:function(){return this.listsData},setItemChecked:function(t,e){this.mCheckedChildren[t]=e;var i=(this.mPrivateFlags&this.CHECKED_ALL)==this.CHECKED_ALL;if(!e&&i){this.mPrivateFlags&=~this.CHECKED_ALL;for(var n=0,o=this.getElementsData().length;o>n;n++)n!=t&&(this.mCheckedChildren[n]=!0)}this.onCheckeChanged()},getCheckedItems:function(){var t=[];if(!this.listsData)return t;if(this.isAllItemChecked()){for(var e=0,i=this.listsData.length;i>e;e++)for(var n=0,o=this.listsData[e].length;o>n;n++)t.push(this.listsData[e][n]);return t}for(var s=this.listsData.length,e=0,i=this.mCheckedChildren.length;i>e;e++)if(this.mCheckedChildren[e]===!0){var a=Math.floor(e/this._mGridStep);if(a>=s)break;t.push(this.listsData[a][e%this._mGridStep])}return t},operateGroupdData:function(t){var e=null==t?0:t.length;if(0==e)return[];for(var i=new Array,n=0,o=this._mGridStep;e>o;){i[n]=[];for(var s=0;o>s;s++)i[n].push(t[n*o+s]);n++,e-=o}e>0&&(i[n]=[]);for(var a=0;e>0;)i[n].push(t[n*o+a]),e--,a++;return i},setBackedData:function(t){t=this.operateGroupdData(t),n.prototype.setBackedData.call(this,t)},appendBackedData:function(t){return null==this.listsData||0==this.dataCount?void this.setBackedData(t):(t=this.operateGroupdData(t),void n.prototype.appendBackedData.call(this,t))},updateBackedData:function(t,e){t=this.operateGroupdData(t),n.prototype.updateBackedData.call(this,t,e)},changeBackedData:function(t,e){t=this.operateGroupdData(t),n.prototype.changeBackedData.call(this,t,e)},getRenderingChildAt:function(t,e){if(0==this._mChildren.length)return null;if(0>t||t>this._mChildren.length-1)return null;var i=this._mChildren[t],n=o(i).children();return 0>e||e>n.length-1?null:n[e]},getRenderingChildByPosition:function(t){var e=Math.floor(t/this._mGridStep),i=t%this._mGridStep;return e-=this._mFirstPosition,this.getRenderingChildAt(e,i)},getElementDataByPosition:function(t){var e=this.getElementsData();return e&&t<e.length?e[t]:null},getGridPosition:function(t,e){return e+t*this._mGridStep}}),i.exports=s}),define("system-core:system/uiService/list/listViewManager/listViewManager.js",function(t,e,i){"use strict";var n=t("base:widget/libs/jquerypacket.js"),o=t("system-core:system/uiService/list/listView/nativeListView.js"),s=t("system-core:system/uiService/list/listView/recycleListView.js"),a=t("system-core:system/uiService/list/listView/nativeGridView.js"),r=t("system-core:system/uiService/list/listView/recycleGridView.js"),l={conf:{currentList:null},checkListByViewMode:function(t,e){return"list"===e?t instanceof o||t instanceof s:t instanceof a||t instanceof r},checkListByType:function(t,e){return"recycle"===e?t instanceof s||t instanceof r:t instanceof o||t instanceof a},chagneListStyle:function(){l.conf.$listViewOuter.css("overflow-y","auto"),n(l.conf.listContainer).height("auto")},initList:function(){return"list"===l.conf.viewMode?"recycle"===l.conf.type?(l.conf.currentList=new s(l.conf),l.conf.currentList):(l.chagneListStyle(),l.conf.currentList=new o(l.conf),l.conf.currentList):"grid"===l.conf.viewMode?"recycle"===l.conf.type?(l.conf.currentList=new r(l.conf),l.conf.currentList):(l.chagneListStyle(),l.conf.currentList=new a(l.conf),l.conf.currentList):void 0},init:function(){if(null==l.conf.listContainer)throw new Error("[DOM listContainer] is must");if(null==l.conf.childrenClass)throw new Error("[childrenClass] is must");if(null==l.conf.listItemDomName)throw new Error("[listItemDomName] is must");return l.initList()}},h={init:function(t){return l.conf=n.extend({type:"native",viewMode:"list",listContainer:null,childrenClass:null,listItemDomName:null,$listViewOuter:t.listContainer&&n(t.listContainer.parentNode),buildView:function(){},getView:function(){},needOrNotLoadMore:function(){},onCheckedChanged:function(){}},t),l.init()},checkListByType:l.checkListByType,checkListByViewMode:l.checkListByViewMode};i.exports=h}),define("system-core:system/uiService/list/list.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/historyManager/historyManager.js"),s=t("system-core:system/uiService/historyListManage/historyListManage.js"),a=t("system-core:system/uiService/list/listHeader.js"),r=t("system-core:system/uiService/loading/loading.js"),l=t("system-core:system/uiService/list/listViewManager/listViewManager.js"),h=t("system-core:system/uiService/log/log.js").instanceForSystem,c=t("system-core:system/baseService/message/message.js"),u=t("system-core:system/uiService/tip/tip.js"),d=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURIComponent(i[2]):null},g=function(t,e){if(this.$container=null,this.config=e,!t||(this.$container=n(t)).length<=0)throw new Error("container is empty!");this.$loadingTips=null,this.$historyListRootPath=null,this.$emptyTips=null,this.$historyList=null,this.$listHeader=null,this.$listViewContainer=null,this.$gridViewContainer=null,this.historyList=null,this.currentKey="",this.listHeader=null,this.listTools=null,this.listLoading=null,this.listView=null,this.gridView=null,this._currentView=null,this._normalListModule="normal",this._recycleListModule="recycle",this._currentListModule=this._normalListModule,this.cache=null,this.currentCacheName=null,this.listLimit=100,this.tip=null,this.init()},f={moduleHistory:'<div node-type="module-history-list" class="module-history-list"><span class="history-list-dir">全部文件</span><span class="history-list-tips">获取更多数据...</span></div>',moduleHeader:'<div class="list-view-header"></div>',moduleListContainer:'<div class="list-view-container" style="display:none"><div node-type="module-list-view" class="module-list-view"><div class="list-view"></div></div></div>',moduleGridContainer:'<div class="grid-view-container"><div node-type="module-grid-view" class="module-grid-view"><div class="grid-view"></div></div></div>',moduleEmptyTips:'<div class="list-empty-tips"></div>'},m={loadingTips:".history-list-tips",historyListRootPath:".history-list-dir",emptyTips:".list-empty-tips",historyList:".module-history-list",listHeader:".list-view-header",listViewContainer:".list-view-container",gridViewContainer:".grid-view-container",listView:".list-view",gridView:".grid-view",moduleListView:".module-list-view",moduleGridView:".module-grid-view"};g.prototype.init=function(){this.buildDom(),this.initPlugin(),this.bindEvent()},g.prototype.buildDom=function(){var t=[],e=this.$container;t.push(f.moduleHistory),t.push(f.moduleHeader),t.push(f.moduleListContainer),t.push(f.moduleGridContainer),t.push(f.moduleEmptyTips),e.html(t.join("")),this.$loadingTips=e.find(m.loadingTips),this.$historyListRootPath=e.find(m.historyListRootPath),this.$emptyTips=e.find(m.emptyTips),this.$historyList=e.find(m.historyList),this.$listHeader=e.find(m.listHeader),this.$listViewContainer=e.find(m.listViewContainer),this.$gridViewContainer=e.find(m.gridViewContainer),this.$moduleListView=e.find(m.moduleListView),this.$moduleGridView=e.find(m.moduleGridView),this.resize(n(window).height()-e.offset().top)},g.prototype.resize=function(t){var e=this.getCurrentView();e&&(this.isGridMode()?(this.$container.height(t),e.setColumnsCount(),this.loadInitData()):(this.resizeScrollBar(t),e.requestLayout()))},g.prototype.resizeScrollBar=function(t){var e=this.$container;if("number"==typeof t||"string"==typeof t?e.height(t):t=e.height(),0===t)throw"[Error] list container's height is 0, need to set";this.$moduleGridView.height(t-83),this.$moduleListView.height(t-83),this.$moduleGridView.find(".scrollbar-tracker").height(t-83-2),this.$moduleListView.find(".scrollbar-tracker").height(t-83-2)},g.prototype.getCurrentView=function(){return this._currentView};var p=null;g.prototype.changeCache=function(t){this.cache=t,this.cache.onBeforeGetCacheData(function(t){p=t}),this.historyList&&this.historyList.clear()},g.prototype.addHistory=function(t,e){this.historyList&&this.historyList.addHistory(t,e)},g.prototype.getHistoryIds=function(){return this.historyList.historyList},g.prototype.getHistoryList=function(){return this.historyList},g.prototype.getHistoryPath=function(){var t=this.historyList.getPath();return/\S\/+$/.test(t)&&(t=t.replace(/\/+$/,"")),t},g.prototype.changeHistory=function(t,e,i){this.historyList&&this.historyList.changeHistory(t,e,i)},g.prototype.historyChange=function(t,e){var i,n=!1;0!==t.length&&(i=this.currentKey,this.currentKey=t.join("/"),t.length>1&&(this.currentKey=this.currentKey.substring(1)),n=i!==this.currentKey||this.currentCacheName!==this.cache.cacheName,n&&("/"!==this.currentKey||""!==i||null!==this.currentCacheName&&this.currentCacheName!==this.cache.cacheName||(n=!1)),this.currentCacheName=this.cache.cacheName,n&&this.setItemsChecked(!1,!0),this.cache.updateKey(this.currentKey),this.$historyListRootPath.html(e[0]),this.loadInitData(),n&&this.onHistoryChange(t,e))},g.prototype.getCurrentDataList=function(){return this.getCurrentView().getElementsData()},g.prototype.refreshList=function(){this.historyList&&this.historyList.historyChange()},g.prototype.loadInitData=function(){var t=(new Date).getTime(),e=this;this.updateLoadingTips(g.LOAD_ING),this.getCurrentView().setBackedData([]),this.updateListLoading(g.LOAD_ING);var i=o.getCurrentModule(),n=o.getCurrentParams().path;this.cache.getCacheData(-1,function(s,a,r,u){if(i===o.getCurrentModule()&&n===o.getCurrentParams().path){if(0===s.length?(e.$listHeader.hide(),e.updateListLoading(g.LOAD_EMPTY)):(e.$listHeader.show(),e.updateListLoading()),e.updateLoadingTips(a?g.LOAD_PART:g.LOAD_ALL,s.length),e.resizeScrollBar(),l.checkListByType(e.listView,"recycle")||s.length<=e.listLimit)e.getCurrentView().setBackedData(s);else{var d=s.slice(0,e.listLimit),f=s.slice(e.listLimit);e.getCurrentView().setBackedData(d),setTimeout(function(){e.getCurrentView().appendBackedData(f),c.trigger("system-change-view-mode-loadingtip-close")},13)}e.onLoadedCallBack(s,u);var m=(new Date).getTime();h.send({name:"listInitTime",value:m-t})}})},g.prototype.loadMoreData=function(){var t=this;this.cache.hasMoreData()&&(this.updateLoadingTips(g.LOAD_ING),this.cache.getCacheData(-2,function(e){t.cache.getCacheData(-1,function(i,o,s){if(n.stringify(p)===n.stringify(s)){if(i.length<100&&o===!0)return void t.loadMoreData();t.updateLoadingTips(o?g.LOAD_PART:g.LOAD_ALL,i.length),t.resizeScrollBar(),t.updateListLoading(),l.checkListByType(t.listView,"recycle")?t.getCurrentView().updateBackedData(i,!0):t.getCurrentView().appendBackedData(e),o===!0&&t.onLoadedCallBack(e),t.updateHeaderChecked()}})}))},g.LOAD_ING=0,g.LOAD_PART=1,g.LOAD_ALL=2,g.LOAD_FAILED=3,g.LOAD_EMPTY=4,g.prototype.updateListLoading=function(t){var e=this,i="",n=e.listLoading.tpl();switch(t){case g.LOAD_ING:i='<div class="tip-text">'+n+"</div>";break;case g.LOAD_FAILED:i='<div class="tip-text">列表加载失败</div>'}return t===g.LOAD_EMPTY?void this.listEmptyTip(this.$emptyTips):void(i?this.$emptyTips.html(i).css("visibility","visible"):this.$emptyTips.css("visibility","hidden"))},g.prototype.listEmptyTip=function(t){t.html('<span class="empty-text">列表数据为空</span>').show()},g.prototype.fixTargetPositionVisible=function(t){var e=this.getCurrentView();return e.fixTargetPositionVisible(t)},g.prototype.showErrorTips=function(t){this.updateListLoading(g.LOAD_FAILED),this.updateLoadingTips(g.LOAD_FAILED,0,t)},g.prototype.updateLoadingTips=function(t,e){var i="";switch(t){case g.LOAD_ING:i="获取更多数据&hellip;";break;case g.LOAD_PART:i="已加载"+e+"个";break;case g.LOAD_ALL:i="已全部加载，共"+e+"个";break;case g.LOAD_FAILED:i="加载失败"}this.$loadingTips.html(i)},g.prototype.onHistoryChange=function(){},g.prototype.onLoadedCallBack=function(){},g.prototype.setViewModule=function(t){if(!(null!==this.gridView&&this._currentView===this.gridView&&"grid"===t||null!==this.listView&&this._currentView===this.listView&&"list"===t)){if("grid"===t)this.$listViewContainer.hide(),this.$gridViewContainer.show(),null===this.gridView&&this.initGridView(),this.gridView.setColumnsCount(),this._currentView=this.gridView,this.listView&&this.gridView.importCheckedState(this.listView);else{if("list"!==t)return;this.$gridViewContainer.hide(),this.$listViewContainer.show(),null===this.listView&&this.initListView(),this._currentView=this.listView,this.gridView&&this.listView.importCheckedState(this.gridView)}this.onViewModuleChange(t)}},g.prototype.onViewModuleChange=function(){},g.prototype.setListModule=function(t){var e=this.cache&&this.cache.config.params;if(this._currentListModule!==t||!("normal"===t&&0===e.include||"recycle"===t&&1===e.include)){if(this._currentListModule=t,this.cache&&"function"==typeof this.cache.getCacheConfig){var i=this.cache.getCacheConfig();this.cache.clearCacheData(),i.params.include=t===this._normalListModule?0:1}this.onListModuleChange(t)}},g.prototype.getListModule=function(){return this._currentListModule},g.prototype.onListModuleChange=function(){},g.prototype.isGridMode=function(){return l.checkListByViewMode(this.getCurrentView(),"grid")},g.prototype.getCheckedItems=function(){return this.getCurrentView().getCheckedItems()},g.prototype.getFirstPosition=function(){return this.getCurrentView().getFirstPosition()},g.prototype.getDomByPosition=function(t){return this.getCurrentView().getRenderingChildByPosition(t)},g.prototype.getElementDataByPosition=function(t){return this.getCurrentView().getElementDataByPosition(t)},g.prototype.getCheckedIndexs=function(){return this.getCurrentView().getCheckedIndexs()},g.prototype.setItemsChecked=function(t,e){this.getCurrentView().setItemsChecked(t),e||this.getCurrentView().requestLayout()},g.prototype.setEachItemChecked=function(t,e){this.setItemsChecked(!1,!0);for(var i=0;i<t.length;i++)this.getCurrentView().setItemChecked(t[i],e)},g.prototype.setSingleItemChecked=function(t){this.getCurrentView().setItemsChecked(!1),this.getCurrentView().setItemChecked(t,!0)},g.prototype.setItemChecked=function(t,e){this.getCurrentView().setItemChecked(t,e),this.getCurrentView().requestLayout()},g.prototype.addItemToFirst=function(t){this.getCurrentView().addItemToFirst(t)},g.prototype.isItemChecked=function(t){return this.getCurrentView().isItemChecked(t)},g.prototype.addItemToFirst=function(t){this.getCurrentView().addItemToFirst(t)},g.prototype.getGridPostiion=function(t,e){return this.getCurrentView()&&"function"==typeof this.getCurrentView().getGridPosition?this.getCurrentView().getGridPosition(t,e):-1},g.prototype.onOrderChange=function(t,e){if(this.cache&&"function"==typeof this.cache.getCacheConfig){var i=this.cache.getCacheConfig();i.params.order=t,i.params.desc=e,this.checkLocalSort(t,e)?this.localSort(this.cache,t,e):this.cache.clearCacheData(),this.config.headerConfig&&"function"==typeof this.config.headerConfig.operateOrderKey&&this.config.headerConfig.operateOrderKey(i.params),this.refreshList(),this.onListOrderChange(t,e)}},g.prototype.onListOrderChange=function(){},g.prototype.changeHeaderConfig=function(t){this.config.headerConfig=t,this.listHeader.buildHeader(t)},g.prototype.checkLocalSort=function(){return!1},g.prototype.localSort=function(){},g.prototype.checkedChanged=function(){0!==n("#export_menu").length&&n("#export_menu").remove(),this.updateHeaderChecked(),this.listTools&&this.listTools.filesSelect(this.getCheckedItems()),c.trigger("system-checked-changed",{data:this.getCheckedItems()})},g.prototype.setListTools=function(t){t&&(this.listTools=t,this.listTools.hide())},g.prototype.updateHeaderChecked=function(){var t,e=this.getCurrentView().getElementsData(),i=0;if(e&&this.isAllItemChecked())for(var n=0;n<e.length;n++)e[n].disableCheck||i++;else null!=e&&(i=e.length);t=this.isAllItemChecked()?i:this.getCheckedIndexs().length,this.listHeader&&this.listHeader.changeChecked(t,i),this.onCheckeChanged(t,i)},g.prototype.isAllItemChecked=function(){return this.getCurrentView().isAllItemChecked()},g.prototype.isLocked=function(){return this.listView?this.listView.locked():!!this.gridView&&this.gridView.locked()},g.prototype.lock=function(t){this.listView&&this.listView.lock(t,!1),this.gridView&&this.gridView.lock(t,!1),this.onLockChanged(t)},g.prototype.onLockChanged=function(){},g.prototype.onCheckeChanged=function(){},g.prototype.onHeaderCheckChanged=function(t){this.getCurrentView().locked()||(t?(this.$listViewContainer.find(".list-view-item").addClass("item-active"),this.$gridViewContainer.find(".grid-view-item").addClass("item-active")):(this.$listViewContainer.find(".list-view-item").removeClass("item-active"),this.$gridViewContainer.find(".grid-view-item").removeClass("item-active")),this.setItemsChecked(t,!0))},g.prototype.initPlugin=function(){var t=this;if(this.config.historyConfig){var e=this.config.historyConfig;e.container=this.$container.find(m.historyList),this.historyList=new s(e),this.historyList.onHistoryChange=function(e,i){t.historyChange.call(t,e,i)},this.historyList.goToHistory=function(e){t.goToHistory(e)},this.historyList.onChangeHistoryList=function(){"function"==typeof t.onChangeHistoryList&&t.onChangeHistoryList()}}var i=this.config.headerConfig;"undefined"==typeof i&&(i={}),i.container=this.$container.find(m.listHeader),i.containerSelector=m.listHeader,this.listHeader=new a(i),this.listHeader.onOrderChange=function(e,i){t.onOrderChange.call(t,e,i)},this.listHeader.getCheckMsg=function(e,i){return t.getCheckMsg.call(t,e,i)},this.listHeader.onCheckChanged=function(e){t.onHeaderCheckChanged.call(t,e)},this.config.defaultViewModle=this.config.defaultViewModle||"list",this.listLoading=new r({size:26,text:!1}),this.setViewModule(this.config.defaultViewModle),c.listen("system-change-view-mode-loadingtip",function(){var e=t.getCurrentView()?t.getCurrentView().getElementsData():[];null==e&&(e=[]),!l.checkListByType(t.listView,"recycle")&&e.length>=1500&&(this.tip=u.show({mode:"loading",msg:"正在切换",autoClose:!1}))}),c.listen("system-change-view-mode-loadingtip-close",function(){this.tip&&this.tip.hide()})},g.prototype.updateOrder=function(t,e){void 0===e&&(e=this.cache.getCacheConfig().params.desc?0:1),this.listHeader?this.listHeader.updateOrder(t,e):this.onOrderChange(t,e)},g.prototype.checkLowBrowser=function(){var t="8.0",e=navigator.userAgent;return!!((window.ActiveXObject||"ActiveXObject"in window)&&/MSIE ([^;]+)/.test(e)&&parseFloat(RegExp.$1,10)<=t)},g.prototype.initListView=function(){var t=this,e=this.config.listViewBuilder,i=n.extend({type:"native",viewMode:"list",listContainer:this.$container.find(m.listView)[0],childrenClass:".list-view-item",listItemDomName:"dd",buildView:function(i,n,o){return e.buildView.call(t.listView,i,n,o)},getView:function(i,n,o,s){return e.getView.call(t.listView,i,n,o,s)},needOrNotLoadMore:function(){t.cache.hasMoreData()&&t.loadMoreData()},onCheckeChanged:function(){t.checkedChanged()},onScroll:function(){"function"==typeof e.onScroll&&e.onScroll.call(t.listView,this.getCount())}},this.config.listConfig);(this.checkLowBrowser()||"recycle"===i.type||"recycle"===d("listtype"))&&(i=n.extend(i,{type:"recycle",booleanFlagParams:["USING_LOW_PIXEL_RATIO",!0],flagParams:["USING_MOUSE_WHEEL_SENSOR","USING_SCROLLBAR","USING_KEYBOARD_DISPATCHER","USING_TOUCH_SENSOR"],onComputeScrollbarChange:function(i,o,s){if(i.isInTheTop()?n(m.listHeader).addClass("is-in-top").removeClass("is-not-top"):n(m.listHeader).removeClass("is-in-top").addClass("is-not-top"),o>0&&this.getCount()>0){var a=parseFloat((o+s)/this.getCount(),10);a>.7&&t.loadMoreData()}else i.isInTheBottom()&&t.cache.hasMoreData()&&t.loadMoreData();"function"==typeof e.onScroll&&e.onScroll.call(t.listView,this.getCount())}})),this.listView=l.init(i),this.listView.parent=t},g.prototype.initGridView=function(){var t=this,e=this.config.gridViewBuilder,i=n.extend({type:"native",viewMode:"grid",listContainer:this.$container.find(m.gridView)[0],childrenClass:".grid-view-item",listItemDomName:"dd",columnWidth:this.config.gridConfig.columnWidth||130,buildView:function(i,n,o){return e.buildView.call(t.gridView,i,n,o)},getView:function(i,n,o){return e.getView.call(t.gridView,i,n,o)},needOrNotLoadMore:function(){t.cache.hasMoreData()&&t.loadMoreData()},onCheckeChanged:function(){t.checkedChanged()},onScroll:function(){"function"==typeof e.onScroll&&e.onScroll.call(t.gridView,this.getCount())}},this.config.gridConfig);(this.checkLowBrowser()||"recycle"===i.type||"recycle"===d("listtype"))&&(i=n.extend(i,{type:"recycle",booleanFlagParams:["USING_LOW_PIXEL_RATIO",!0],flagParams:["USING_MOUSE_WHEEL_SENSOR","USING_SCROLLBAR","USING_KEYBOARD_DISPATCHER","USING_TOUCH_SENSOR"],onComputeScrollbarChange:function(i,o,s){if(i.isInTheTop()?n(m.listHeader).addClass("is-in-top").removeClass("is-not-top"):n(m.listHeader).removeClass("is-in-top").addClass("is-not-top"),o>0&&this.getCount()>0){var a=parseFloat((o+s)/this.getCount(),10);a>.7&&t.loadMoreData()}else i.isInTheBottom()&&t.cache.hasMoreData()&&t.loadMoreData();"function"==typeof e.onScroll&&e.onScroll.call(t.gridView,this.getCount())}})),this.gridView=l.init(i),this.gridView.parent=t},g.prototype.bindEvent=function(){},g.prototype.getColumnsCount=function(){return this.isGridMode()?this.getCurrentView().getColumnsCount():1},g.prototype.extend=function(t){if("object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},g.prototype.goToHistory=function(){},i.exports=g}),define("system-core:system/uiRender/buttonBox/buttonBox.js",function(t,e,i){var n=!1,o=t("base:widget/libs/jquerypacket.js"),s=t("system-core:system/baseService/message/message.js"),a=t("base:widget/tools/tools.js"),r=t("system-core:context/context.js").instanceForSystem,l=function(t){this.startTime=(new Date).getTime(),this.limit=t&&t.limit||10,this.name=t&&t.name||"",this.alwaysShow=t&&t.alwaysShow||!1,this.autoWidth=t&&t.autoWidth||!1,this.paddingLeft=!(!t||isNaN(t.paddingLeft))&&t.paddingLeft,this.$container=o(t.container).css({"white-space":"nowrap",position:"relative"}),this.$positionMark=o('<div class="button-box-mark" style="display:inline-block;*display:inline;*zoom:1;width:1px;height:1px;line-height:0;"></div>'),this.$box=o('<div class="'+t.className+'" style="position:absolute;top:0;"></div>').css({"padding-top":this.$container.css("padding-top"),"line-height":"normal"}),this.$canvas=null,this.$container.append(this.$positionMark),this.$container.append(this.$box),this.buttonsData=t.buttons,this.showNum=0,this.resize=t.resize||!1,this.outSize=t.outSize||0,this.containerPadding=null,this.buttons=[],this.buttonsWidth=0,this.moreButton=null,this.moreButtonItem=[],this.moreNum=0,this.specifiedTypeButton=[],this.specifiedDirButton=[],this.limitNumberButton=[],this.numberSwitchButton=[],this.initData(),l.instances.push(this)};l.instances=[],l.declareMod=[],l.prototype.initData=function(){if(!this.buttonsData)return void console.warn("[LOG FROM BUTTONBOX] key `buttons` is needed.");
for(var t=this.orderButtons(this.buttonsData),e=0,i=t.length;i>e;e++){if(t[e].templateVar){var o=!1;for(var a in t[e].templateVar)if(t[e].templateVar.hasOwnProperty(a)&&yunData[a]!=t[e].templateVar[a]){o=!0;break}if(o===!0)continue}var l=this.buttonInstance(t[e]);l.appendTo(this.$box),n&&console.log("按钮宽度："+l.width),l.isShow&&(this.buttonsWidth+=l.width),"function"==typeof t[e].render?t[e].render({$dom:l.dom,button:l}):"string"==typeof t[e].render&&s.trigger("plugin:"+t[e].pluginId,{run:t[e].render,$dom:l.dom,button:l})}this.initMoreButton(),this.moreButton.isShow&&(this.buttonsWidth+=this.moreButton.width);var h=(new Date).getTime()-this.startTime;r.log.send({name:"buttonBoxCreate",value:h})},l.prototype.orderButtons=function(t){return t.sort(function(t,e){return t.index-e.index}),t},l.prototype.buttonInstance=function(t){var e=[{},{}],i=t.title,o=t.icon;"object"==typeof t.title&&t.title.length&&(2===t.title.length&&(e[0].title=t.title[0],e[1].title=t.title[1]),i=t.title[0]),"object"==typeof t.icon&&t.icon.length&&(2===t.icon.length&&(e[0].icon=t.icon[0],e[1].icon=t.icon[1]),o=t.icon[0]),t.title=i,t.icon=o,this.limit<=this.showNum&&"dropdown"!==t.type?t.display="none":this.showNum++,"string"==typeof t.filesType?"*"===t.filesType?(delete t.filesType,n&&console.log("普通按钮："+t.title)):"none"!==t.display&&(n&&console.log("文件处理按钮，初始不显示："+t.title),t.display="none",this.showNum--):n&&console.log("普通按钮："+t.title),n&&console.log("显示个数："+this.showNum),this.formatEvent(t);var s=r.ui.button(t),a=s.config.module&&s.config.module.split(",")||[];0!==a.length&&l.declareMod.push(s),s.index=this.buttons.length,this.buttons.push(s);var h={title:t.title,symLink:s,click:t.click,icon:t.icon};return"none"===t.display&&"string"!=typeof t.filesType?(t.isInMore=!0,h.isShow=!0,n&&console.log("超过limit-"+this.limit+"-限制，隐藏按钮："+t.title)):h.display="none",this.moreButtonItem.push(h),t.changePoint&&(s.switchConfig=e,this.numberSwitchButton.push(s)),void 0!==t.filesLimit&&this.limitNumberButton.push(s),"string"==typeof t.filesType&&"*"!==t.filesType&&this.specifiedTypeButton.push(s),"string"==typeof t.excludeDirType&&"*"!==t.excludeDirType&&this.specifiedDirButton.push(s),s},l.prototype.formatEvent=function(t){var e=this;if(void 0===t.click&&void 0===t.link)"dropdown"!==t.type&&(t.click=function(e){s.trigger("plugin:"+t.pluginId,e),r.log.send({name:"buttonClick",sendServerLog:!1,value:t.title})});else if("string"==typeof t.click){var i=t.click;t.click=function(e){e="object"==typeof e?o.extend({run:i},e):{run:i},s.trigger("plugin:"+t.pluginId,e),r.log.send({name:"buttonClick",sendServerLog:!1,value:t.title})}}if("string"==typeof t.mouseEnter){var n=t.mouseEnter;t.mouseEnter=function(e){e="object"==typeof e?o.extend({run:n},e):{run:n},s.trigger("plugin:"+t.pluginId,e)}}if("string"==typeof t.mouseLeave){var n=t.mouseLeave;t.mouseLeave=function(e){e="object"==typeof e?o.extend({run:n},e):{run:n},s.trigger("plugin:"+t.pluginId,e)}}if("string"==typeof t.beforeOpen){var n=t.beforeOpen;t.beforeOpen=function(e){e="object"==typeof e?o.extend({run:n},e):{run:n},s.trigger("plugin:"+t.pluginId,e)}}if("string"==typeof t.beforeClose){var n=t.beforeClose;t.beforeClose=function(e){e="object"==typeof e?o.extend({run:n},e):{run:n},s.trigger("plugin:"+t.pluginId,e)}}if("string"==typeof t.menu){var n=t.menu;t.menu=function(e,i){s.trigger("plugin:"+t.pluginId,{run:n,dom:e,format:i})}}if("dropdown"===t.type&&"object"==typeof t.menu&&t.menu.length)for(var a=0,l=t.menu.length;l>a;a++){var h=t.menu[a];if("string"==typeof h.click){var n=h.click;h.click=function(e){return function(i){i="object"==typeof i?o.extend({run:e},i):{run:e},s.trigger("plugin:"+t.pluginId,i)}}(n)}}this.resize&&o(window).bind("resize",function(){0!==e.$container.width()&&e.filter()})},l.prototype.initMoreButton=function(){var t,e=this.moreButtonItem;this.moreNum=0;for(var i=0,n=e.length;n>i;i++)e[i].isShow&&this.moreNum++;t=this.moreNum>0?void 0:"none";var o={type:"dropdown",title:"更多",resize:!0,display:t,menu:e,icon:"icon-more"};this.moreButton=r.ui.button(o).appendTo(this.$box)},l.prototype.triggerClick=function(t,e){if("number"==typeof t&&t>=0&&t<this.buttons.length){var i=this.buttons[t];i.triggerClick(e),i.isInMore&&this.moreButton.hide()}},l.prototype._disableButton=function(t,e){t.isInMore?(t.isShow===!0&&(this.buttonsWidth-=t.width,this.showNum--),t.hide(),e!==!1&&"disable"===t.config.disabled?(this.moreButtonItem[t.index].isShow=!0,this.moreButtonItem[t.index].isEnable=!e,this.moreButton.menuDisable(t.index,e)):(this.moreButtonItem[t.index].isEnable=void 0,e===!1?(this.moreButton.menuShow(t.index),this.moreButtonItem[t.index].isShow=!0):(this.moreButtonItem[t.index].isShow=!1,this.moreButton.menuShow(t.index,!1)))):(e===!1?(t.isShow===!1&&(this.buttonsWidth+=t.width,this.showNum++),t.disable(!1).show()):"disable"===t.config.disabled?(t.isShow===!1&&(this.buttonsWidth+=t.width,this.showNum++),t.disable().show()):(t.isShow&&(this.buttonsWidth-=t.width,this.showNum--),t.hide()),this.moreButtonItem[t.index].isShow=!1,this.moreButton.menuShow(t.index,!1)),this.moreNum=0;for(var i=0,n=this.moreButtonItem.length;n>i;i++)this.moreButtonItem[i].isShow&&this.moreNum++;var o=this.moreButton.isShow;this.moreNum>0?(this.moreButton.dom.prev().removeClass("last-button"),this.moreButton.show(),o||(this.buttonsWidth+=this.moreButton.width)):(this.moreButton.dom.prev().addClass("last-button"),this.moreButton.hide(),o&&(this.buttonsWidth-=this.moreButton.width))},l.prototype.getContainerWidth=function(){if(null===this.containerPadding){var t=0,e=0;this.$container.css("padding-left")&&(t=parseInt(this.$container.css("padding-left"),10)),this.$container.css("padding-right")&&(e=parseInt(this.$container.css("padding-right"),10)),this.containerPadding=t-e}var i=this.$positionMark.position(),n=this.paddingLeft===!1?i.left:this.paddingLeft;this.$box.css("padding-left",n);var o=this.$container.innerWidth();this.$container.is(":hidden")&&(o=this.$box.innerWidth());var s=o-this.containerPadding-(n||i.left);return this.$box.width(s),this.autoWidth&&this.$box.width("auto"),s-=this.outSize},l.prototype.filter=function(t){for(var e=this.getContainerWidth(),i=this.buttons.length;(this.showNum>this.limit||this.buttonsWidth>e)&&i>0;)i--,this.buttons[i].isShow&&!this.buttons[i].forbidMore&&this.moveToMore(this.buttons[i]);for(var n=0;(this.showNum<this.limit&&n<this.buttons.length&&(0>=e||this.buttonsWidth+90<e)||1===this.moreNum&&(0>=e||this.buttonsWidth+90-this.moreButton.width<e))&&(n++,void 0!==this.buttons[n]);)this.buttons[n].isInMore&&this.releaseFromMore(this.buttons[n]);this.$box.removeClass("opacity-button-box"),t&&t.length&&this.$box.css("visibility","visible")},l.prototype.moveToMore=function(t){!t.isInMore&&t.isShow&&(t.isInMore=!0,t.isEnable===!1?this._disableButton(t):this._disableButton(t,!1))},l.prototype.releaseFromMore=function(t){t.isInMore&&this.moreButtonItem[t.index].isShow&&(t.isInMore=!1,this.moreButtonItem[t.index].isEnable===!1?this._disableButton(t):this._disableButton(t,!1))},l.prototype._handleSpecifiedTypeButton=function(t){var e=this.specifiedTypeButton;if(t.length,e.length&&t.length){for(var i="",n=0,s=t.length;s>n;n++){var r=a.getFileCategory(t[n].server_filename||t[n].file_name);if(!r||1==t[n].isdir){i=null;break}-1===i.indexOf(r)&&(i+=r+",")}i="string"==typeof i?i.slice(0,-1).split(","):null;for(var n=0,s=e.length;s>n;n++){var l=!1;if(null===i)l=!0;else for(var h=0,c=i.length;c>h;h++){var u=o.inArray(i[h],e[n].config.filesType.split(","));if(e[n].config.filesTypeStrongMatch&&e[n].config.filesTypeStrongMatch===!0){if(-1>=u){l=!0;break}}else if(-1===e[n].config.filesType.indexOf(i[h])){l=!0;break}}t.length>e[n].config.filesLimit&&(l=!0),this._disableButton(e[n],l)}}},l.prototype._handSpecifiedDirButton=function(t){var e=this.specifiedDirButton;if(t.length,e.length&&t.length){for(var i="",n=0,o=t.length;o>n;n++){var s=!1,a=t[n].path;i+=a+"?"}i="string"==typeof i?i.slice(0,-1).split("?"):null;for(var r=0,l=e.length;l>r;r++){for(var s=!1,h=0,c=i.length;c>h;h++){var u=e[r].config.excludeDirType,d=u&&u.indexOf(i[h]);if(-1!=d&&-1===i[h].indexOf(",")&&(","==u.charAt(d+i[h].length)||d+i[h].length==u.length)){s=!0;break}}t.length>e[r].config.filesLimit&&(s=!0),this._disableButton(e[r],s)}}},l.prototype.filesSelect=function(t,e,i){var n=this;e&&e.paddingLeft&&(n.paddingLeft=e.paddingLeft),e&&e.paddingLeft&&(n.paddingLeft=e.paddingLeft),this.timeout_reizer&&clearTimeout(this.timeout_reizer),this.timeout_reizer=setTimeout(function(){n.resizeButtons(t),i&&"function"==typeof i&&i()},20)},l.prototype.resizeButtons=function(t){this.alwaysShow!==!0&&(this.$box.addClass("opacity-button-box"),this.$box.css("visibility","hidden"));var e=this.numberSwitchButton,i=this.limitNumberButton,n=t.length;if(0!==n){for(var o=0;o<e.length;o++)e[o].change(n<=e[o].config.changePoint?e[o].switchConfig[0]:e[o].switchConfig[1]);for(var o=0;o<i.length;o++){var s=i[o].config.filesLimit;if(0!==s||0!==n)if("number"==typeof s&&s>=n)this._disableButton(i[o],!1);else if("string"==typeof s&&0===s.indexOf(">")){var a=parseInt(s.substring(1));n>a?this._disableButton(i[o],!1):this._disableButton(i[o])}else this._disableButton(i[o]);else this._disableButton(i[o],!1)}this._handleSpecifiedTypeButton(t),this._handSpecifiedDirButton(t),this.filter(t),this.$box.show()}else for(var o=0;o<i.length;o++){var s=i[o].config.filesLimit;0===s&&0===n&&this._disableButton(i[o],!1)}},l.prototype.lock=function(t){return t===!1&&this.$canvas?void this.$canvas.hide():(this.$canvas||(this.$canvas=o('<div style="width:100%;height:100%;z-index:30;position:absolute;top:0;left:0;"></div>'),this.$box.prepend(this.$canvas)),void this.$canvas.show())},l.prototype.hide=function(t){return t===!1?void this.$box.show():void this.$box.hide()},l.filesSelect=function(t){for(var e=0,i=l.instances.length;i>e;e++)l.instances[e].filesSelect(t)},s.listen("system-change-toolbar",function(t){for(var e=t.module||"list",i=l.declareMod,n=null,o=0;o<i.length;o++)n=i[o],new RegExp(e+"$","gi").test(n.config.module)||new RegExp(e+",","gi").test(n.config.module)?n.dom.show():n.dom.hide()}),i.exports=l}),define("system-core:system/uiService/dialog/dialogManager.js",function(t,e,i){var n=(t("base:widget/libs/jquerypacket.js"),{dialogs:{},addDialog:function(t,e){this.dialogs[t]=e,this.bindEvents()},getDialogById:function(t){return this.dialogs[t]}});i.exports=n}),define("system-core:system/uiService/rMenu/rMenu.js",function(t,e,i){!function(){var e=t("base:widget/libs/jquerypacket.js"),n={domConf:{},eventConf:{},menus:{},keyBoard:{},currentShowId:void 0,currentMenuTarget:null,tempHtml:"",tempForCurrentRenderId:void 0,subMenuShowTime:200,subMenuLoad:null,zIndex:100,onMenuHide:null},o={},s=function(t,e,i,n){var o=function(t){void 0===t&&(t=window.event),void 0===t.stopPropagation&&(t.stopPropagation=function(){t.cancelBubble=!0}),void 0===t.preventDefault&&(t.preventDefault=function(){t.returnValue=!1}),i(t)};t.addEventListener?(n=n===!0,t.addEventListener(e,o,n)):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o};n.contextMenu=function(t,e,i,o){if(t=t||window.event,n.currentMenuTarget=t.target||t.srcElement,n.eventConf=o,!o||"function"!=typeof o.beforeMenu||o.beforeMenu.call(n.currentMenuTarget)!==!1){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation();var s=i.getAttribute("data-cid");s||(s=n.getRandomId(),i.setAttribute("data-cid",s)),n.domConf[s]||(n.tempForCurrentRenderId=s,n.domConf[s]=n.createMenu(e,s)),n.checkDisplay(n.domConf[s]),n.caculatePosition(t,n.domConf[s]),n.showMenu(s),o&&"function"==typeof o.afterMenu&&o.afterMenu.call(n.currentMenuTarget),o&&"function"==typeof o.menuHide&&(n.onMenuHide=o.menuHide)}},n.getRandomId=function(t){return"string"==typeof t?t+Math.random().toString().replace(".",""):"m"+Math.random().toString().replace(".","")},n.renderOneList=function(t,e){var i=!1;if(!t||!t.title)return"";t.id=n.getRandomId("i"),n.menus[t.id]=t;var o="",s="[object Array]"===Object.prototype.toString.call(t.nextMenu)&&t.nextMenu.length?' class="has-more arrowicon"':"",a="function"==typeof t.display?' data-check-display="true"':"";if("function"==typeof t.variableMenu&&(s=' class="has-more arrowicon" data-variable-menu="true"'),o+='<li id="'+t.id+'"'+s+a+' data-group="'+e+'">',"string"==typeof t.icon&&t.icon.length)o+=/background\:url\(/.test(t.icon)?'<em class="icon" style=\''+t.icon+"'></em><em class=\"icon-hover\" style='"+t.icon+"'></em>":'<em class="icon '+t.icon+'"></em><em class="icon-hover '+t.icon+'"></em>';else if("object"==typeof t.icon&&t.icon.length)try{for(var r=0;r<t.icon.length;r++){var l=0===r?"icon":"icon-hover";o+=/background\:url\(/.test(t.icon[r])?'<em class="'+l+"\" style='"+t.icon[r]+"'></em>":'<em class="'+l+" "+t.icon[r]+'"></em>'}}catch(h){i&&console.log("[rMenu ERROR] the icon in config is ")}if(o+=t.title,t.keyboard&&1===t.keyboard.length){var c=t.keyboard.toUpperCase();n.keyBoard[n.tempForCurrentRenderId]||(n.keyBoard[n.tempForCurrentRenderId]={}),n.keyBoard[n.tempForCurrentRenderId][c]||(o+="("+c+")",n.keyBoard[n.tempForCurrentRenderId][c]=t.id)}return""!==s&&(o+=n.renderHtml(t.nextMenu)),o+="</li>"},n.renderHtml=function(t,e){var i="";if("object"==typeof t&&t.length){e||(i+='<ul class="list">');for(var o=0,s=0,a=t.length;a>s;s++)if("[object Array]"===Object.prototype.toString.call(t[s]))if(t[s].length){i.match(/\"separate\" data-group=\"\d+\"\>\<\/li\>$/)||(i+='<li class="separate" data-group="'+o++ +'"></li>');for(var r=0,l=t[s].length;l>r;r++)i+=n.renderOneList(t[s][r],o);i+='<li class="separate" data-group="'+o++ +'"></li>'}else 0===t[s].length&&(i.match(/\"separate\" data-group=\"\d+\"\>\<\/li\>$/)||(i+='<li class="separate" data-group="'+o++ +'"></li>'));else i+=n.renderOneList(t[s],o);i=i.replace(/\<li\sclass\=\"separate\" data-group=\"\d+\"\>\<\/li\>$/i,""),i=i.replace(/^\<li\sclass\=\"separate\" data-group=\"\d+\"\>\<\/li\>/i,""),e||(i+="</ul>")}else i+='<ul class="list"></ul>';return i},n.createMenu=function(t){var e=document.createElement("div");return e.className="context-menu",e.id=n.tempForCurrentRenderId,document.body.appendChild(e),n.tempHtml="",e.innerHTML=n.renderHtml(t),n.eventDelegate(e,".has-more","mouseover",n.showSubList),n.eventDelegate(e,".has-more","mouseout",n.hideSubList),n.eventDelegate(e,"li","mouseover",n.hideSilibingsList),n.eventDelegate(e,"li","click",n.listAction),n.eventDelegate(e,".list","click",n.variableMenuAction),n.eventDelegate(e,".list","mouseover",function(t){t.stopPropagation()}),e.children[0].style.zIndex=n.zIndex,s(e,"contextmenu",function(t){t.stopPropagation(),t.preventDefault()}),s(e,"click",function(t){t.stopPropagation()}),s(e,"mouseover",function(t){t.stopPropagation()}),s(e,"mouseout",function(t){t.stopPropagation()}),s(e,"mousedown",function(t){t.stopPropagation()}),s(e,"mouseup",function(t){t.stopPropagation()}),e.children[0]},n.asyncRenderSubList=function(t,e){"object"==typeof t&&t.length&&(e.innerHTML=n.renderHtml(t,!0)),n.checkDisplay(e)},n.showSubList=function(t){clearTimeout(n.subMenuLoad);var e=this;this.className.match(/\sdisable(\s|$)/)||(n.subMenuLoad=setTimeout(function(){if("true"==e.getAttribute("data-variable-menu")){var i=e.id;lists=n.menus[i].variableMenu(e.children[0],function(t){n.asyncRenderSubList(t,e.children[0])}),n.asyncRenderSubList(lists,e.children[0])}e.className.match(/\sopen(\s|$)/)||(e.className=e.className+" open",e.style.zIndex=n.zIndex+3,n.checkDisplay(e.children[0]),n.caculatePosition(t,e.children[0],e))},n.subMenuShowTime))},n.hideSilibingsList=function(){var t;t=this===n?n.domConf[n.currentShowId].children:this.parentElement.children;for(var e=0,i=t.length;i>e;e++)if(t[e]!==this&&t[e].className.match(/\sopen(\s|$)/)){t[e].className=t[e].className.replace(/\s+open(\s|$|\"|\')/g,"$1"),t[e].style.zIndex=n.zIndex+2,t[e].children[0].style.display="none";var o=t[e].children[0].innerHTML.replace(/\s+open(\s|$|\"|\')/g,"$1").replace(/display\s*\:\s*block\s*;?/g,"display:none;");t[e].children[0].innerHTML=o}},n.listAction=function(){if(this.id&&n.menus[this.id]){var t=document.getElementById(this.id);if(t.className.match(/\sdisable(\s|$)/))return;t.className.match(/(^|\s)has\-more(\s|$)/)||n.hideMenu(),"function"==typeof n.menus[this.id].action&&(n.eventConf&&"function"==typeof n.eventConf.listItemClickBefore&&n.eventConf.listItemClickBefore.call(n.currentMenuTarget,n.menus[this.id],"click"),n.menus[this.id].action.call(n.currentMenuTarget,t))}},n.variableMenuAction=function(){"true"==this.parentNode.getAttribute("data-variable-menu")&&n.hideMenu()},n.hideSubList=function(){clearTimeout(n.subMenuLoad)},n.showMenu=function(t){n.currentShowId&&(n.domConf[t].style.display="none"),n.domConf[t].style.display="block";var i=e(n.domConf[t]).find(">li:visible").length;0>=i&&(n.domConf[t].style.display="none"),n.currentShowId=t},n.checkDisplay=function(t){!t&&n.currentShowId&&(t=n.domConf[n.currentShowId]);for(var i=t.children,o=e(i[i.length-1]).data("group"),s=e(t).find('>li[data-group="0"]').length,a=e(t).find('>li[data-group="'+o+'"]').length,r=0,l=i.length;l>r;r++)if("true"===i[r].getAttribute("data-check-display")){var h=i[r].id;if(h&&"function"==typeof n.menus[h].display){var c=n.menus[h].display.call(n.currentMenuTarget);if(c===!1){var u=n.getPreviousVisibleSeparate(i[r]),d=n.getNextVisibleSeparate(i[r]);u&&d&&(u.style.display="none"),i[r].style.display="none";var g=e(i[r]).data("group");0===g&&--s<=1&&e(t).find('>li.separate[data-group="0"]').hide(),g===o&&--a<=1&&e(t).find('>li.separate[data-group="'+(o-1)+'"]').hide()}else if("disable"===c){var f=n.getPreviousHidenSeparate(i[r]);f&&(f.style.display="block"),-1===i[r].className.indexOf(" disable")&&(i[r].className=i[r].className+" disable"),i[r].style.display="block"}else{var g=e(i[r]).data("group");if(!(1===g&&1>=s)){var f=n.getPreviousHidenSeparate(i[r]);f&&(f.style.display="block")}i[r].className=i[r].className.replace(/(\sdisable)+(?=\s|$)/gi,""),i[r].style.display="block"}}}},n.getPreviousVisibleSeparate=function(t){for(var e=t.previousElementSibling||t.previousSibling;e;)if("none"===e.style.display)e=e.previousElementSibling||e.previousSibling;else{if("separate"===e.className)break;e=null}return e},n.getPreviousHidenSeparate=function(t){for(var e=t.previousElementSibling||t.previousSibling;e;)if("separate"===e.className){if("none"===e.style.display)break;e=null}else e="none"===e.style.display?e.previousElementSibling||e.previousSibling:null;return e},n.getNextVisibleSeparate=function(t){for(var e=t.nextElementSibling||t.nextSibling;e;)if("none"===e.style.display)e=e.nextElementSibling||e.nextSibling;else{if("separate"===e.className)break;e=null}return e},n.caculatePosition=function(t,e,i){var n=e.style.left,o=e.style.top;e.style.left="-9999px",e.style.top="-9999px",e.style.display="block";var s=e.offsetWidth,a=e.offsetHeight,r=document.documentElement.clientWidth,l=document.documentElement.clientHeight;if(i){var h=function(){for(var t=i,e=0;t;)e+=t.offsetTop,t=t.parentElement;return e}(),c=function(){for(var t=i,e=0;t;)e+=t.offsetLeft,t=t.parentElement;return e}(),u=i.offsetWidth,d=i.offsetHeight;o=l>=h+a?-3:h>a?a-2-d:h+a-l-3,n=r>=c+u+s?u-3:-s+3}else{var g=t.clientX,f=t.clientY;n=r>=g+s?g:r-s,o=l>=f+a?f:f>a?f-a:l-a}e.style.left=n+"px",e.style.top=o+"px"},n.hideMenu=function(){n.currentShowId&&(n.domConf[n.currentShowId].style.display="none",n.hideSilibingsList(),n.currentShowId=void 0,n.hideSubList(),"function"==typeof n.onMenuHide&&n.onMenuHide.call(n.currentMenuTarget))},n.keyBoardHandler=function(t){var e=String.fromCharCode(t.keyCode);if(n.currentShowId&&n.keyBoard[n.currentShowId]){var i=n.keyBoard[n.currentShowId][e];if(i){var o=document.getElementById(i);if(o.className.match(/\sdisable(\s|$)/))return;if(o.className.match(/(^|\s)has\-more(\s|$)/))return n.showSubList.call(o),void n.hideSilibingsList.call(o);"function"==typeof n.menus[i].action&&(n.hideMenu(),n.eventConf&&"function"==typeof n.eventConf.listItemClickBefore&&n.eventConf.listItemClickBefore.call(n.currentMenuTarget,n.menus[i],"keyBoard"),n.menus[i].action.call(n.currentMenuTarget,o))}}},n.eventMatcher=function(t,e,i,n){var o=t,s=!1;for(i.stopPropagation=function(){s=!0};o&&o!==n&&o!==document.body&&!s;){for(var a=0,r=e.length;r>a;a++){var l=e[a].selector;0===l.indexOf(".")&&-1!==o.className.toLowerCase().indexOf(l.substring(1))?e[a].action.call(o,i):-1!==o.tagName.toLowerCase().indexOf(l)&&e[a].action.call(o,i)}o=o.parentNode}},n.eventDelegate=function(t,e,i,o){t["delegateevent-"+i]?t["delegateevent-"+i].push({selector:e,action:o}):(t["delegateevent-"+i]=[{selector:e,action:o}],s(t,i,function(e){var o=e.target||e.srcElement,s=t["delegateevent-"+i];n.eventMatcher(o,s,e,t)}))},n.init=function(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAyCAMAAACwGaE2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzhGQzA4MUIzRkNFMTFFNEFFNkRGOTBCODU5NjkyMTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzhGQzA4MUMzRkNFMTFFNEFFNkRGOTBCODU5NjkyMTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3OEZDMDgxOTNGQ0UxMUU0QUU2REY5MEI4NTk2OTIxNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3OEZDMDgxQTNGQ0UxMUU0QUU2REY5MEI4NTk2OTIxNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpbvuBQAAAAGUExURXp6ev///7iACewAAAACdFJOU/8A5bcwSgAAAElJREFUeNrc0kEKACAIRNHf/S8dSWoz4AVyo4/QRQwrircBLbgkEaRwSAOZc7nqC6FChYr5bb75xS9pCmS29FiyLHWWyGpbgAEA38gCGb87IAIAAAAASUVORK5CYII=";arrowImgHover="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAyCAMAAACwGaE2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODAxQTFDRkYzRkNFMTFFNDhCREVDNDI5RDEyNTM1NTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODAxQTFEMDAzRkNFMTFFNDhCREVDNDI5RDEyNTM1NTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MDFBMUNGRDNGQ0UxMUU0OEJERUM0MjlEMTI1MzU1NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MDFBMUNGRTNGQ0UxMUU0OEJERUM0MjlEMTI1MzU1NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlWhQhkAAAAGUExURf///////1V89WwAAAACdFJOU/8A5bcwSgAAAElJREFUeNrc0kEKACAIRNHf/S8dSWoz4AVyo4/QRQwrircBLbgkEaRwSAOZc7nqC6FChYr5bb75xS9pCmS29FiyLHWWyGpbgAEA38gCGb87IAIAAAAASUVORK5CYII=";var e=".context-menu{position:absolute;font-size:13px!important;color:#000!important;top:0;left:0;-moz-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none;}.context-menu .arrowicon{background:url("+t+") right center no-repeat}.context-menu .arrowicon.list-hover, .context-menu .arrowicon.open{background-image:url("+arrowImgHover+")}.context-menu ul, .context-menu li{list-style:none;padding:0;margin:0;font-size:13px!important;color:#5b667b!important}.context-menu .list{min-height:23px;padding:2px 0;position:absolute;background-color:#FFF;color:#000}.context-menu .list{border: 1px solid #dde0e4;border-radius: 5px;box-shadow: 0 0 8px #ccc;}.context-menu .list li{display:list-item;cursor:default;height:23px;line-height:23px;white-space:nowrap;position:relative;z-index:1;padding: 0 27px 0 20px;}.context-menu .list .disable, .context-menu .list .disable:hover{filter:alpha(opacity=80);opacity: 0.8;color:#A1A192!important;background-color:#FFF;background:none}.context-menu .list li .icon, .context-menu .list li .icon-hover{position:absolute;display:block;width:16px;height:16px;top:3px;left:2px}.context-menu .list li .icon-hover{display:none}.context-menu .list li.list-hover,.context-menu .list .has-more.open{background-color:#4281F4;color:#FFF!important}.context-menu .list li.list-hover>.icon{display:none}.context-menu .list li.list-hover>.icon-hover{display:block}.context-menu .list .has-more{z-index:2;}.context-menu .list .has-more .list{display:none;top:-3px;left:98%;z-index:2;border-radius:0;box-shadow: 0 0 0;} .context-menu .list .separate,.context-menu .list .separate.list-hover{padding:0;margin:5px 0;height:1px;line-height:0;font-size:0!important;background-color:#e9e9e9;cursor:default}.context-menu .list .arrow-down{height:16px;background-position:center -38px}.context-menu .list li:hover { background-color: #4281F4;color: #FFF!important;}.context-menu .list li.separate:hover { background-color: #e9e9e9;}.context-menu .list .arrow-up{height:16px;background-position:center 4px}",i=document.createElement("style");i.setAttribute("type","text/css"),document.all?i.styleSheet.cssText=e:i.innerHTML=e,document.getElementsByTagName("head").item(0).appendChild(i),s(document.body,"keydown",n.keyBoardHandler,!0),s(document.body,"mousedown",n.hideMenu)},o.bind=function(t,e,i){var o=t.getAttribute("data-cid");if(o&&n.domConf[o]){try{n.domConf[o].parentElement.removeChild(n.domConf[o])}catch(s){}delete n.domConf[o],delete n.eventConf[o],n.keyBoard={}}t.oncontextmenu=function(t){t=void 0===t&&window.event?window.event:t,t.preventDefault?t.preventDefault():t.returnValue=!1,n.contextMenu(t,e,this,i)}},"undefined"!=typeof i&&i.exports?i.exports=o:window.rMenu=o,"undefined"!=typeof e&&e.fn&&(e.fn.rMenu=function(t,i){e(this).each(function(){var e=dom.getAttribute("data-cid");if(e&&n.domConf[e]){try{n.domConf[e].parentElement.removeChild(n.domConf[e])}catch(o){}delete n.domConf[e],delete n.eventConf[e],n.keyBoard={}}this.oncontextmenu=function(e){e=void 0===e&&window.event?window.event:e,e.preventDefault?e.preventDefault():e.returnValue=!1,n.contextMenu(e,t,this,i)}})}),n.init()}()}),define("system-core:context/context.js",function(t,e,i){var n=t("base:widget/libs/jquerypacket.js"),o=t("base:widget/libs/underscore.js"),s=t("system-core:system/baseService/message/message.js"),a=t("system-core:system/uiService/button/button.js"),r=t("system-core:system/uiService/dialog/dialog.js"),l=t("system-core:system/uiService/tip/tip.js"),h=t("system-core:system/cache/listCache/cacheManage.js"),c=t("system-core:system/uiService/log/log.js"),u=t("system-core:system/uiService/log/updateLog.js"),d=t("system-core:system/uiService/page/page.js"),g=t("base:widget/tools/tools.js"),f=t("system-core:system/uiService/motionSensor/motionSensor.js"),m=t("system-core:system/uiService/keyGuard/keyGuard.js"),p=t("system-core:system/uiService/mouseWheelSensor/mouseWheelSensor.js"),y=t("system-core:system/uiService/list/list.js"),v=t("system-core:system/uiService/loading/loading.js"),_=t("system-core:pluginControl/register/register.js"),C=0,b=!0,w=function(t){t?(this.message=s,this.isSystem=!0):(this.message=new s,this.isSystem=!1),this.log=new c,this.updateLog=u};w.extend=function(t,e){if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(w.prototype[i]?w.extend(i,t[i]):w.prototype[i]=t[i]);else if("string"==typeof t&&"object"==typeof e){var i=t,n=w.prototype[i];if(n)for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o])}if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(w.helps[i]=e[i])},w.helps={file:{type:"object",description:"文件方法集合",_property:{list:{type:"function",description:"异步获取文件列表",param:[{type:"string",description:"传入的路径",example:"/"},{type:"function",description:"接收函数",example:"function(list){}"}],"return":{type:"undefined",description:void 0}}}},ui:{type:"object",description:"文件方法集合",_property:{List:{type:"function",description:"列表的构造函数，用于表现例如主列表的样式",param:[{type:"object",description:"传入的配置，共有8个配置选项",example:'{defaultViewModle: "list"    historyConfig: "object, 请参见文档"    headerConfig: "object, 请参见文档"    listConfig: "object, 请参见文档"    listViewBuilder: "object, 请参见文档"    gridConfig: "object, 请参见文档"    gridViewBuilder: "object, 请参见文档"    listToolsConfig: "object, 请参见文档"}'}],"return":{type:"object",description:"被实例化的列表对象"}}}}},w.cacheName="list",w.setList=function(t){t instanceof y&&(w.prototype.__listInstance=t)},w.getList=function(){return w.prototype.__listInstance},w.prototype={__listInstance:null,libs:{JQuery:n,$:n,underscore:o,_:o},extend:function(t,e){w.extend(t,e)},obtainId:function(){return"_system_id_"+ ++C},setList:function(t){w.setList(t)},getList:function(){return w.getList()},file:{_defaultPath:"/",list:function(t,e){var i=w.prototype.__listInstance;if(i&&i.cache){var n=-1;t=t||this._defaultPath,i.cache.getCacheData(w.cacheName,t,n,e)}},add:function(t,e){var i=w.prototype.__listInstance;if(i&&i.cache){var n,s;if(t=t||this._defaultPath,o.isArray(e)===!0)for(s=e.length;s>0;s--)n=e[s],i.cache.addDataBefore(w.cacheName,t,n);else o.isObject(e)===!0&&(n=e,i.cache.addDataBefore(w.cacheName,t,n))}},remove:function(t){var e=w.prototype.__listInstance;if(e&&e.cache){var i;o.isArray(t)===!0?e.cache.removeByIndexs(t):o.isObject(t)===!0&&(i=t,e.cache.removeByIndex(i))}},update:function(t,e){var i=w.prototype.__listInstance;i&&i.cache&&(t=t||this._defaultPath,o.isArray(e)===!0?i.cache.updateData(w.cacheName,t,e):o.isObject(e)===!0&&i.cache.updateData(w.cacheName,t,[e]))},watchCDNOfPCS:function(t){}},list:{isLocked:function(){var t=w.prototype.__listInstance;return!!t&&t.isLocked()},goHistory:function(t){var e=w.prototype.__listInstance;return e?e.goHistory("list",t):void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},getHistoryPath:function(){var t=w.prototype.__listInstance;return t?t.getHistoryPath():void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},getSelected:function(){var t=w.prototype.__listInstance;return t?t.getCheckedItems():void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},getCurrentList:function(){var t=w.prototype.__listInstance;return t?t.getCurrentDataList():void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},getCurrentPath:function(){var t=w.prototype.__listInstance;return t?t.currentKey:void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},refresh:function(){var t=w.prototype.__listInstance;return t?t.refreshList():void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},removeCacheByPath:function(t){var e=w.prototype.__listInstance;return e?e.removeCacheByPath(t):void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},resize:function(){var t=w.prototype.__listInstance;return t?t.resize():void(b&&console.log("[LOG FORM CONTEXT] can’t find list in this page."))},mapFirstFileByCategory:function(t,e){var i=w.prototype.__listInstance;return i.mapFirstFileByCategory(t,e)},getIndexsByFiles:function(t){var e=w.prototype.__listInstance;return e.getIndexsByFiles(t)},showErrorTips:function(t,e){var i=w.prototype.__listInstance;i&&i.showErrorTips(t,e)},getCurrentPageMode:function(){var t=w.prototype.__listInstance;return t.getCurrentPageMode()},getCurrentListModule:function(){var t=w.prototype.__listInstance;return t.getListModule()},getCurrentViewModule:function(){var t=w.prototype.__listInstance;return t.getCurrentView()},addItemToFirst:function(t){var e=w.prototype.__listInstance;return e.addItemToFirst(t)}},ui:{window:function(t){return window.yunHeader&&window.yunHeader.fontIe&&window.yunHeader.fontIe.api&&window.yunHeader.fontIe.api.doAddIcon(),
new r(t)},confirm:function(t,e,i,n){return window.yunHeader&&window.yunHeader.fontIe&&window.yunHeader.fontIe.api&&window.yunHeader.fontIe.api.doAddIcon(),r.confirm.call(r,t,e,i,n)},alert:function(t,e){return window.yunHeader&&window.yunHeader.fontIe&&window.yunHeader.fontIe.api&&window.yunHeader.fontIe.api.doAddIcon(),r.alert.call(r,t,e)},verify:function(t,e,i,n,o){return window.yunHeader&&window.yunHeader.fontIe&&window.yunHeader.fontIe.api&&window.yunHeader.fontIe.api.doAddIcon(),r.verify.call(r,t,e,i,n,o)},tip:function(t){return l.show(t)},hideTip:function(){return l.hide()},page:function(t){return new d(t)},contextMenu:function(e,i,n){t.async("system-core:system/uiService/rMenu/rMenu.js",function(t){t.bind(e,i,n)})},list:function(t,e){var i=new y(t,e);return i},listCache:function(t,e,i){return h.obtainCache(t,e,i)},cacheManage:h,button:function(t){return new a(t)},loading:function(t){return new v(t)}},size:{resize:function(t){o.isFunction(t)===!0&&(this.callback=t)},window:function(t){var e=n(window);t.width&&o.isNumber(t.width)&&e.width(t.width),t.height&&o.isNumber(t.height)&&e.height(t.height),this.callback&&this.callback.call(void 0)},document:function(t){var e=n(document);t.width&&o.isNumber(t.width)&&e.width(t.width),t.height&&o.isNumber(t.height)&&e.height(t.height),this.callback&&this.callback.call(void 0)}},tools:{baseService:g,motionSensor:f,keyGuard:m,mouseWheelSensor:p},pageInfo:{currentPage:"disk-home",currentProduct:"pan"},data:{quota:{get:function(){return[100,1e10]},update:function(t){t.call(null,100,1e10)},hasEnoughSpacing:function(){return!0}}},help:function(){if(0===arguments.length)return void(b&&console.log("[need]"));for(var t=w.helps,e=0,i=arguments.length;i>e;e++)if(t=0===e?t[arguments[e]]:t._property&&t._property[arguments[e]],!t)return void(b&&console.log("[NO PROPERTY]"));return t}},w.instanceForSystem=new w((!0)),w.instanceForSystem.pluginControl={setButtonContainer:function(t){return _.setButtonContainer(t)},init:function(t){return _.init(t)},getFaceData:function(){return _.getFaceData()},pluginData:function(){return _.getPluginData()}},window.logConfigs&&w.instanceForSystem.log.define(window.logConfigs,"global"),i.exports=w});
//# sourceMappingURL=../../maps/Common/baidu_all.min.js.map
