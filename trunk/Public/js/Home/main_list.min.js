$(function(){function e(e,t){for(var a="",i=0;i<t.length;i++)a+='<li><div class="treeview-node " _pl="15px" style="padding-left:15px" data-node-id="'+t[i].id+'"><span class="treeview-node-handler"><em class="b-in-blk plus icon-operate "></em><dfn class="b-in-blk treeview-ic"></dfn><span class="treeview-txt" node-path="/'+t[i].name+'">'+t[i].name+'</span></span></div><ul class="treeview treeview-content treeview-collapse" _pl="30px"></ul></li>';return a.length>0&&($(e).parent("span").parent("div").siblings("ul").append(a),!0)}function t(t){var a=($("#menu").attr("data-category-id"),-1),i=$(".treeview-node-on");$("#fileTreeDialog .dialog-header-title.select-text").html("复制到"),$("#fileTreeDialog").delegate(".plus","click",function(){var t=$("#menu").attr("data-cmd-type"),a=$("#menu").attr("data-on-cmd-req-cat");if(a+="/openCategory",4==t?(a=$("#menu").attr("data-on-cmd-req-fav"),a+="/openFavoritesCategory"):6==t&&(a=$("#menu").attr("data-on-cmd-req-software"),a+="/openSoftwareCategory"),!$(this).hasClass("minus")){var i=$(this),n=$(this).parent("span").parent("div").attr("data-node-id");$(this).parent("span").parent("div").siblings("ul").empty(),$.showShCircle("shCircle"),$.ajax({url:a,method:"post",dataType:"json",data:{cid:n},success:function(t){$.closeShCircle("shCircle"),1==t.flag&&e(i,t.list)&&$(i).addClass("minus")},error:function(e){$.closeShCircle("shCircle"),$(".plus-createFolder").remove(),console.log(e)}})}}),$("#fileTreeDialog").delegate(".minus","click",function(){$(this).parent("span").parent("div").siblings("ul").empty(),$(this).removeClass("minus")}),$("#fileTreeDialog").css("display","block"),$("#fileTreeDialog").css("visibility","visible"),$("#fileTreeDialog").delegate(".btn-cancel,.dialog-close","click",function(){$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden")}),$("#fileTreeDialog").delegate(".btn-sure","click",function(){var e=[],i=$(".item-active");$.each($(i),function(t,a){console.log("item:"+t+" = "+a);var i=$(a).attr("_installed");e.push(i)}),console.log("url="+t),$.showShCircle("shCircle"),$.ajax({url:t,method:"post",dataType:"json",data:{src_cid:e,dst_cid:a},success:function(e){$.closeShCircle("shCircle"),$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden"),1==e.flag?window.location.reload():alert(e.msg)},error:function(e){$.closeShCircle("shCircle"),$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden"),console.log(e)}})}),$("#fileTreeDialog .btn-new-dir").on("click",function(){var e=$("#copy-new-dir").html();i.parent("li").after(e),$("#fileTreeDialog .sure").delegate("click",function(){var e=$("#copy-new-dir").attr("data-post");$.showShCircle("shCircle"),$.ajax({url:e,method:"post",dataType:"json",data:{category_name:$(".plus-createFolder ._disk_id_4").val(),cid:a},success:function(e){if($.closeShCircle("shCircle"),$(".plus-createFolder").remove(),1==e.flag){$(i).parent("li").children("plus").addClass("minus"),i.removeClass("treeview-node-on"),a=e.list.cid;var t='<li><div class="treeview-node treeview-node-on" _pl="15px" style="padding-left:15px" data-node-id="'+e.list.cid+'"><span class="treeview-node-handler"><em class="b-in-blk plus icon-operate "></em><dfn class="b-in-blk treeview-ic"></dfn><span class="treeview-txt" node-path="/'+e.list.name+'">'+e.list.name+'</span></span></div><ul class="treeview treeview-content treeview-collapse" _pl="30px"></ul></li>';i.parent("li").children("ul").append(t)}else alert(e.msg)},error:function(e){$.closeShCircle("shCircle"),$(".plus-createFolder").remove(),console.log(e)}})}),$("#fileTreeDialog .cancel").on("click",function(){$(".plus-createFolder").remove()})}),$("#fileTreeDialog").delegate(".treeview-node","click",function(){$("#fileTreeDialog .treeview-node-on").removeClass("treeview-node-on"),a=$(this).attr("data-node-id"),$(this).addClass("treeview-node-on"),i=$(this)})}function a(e){t(e)}function i(e){}function n(t){var a=($("#menu").attr("data-category-id"),-1),i=$(".treeview-node-on");$("#fileTreeDialog .dialog-header-title.select-text").html("移动到"),$("#fileTreeDialog").delegate(".plus","click",function(){var t=$("#menu").attr("data-cmd-type"),a=$("#menu").attr("data-on-cmd-req-cat");if(a+="/openCategory",4==t?(a=$("#menu").attr("data-on-cmd-req-fav"),a+="/openFavoritesCategory"):6==t&&(a=$("#menu").attr("data-on-cmd-req-software"),a+="/openSoftwareCategory"),!$(this).hasClass("minus")){var i=$(this),n=$(this).parent("span").parent("div").attr("data-node-id");$(this).parent("span").parent("div").siblings("ul").empty(),$.showShCircle("shCircle"),$.ajax({url:a,method:"post",dataType:"json",data:{cid:n},success:function(t){$.closeShCircle("shCircle"),1==t.flag&&e(i,t.list)&&$(i).addClass("minus")},error:function(e){$.closeShCircle("shCircle"),$(".plus-createFolder").remove(),console.log(e)}})}}),$("#fileTreeDialog").delegate(".minus","click",function(){$(this).parent("span").parent("div").siblings("ul").empty(),$(this).removeClass("minus")}),$("#fileTreeDialog").css("display","block"),$("#fileTreeDialog").css("visibility","visible"),$("#fileTreeDialog").delegate(".btn-cancel,.dialog-close","click",function(){$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden")}),$("#fileTreeDialog").delegate(".btn-sure","click",function(){var e=[],i=$(".item-active");$.each($(i),function(t,a){console.log("item:"+t+" = "+a);var i=$(a).attr("_installed");e.push(i)}),console.log("url="+t),$.showShCircle("shCircle"),$.ajax({url:t,method:"post",dataType:"json",data:{src_cid:e,dst_cid:a},success:function(e){$.closeShCircle("shCircle"),$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden"),1==e.flag&&window.location.reload()},error:function(e){$.closeShCircle("shCircle"),$("#fileTreeDialog").css("display","none"),$("#fileTreeDialog").css("visibility","hidden"),console.log(e)}})}),$("#fileTreeDialog .btn-new-dir").on("click",function(){var e=$("#copy-new-dir").html();i.parent("li").after(e),$("#fileTreeDialog .sure").delegate("click",function(){var e=$("#copy-new-dir").attr("data-post");$.showShCircle("shCircle"),$.ajax({url:e,method:"post",dataType:"json",data:{category_name:$(".plus-createFolder ._disk_id_4").val(),cid:a},success:function(e){if($.closeShCircle("shCircle"),$(".plus-createFolder").remove(),1==e.flag){$(i).parent("li").children("plus").addClass("minus"),i.removeClass("treeview-node-on"),a=e.list.cid;var t='<li><div class="treeview-node treeview-node-on" _pl="15px" style="padding-left:15px" data-node-id="'+e.list.cid+'"><span class="treeview-node-handler"><em class="b-in-blk plus icon-operate "></em><dfn class="b-in-blk treeview-ic"></dfn><span class="treeview-txt" node-path="/'+e.list.name+'">'+e.list.name+'</span></span></div><ul class="treeview treeview-content treeview-collapse" _pl="30px"></ul></li>';i.parent("li").children("ul").append(t)}},error:function(e){$.closeShCircle("shCircle"),$(".plus-createFolder").remove(),console.log(e)}})}),$("#fileTreeDialog .cancel").on("click",function(){$(".plus-createFolder").remove()})}),$("#fileTreeDialog").delegate(".treeview-node","click",function(){$("#fileTreeDialog .treeview-node-on").removeClass("treeview-node-on"),a=$(this).attr("data-node-id"),$(this).addClass("treeview-node-on"),i=$(this)})}function o(e){n(e)}function r(e){var t=$("#menu").attr("data-category-id");$.showShCircle("shCircle"),$.ajax({url:e,method:"post",dataType:"json",data:{src_category:t},success:function(e){$.closeShCircle("shCircle"),$(".module-edit-name").css("display","none"),1==e.flag&&window.location.reload()},error:function(e){$.closeShCircle("shCircle"),$(".module-edit-name").css("display","none"),console.log(e)}})}function l(e){r(e)}function s(e){t(e)}function c(e){i(e)}function d(e){n(e)}function m(e){r(e)}function f(e){t(e)}function u(e){t(e)}function v(e){n(e)}function p(e){n(e)}function h(e){i(e)}function g(e){r(e)}function w(e){r(e)}function y(e){t(e)}function C(e){n(e)}function b(e){r(e)}function T(){var e=$("#fileTreeDialog").attr("data-self");$.showShCircle("shCircle"),$.ajax({url:e,method:"post",dataType:"json",data:{cid:-1},success:function(e){if($.closeShCircle("shCircle"),1==e.flag){for(var t="",a=e.list.categorys,i=0;i<a.length;i++)t+='<li><div class="treeview-node " _pl="15px" style="padding-left:15px" data-node-id="'+a[i].id+'"><span class="treeview-node-handler"><em class="b-in-blk plus icon-operate "></em><dfn class="b-in-blk treeview-ic"></dfn><span class="treeview-txt" node-path="/'+a[i].name+'">'+a[i].name+'</span></span></div><ul class="treeview treeview-content treeview-collapse" _pl="30px"></ul></li>';$("#fileTreeDialog .treeview-root-content").html(t)}},error:function(e){$.closeShCircle("shCircle"),$(".plus-createFolder").remove(),console.log(e)}})}g_active_node=$(document),$(".list-view").delegate(".list-view-item","click",function(){$(this).hasClass("item-active")?($(this).removeClass("item-active"),$(".list-tools").css("visibility","hidden")):($(this).addClass("item-active"),$(".list-tools").css("visibility","visible")),g_active_node=$(this)}),$(".first-col >.col-item").on("click",function(){$(".list-view-item").hasClass("item-active")?($(".list-view-item").removeClass("item-active"),$(".check-icon").parent(".check").removeClass("checked")):($(".list-view-item").addClass("item-active"),$(".check-icon").parent(".check").addClass("checked"))}),$(document).on("click",function(){$("#menu .list").css("display","none")}),$("#module-list").on("contextmenu",function(e){var t=$(".list-view").offset().left,a=$(".list-view").offset().top,i=e.clientX,n=e.clientY,o=i-t,r=n-a+54;return 3==e.which?($("#menu .list").css("display","block"),$("#menu .list").css("left",o).css("top",r)):$("#menu .list").css("display","none"),!1}),$(".category").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",1)}),$(".article").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",2)}),$(".favorites").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",3)}),$(".favorites-cat").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",4)}),$(".software").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",5)}),$(".software-cat").on("mousedown",function(){var e=$(this).attr("_installed");$("#menu").attr("data-category-id",e),$("#menu").attr("data-cmd-type",6)}),$("#open-menu").on("click",function(){var e=$("#menu").attr("data-on-cmd-req-cat"),t=$("#menu").attr("data-cmd-type"),a=$("#menu").attr("data-category-id");if(1==t){var i=e+"/openCategory";i+="/cid/"+a,window.location=i}else if(2==t){e=$("#menu").attr("data-on-cmd-req-file");var i=e+"/openArticle";i+="/aid/"+a,window.location=i}else if(3==t){e=$("#menu").attr("data-on-cmd-req-fav");var i=e+"/openFavorites";i+="/cid/"+a,window.location=i}else if(4==t){e=$("#menu").attr("data-on-cmd-req-fav");var i=e+"/openFavoritesCategory";i+="/cid/"+a,window.location=i}else if(5==t){e=$("#menu").attr("data-on-cmd-req-software");var i=e+"/openSoftware";i+="/cid/"+a,window.location=i}else if(6==t){e=$("#menu").attr("data-on-cmd-req-software");var i=e+"/openSoftwareCategory";i+="/cid/"+a,window.location=i}}),$("#download-menu").on("click",function(){var e=$("#menu").attr("data-on-cmd-req-cat"),t=$("#menu").attr("data-cmd-type");if(1==t);else if(2==t){e=$("#menu").attr("data-on-cmd-req-file")}else if(3==t){e=$("#menu").attr("data-on-cmd-req-fav")}else if(4==t){e=$("#menu").attr("data-on-cmd-req-fav")}else if(5==t){e=$("#menu").attr("data-on-cmd-req-software")}}),$("#copy-menu").on("click",function(){var e=$("#menu").attr("data-on-cmd-req-cat"),t=$("#menu").attr("data-cmd-type");if(T(),1==t){var i=e+"/copyCategory";a(i)}else if(2==t){e=$("#menu").attr("data-on-cmd-req-file");var i=e+"/copyArticle";s(i)}else if(3==t){e=$("#menu").attr("data-on-cmd-req-fav");var i=e+"/copyFavorites";f(i)}else if(4==t){e=$("#menu").attr("data-on-cmd-req-fav");var i=e+"/copyFavoritesCategory";u(i)}else if(5==t){e=$("#menu").attr("data-on-cmd-req-software");var i=e+"/copySoftware";y(i)}else if(6==t){e=$("#menu").attr("data-on-cmd-req-software");var i=e+"/copySoftwareCategory";y(i)}}),$("#move-menu").on("click",function(){var e=$("#menu").attr("data-on-cmd-req-cat"),t=$("#menu").attr("data-cmd-type");if(1==t){var a=e+"/moveCategory";o(a)}else if(2==t){e=$("#menu").attr("data-on-cmd-req-file");var a=e+"/moveArticle";d(a)}else if(3==t){e=$("#menu").attr("data-on-cmd-req-fav");var a=e+"/moveFavorites";v(a)}else if(4==t){e=$("#menu").attr("data-on-cmd-req-fav");var a=e+"/moveFavoritesCategory";p(a)}else if(5==t){e=$("#menu").attr("data-on-cmd-req-software");var a=e+"/moveSoftware";C(a)}else if(6==t){e=$("#menu").attr("data-on-cmd-req-software");var a=e+"/moveSoftwareCategory";C(a)}}),$("#rename-menu").on("click",function(e){var t=$("#menu").attr("data-on-cmd-req-cat"),a=$("#menu").attr("data-cmd-type"),i=$(g_active_node).position().left,n=$(g_active_node).position().top,o=(e.clientX,e.clientY,i+20),r=n+44+15,l=$(g_active_node).find(".filename").html();if("undefined"!=l&&$("#new-dir-box").val(l),$(".module-edit-name").css("display","block"),$(".module-edit-name").css("left",o+"px"),$(".module-edit-name").css("top",r+"px"),1==a){var s=t+"/renameCategory";$("#new-dir-box").attr("data-post",s)}else if(2==a){t=$("#menu").attr("data-on-cmd-req-file");var s=t+"/renameArticle";$("#new-dir-box").attr("data-post",s),c(s)}else if(3==a){t=$("#menu").attr("data-on-cmd-req-fav");var s=t+"/renameFavorites";$("#new-dir-box").attr("data-post",s),h(s)}else if(4==a){t=$("#menu").attr("data-on-cmd-req-fav");var s=t+"/renameFavoritesCategory";$("#new-dir-box").attr("data-post",s)}else if(5==a){t=$("#menu").attr("data-on-cmd-req-software");var s=t+"/renameSoftware";$("#new-dir-box").attr("data-post",s)}else if(6==a){t=$("#menu").attr("data-on-cmd-req-software");var s=t+"/renameSoftwareCategory";$("#new-dir-box").attr("data-post",s)}}),$("#delete-menu").on("click",function(){var e=$("#menu").attr("data-on-cmd-req-cat"),t=$("#menu").attr("data-cmd-type");if(1==t){var a=e+"/deleteCategory";l(a)}else if(2==t){e=$("#menu").attr("data-on-cmd-req-file");var a=e+"/deleteArticle";m(a)}else if(3==t){e=$("#menu").attr("data-on-cmd-req-fav");var a=e+"/deleteFavorites";g(a)}else if(4==t){e=$("#menu").attr("data-on-cmd-req-fav");var a=e+"/deleteFavoritesCategory";w(a)}else if(5==t){e=$("#menu").attr("data-on-cmd-req-software");var a=e+"/deleteSoftware";b(a)}else if(6==t){e=$("#menu").attr("data-on-cmd-req-software");var a=e+"/deleteSoftwareCategory";b(a)}})});
//# sourceMappingURL=../../maps/Home/main_list.min.js.map
